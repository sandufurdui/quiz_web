/*! For license information please see main.0f790739.js.LICENSE.txt */
!function(){var e={908:function(e,t,n){var r=n(8136)(n(7009),"DataView");e.exports=r},9676:function(e,t,n){var r=n(5403),i=n(2747),a=n(6037),o=n(4154),u=n(7728);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=o,s.prototype.set=u,e.exports=s},8384:function(e,t,n){var r=n(3894),i=n(8699),a=n(4957),o=n(7184),u=n(7109);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=o,s.prototype.set=u,e.exports=s},5797:function(e,t,n){var r=n(8136)(n(7009),"Map");e.exports=r},8059:function(e,t,n){var r=n(4086),i=n(9255),a=n(9186),o=n(3423),u=n(3739);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=o,s.prototype.set=u,e.exports=s},8319:function(e,t,n){var r=n(8136)(n(7009),"Promise");e.exports=r},3924:function(e,t,n){var r=n(8136)(n(7009),"Set");e.exports=r},692:function(e,t,n){var r=n(8059),i=n(5774),a=n(1596);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,e.exports=o},2854:function(e,t,n){var r=n(8384),i=n(511),a=n(835),o=n(707),u=n(8832),s=n(5077);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=u,c.prototype.set=s,e.exports=c},7197:function(e,t,n){var r=n(7009).Symbol;e.exports=r},6219:function(e,t,n){var r=n(7009).Uint8Array;e.exports=r},7091:function(e,t,n){var r=n(8136)(n(7009),"WeakMap");e.exports=r},4903:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}},7538:function(e,t,n){var r=n(6478),i=n(4963),a=n(3629),o=n(5174),u=n(6800),s=n(9102),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),l=!n&&i(e),f=!n&&!l&&o(e),h=!n&&!l&&!f&&s(e),d=n||l||f||h,p=d?r(e.length,String):[],v=p.length;for(var y in e)!t&&!c.call(e,y)||d&&("length"==y||f&&("offset"==y||"parent"==y)||h&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||u(y,v))||p.push(y);return p}},8950:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},1705:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},2095:function(e){e.exports=function(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}},7897:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},4622:function(e){e.exports=function(e){return e.split("")}},240:function(e){var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},7112:function(e,t,n){var r=n(9231);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},2526:function(e,t,n){var r=n(8528);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},5099:function(e,t,n){var r=n(372)();e.exports=r},5358:function(e,t,n){var r=n(5099),i=n(2742);e.exports=function(e,t){return e&&r(e,t,i)}},8667:function(e,t,n){var r=n(3082),i=n(9793);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[i(t[n++])];return n&&n==a?e:void 0}},1986:function(e,t,n){var r=n(1705),i=n(3629);e.exports=function(e,t,n){var a=t(e);return i(e)?a:r(a,n(e))}},9066:function(e,t,n){var r=n(7197),i=n(1587),a=n(3581),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},7852:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},529:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},4906:function(e,t,n){var r=n(9066),i=n(3141);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},1848:function(e,t,n){var r=n(3355),i=n(3141);e.exports=function e(t,n,a,o,u){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,a,o,e,u))}},3355:function(e,t,n){var r=n(2854),i=n(5305),a=n(2206),o=n(8078),u=n(8383),s=n(3629),c=n(5174),l=n(9102),f="[object Arguments]",h="[object Array]",d="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,y,m){var g=s(e),k=s(t),b=g?h:u(e),w=k?h:u(t),_=(b=b==f?d:b)==d,x=(w=w==f?d:w)==d,I=b==w;if(I&&c(e)){if(!c(t))return!1;g=!0,_=!1}if(I&&!_)return m||(m=new r),g||l(e)?i(e,t,n,v,y,m):a(e,t,b,n,v,y,m);if(!(1&n)){var E=_&&p.call(e,"__wrapped__"),S=x&&p.call(t,"__wrapped__");if(E||S){var T=E?e.value():e,C=S?t.value():t;return m||(m=new r),y(T,C,n,v,m)}}return!!I&&(m||(m=new r),o(e,t,n,v,y,m))}},8856:function(e,t,n){var r=n(2854),i=n(1848);e.exports=function(e,t,n,a){var o=n.length,u=o,s=!a;if(null==e)return!u;for(e=Object(e);o--;){var c=n[o];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<u;){var l=(c=n[o])[0],f=e[l],h=c[1];if(s&&c[2]){if(void 0===f&&!(l in e))return!1}else{var d=new r;if(a)var p=a(f,h,l,e,t,d);if(!(void 0===p?i(h,f,3,a,d):p))return!1}}return!0}},6703:function(e,t,n){var r=n(4786),i=n(257),a=n(8092),o=n(7907),u=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,l=s.toString,f=c.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?h:u).test(o(e))}},8150:function(e,t,n){var r=n(9066),i=n(4635),a=n(3141),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!o[r(e)]}},6025:function(e,t,n){var r=n(7080),i=n(4322),a=n(2100),o=n(3629),u=n(38);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?o(e)?i(e[0],e[1]):r(e):u(e)}},3654:function(e,t,n){var r=n(2936),i=n(8836),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},7080:function(e,t,n){var r=n(8856),i=n(9091),a=n(284);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},4322:function(e,t,n){var r=n(1848),i=n(6181),a=n(5658),o=n(5823),u=n(5072),s=n(284),c=n(9793);e.exports=function(e,t){return o(e)&&u(t)?s(c(e),t):function(n){var o=i(n,e);return void 0===o&&o===t?a(n,e):r(t,o,3)}}},9586:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},4084:function(e,t,n){var r=n(8667);e.exports=function(e){return function(t){return r(t,e)}}},4632:function(e){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},2646:function(e){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}},6478:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},2446:function(e,t,n){var r=n(7197),i=n(8950),a=n(3629),o=n(152),u=r?r.prototype:void 0,s=u?u.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(o(t))return s?s.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},6194:function(e){e.exports=function(e){return function(t){return e(t)}}},75:function(e){e.exports=function(e,t){return e.has(t)}},3082:function(e,t,n){var r=n(3629),i=n(5823),a=n(170),o=n(3518);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:a(o(e))}},9813:function(e,t,n){var r=n(2646);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},5525:function(e,t,n){var r=n(7009)["__core-js_shared__"];e.exports=r},372:function(e){e.exports=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),u=o.length;u--;){var s=o[e?u:++i];if(!1===n(a[s],s,a))break}return t}}},322:function(e,t,n){var r=n(9813),i=n(7302),a=n(7580),o=n(3518);e.exports=function(e){return function(t){t=o(t);var n=i(t)?a(t):void 0,u=n?n[0]:t.charAt(0),s=n?r(n,1).join(""):t.slice(1);return u[e]()+s}}},7810:function(e,t,n){var r=n(2095),i=n(4857),a=n(5660),o=RegExp("['\u2019]","g");e.exports=function(e){return function(t){return r(a(i(t).replace(o,"")),e,"")}}},5868:function(e,t,n){var r=n(4632)({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"});e.exports=r},8528:function(e,t,n){var r=n(8136),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},5305:function(e,t,n){var r=n(692),i=n(7897),a=n(75);e.exports=function(e,t,n,o,u,s){var c=1&n,l=e.length,f=t.length;if(l!=f&&!(c&&f>l))return!1;var h=s.get(e),d=s.get(t);if(h&&d)return h==t&&d==e;var p=-1,v=!0,y=2&n?new r:void 0;for(s.set(e,t),s.set(t,e);++p<l;){var m=e[p],g=t[p];if(o)var k=c?o(g,m,p,t,e,s):o(m,g,p,e,t,s);if(void 0!==k){if(k)continue;v=!1;break}if(y){if(!i(t,(function(e,t){if(!a(y,t)&&(m===e||u(m,e,n,o,s)))return y.push(t)}))){v=!1;break}}else if(m!==g&&!u(m,g,n,o,s)){v=!1;break}}return s.delete(e),s.delete(t),v}},2206:function(e,t,n){var r=n(7197),i=n(6219),a=n(9231),o=n(5305),u=n(234),s=n(2230),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,f,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=u;case"[object Set]":var p=1&r;if(d||(d=s),e.size!=t.size&&!p)return!1;var v=h.get(e);if(v)return v==t;r|=2,h.set(e,t);var y=o(d(e),d(t),r,c,f,h);return h.delete(e),y;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},8078:function(e,t,n){var r=n(8248),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,o,u){var s=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!s)return!1;for(var f=l;f--;){var h=c[f];if(!(s?h in t:i.call(t,h)))return!1}var d=u.get(e),p=u.get(t);if(d&&p)return d==t&&p==e;var v=!0;u.set(e,t),u.set(t,e);for(var y=s;++f<l;){var m=e[h=c[f]],g=t[h];if(a)var k=s?a(g,m,h,t,e,u):a(m,g,h,e,t,u);if(!(void 0===k?m===g||o(m,g,n,a,u):k)){v=!1;break}y||(y="constructor"==h)}if(v&&!y){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(v=!1)}return u.delete(e),u.delete(t),v}},1032:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8248:function(e,t,n){var r=n(1986),i=n(5918),a=n(2742);e.exports=function(e){return r(e,a,i)}},2799:function(e,t,n){var r=n(5964);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},9091:function(e,t,n){var r=n(5072),i=n(2742);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var a=t[n],o=e[a];t[n]=[a,o,r(o)]}return t}},8136:function(e,t,n){var r=n(6703),i=n(40);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},1587:function(e,t,n){var r=n(7197),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,u=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(s){}var i=o.call(e);return r&&(t?e[u]=n:delete e[u]),i}},5918:function(e,t,n){var r=n(4903),i=n(8174),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,u=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return a.call(e,t)})))}:i;e.exports=u},8383:function(e,t,n){var r=n(908),i=n(5797),a=n(8319),o=n(3924),u=n(7091),s=n(9066),c=n(7907),l="[object Map]",f="[object Promise]",h="[object Set]",d="[object WeakMap]",p="[object DataView]",v=c(r),y=c(i),m=c(a),g=c(o),k=c(u),b=s;(r&&b(new r(new ArrayBuffer(1)))!=p||i&&b(new i)!=l||a&&b(a.resolve())!=f||o&&b(new o)!=h||u&&b(new u)!=d)&&(b=function(e){var t=s(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case v:return p;case y:return l;case m:return f;case g:return h;case k:return d}return t}),e.exports=b},40:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},6417:function(e,t,n){var r=n(3082),i=n(4963),a=n(3629),o=n(6800),u=n(4635),s=n(9793);e.exports=function(e,t,n){for(var c=-1,l=(t=r(t,e)).length,f=!1;++c<l;){var h=s(t[c]);if(!(f=null!=e&&n(e,h)))break;e=e[h]}return f||++c!=l?f:!!(l=null==e?0:e.length)&&u(l)&&o(h,l)&&(a(e)||i(e))}},7302:function(e){var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},7137:function(e){var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},5403:function(e,t,n){var r=n(9620);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},2747:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6037:function(e,t,n){var r=n(9620),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},4154:function(e,t,n){var r=n(9620),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},7728:function(e,t,n){var r=n(9620);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},6800:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},5823:function(e,t,n){var r=n(3629),i=n(152),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(o.test(e)||!a.test(e)||null!=t&&e in Object(t))}},5964:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},257:function(e,t,n){var r=n(5525),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},2936:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},5072:function(e,t,n){var r=n(8092);e.exports=function(e){return e===e&&!r(e)}},3894:function(e){e.exports=function(){this.__data__=[],this.size=0}},8699:function(e,t,n){var r=n(7112),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},4957:function(e,t,n){var r=n(7112);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7184:function(e,t,n){var r=n(7112);e.exports=function(e){return r(this.__data__,e)>-1}},7109:function(e,t,n){var r=n(7112);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},4086:function(e,t,n){var r=n(9676),i=n(8384),a=n(5797);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},9255:function(e,t,n){var r=n(2799);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},9186:function(e,t,n){var r=n(2799);e.exports=function(e){return r(this,e).get(e)}},3423:function(e,t,n){var r=n(2799);e.exports=function(e){return r(this,e).has(e)}},3739:function(e,t,n){var r=n(2799);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},234:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},284:function(e){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},4634:function(e,t,n){var r=n(9151);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},9620:function(e,t,n){var r=n(8136)(Object,"create");e.exports=r},8836:function(e,t,n){var r=n(2709)(Object.keys,Object);e.exports=r},9494:function(e,t,n){e=n.nmd(e);var r=n(1032),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i&&r.process,u=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=u},3581:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},2709:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},7009:function(e,t,n){var r=n(1032),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},5774:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1596:function(e){e.exports=function(e){return this.__data__.has(e)}},2230:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},511:function(e,t,n){var r=n(8384);e.exports=function(){this.__data__=new r,this.size=0}},835:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},707:function(e){e.exports=function(e){return this.__data__.get(e)}},8832:function(e){e.exports=function(e){return this.__data__.has(e)}},5077:function(e,t,n){var r=n(8384),i=n(5797),a=n(8059);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(e,t),this.size=n.size,this}},7580:function(e,t,n){var r=n(4622),i=n(7302),a=n(2110);e.exports=function(e){return i(e)?a(e):r(e)}},170:function(e,t,n){var r=n(4634),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)})),t}));e.exports=o},9793:function(e,t,n){var r=n(152);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},7907:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},2110:function(e){var t="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+n+"|"+r+")"+"?",s="[\\ufe0e\\ufe0f]?",c=s+u+("(?:\\u200d(?:"+[i,a,o].join("|")+")"+s+u+")*"),l="(?:"+[i+n+"?",n,a,o,t].join("|")+")",f=RegExp(r+"(?="+r+")|"+l+c,"g");e.exports=function(e){return e.match(f)||[]}},1029:function(e){var t="\\u2700-\\u27bf",n="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+i+"]",o="\\d+",u="[\\u2700-\\u27bf]",s="["+n+"]",c="[^\\ud800-\\udfff"+i+o+t+n+r+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="["+r+"]",d="(?:"+s+"|"+c+")",p="(?:"+h+"|"+c+")",v="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",y="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",m="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",g="[\\ufe0e\\ufe0f]?",k=g+m+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",l,f].join("|")+")"+g+m+")*"),b="(?:"+[u,l,f].join("|")+")"+k,w=RegExp([h+"?"+s+"+"+v+"(?="+[a,h,"$"].join("|")+")",p+"+"+y+"(?="+[a,h+d,"$"].join("|")+")",h+"?"+d+"+"+v,h+"+"+y,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o,b].join("|"),"g");e.exports=function(e){return e.match(w)||[]}},567:function(e,t,n){var r=n(3131),i=n(7810)((function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)}));e.exports=i},3131:function(e,t,n){var r=n(3518),i=n(2085);e.exports=function(e){return i(r(e).toLowerCase())}},4857:function(e,t,n){var r=n(5868),i=n(3518),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=i(e))&&e.replace(a,r).replace(o,"")}},9231:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},6181:function(e,t,n){var r=n(8667);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},7805:function(e,t,n){var r=n(7852),i=n(6417);e.exports=function(e,t){return null!=e&&i(e,t,r)}},5658:function(e,t,n){var r=n(529),i=n(6417);e.exports=function(e,t){return null!=e&&i(e,t,r)}},2100:function(e){e.exports=function(e){return e}},4963:function(e,t,n){var r=n(4906),i=n(3141),a=Object.prototype,o=a.hasOwnProperty,u=a.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!u.call(e,"callee")};e.exports=s},3629:function(e){var t=Array.isArray;e.exports=t},1473:function(e,t,n){var r=n(4786),i=n(4635);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},5174:function(e,t,n){e=n.nmd(e);var r=n(7009),i=n(9488),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,u=o&&o.exports===a?r.Buffer:void 0,s=(u?u.isBuffer:void 0)||i;e.exports=s},4786:function(e,t,n){var r=n(9066),i=n(8092);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4635:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},8092:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3141:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},152:function(e,t,n){var r=n(9066),i=n(3141);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},9102:function(e,t,n){var r=n(8150),i=n(6194),a=n(9494),o=a&&a.isTypedArray,u=o?i(o):r;e.exports=u},2742:function(e,t,n){var r=n(7538),i=n(3654),a=n(1473);e.exports=function(e){return a(e)?r(e):i(e)}},9029:function(e,t,n){var r=n(2526),i=n(5358),a=n(6025);e.exports=function(e,t){var n={};return t=a(t,3),i(e,(function(e,i,a){r(n,t(e,i,a),e)})),n}},7702:function(e,t,n){var r=n(2526),i=n(5358),a=n(6025);e.exports=function(e,t){var n={};return t=a(t,3),i(e,(function(e,i,a){r(n,i,t(e,i,a))})),n}},9151:function(e,t,n){var r=n(8059);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},38:function(e,t,n){var r=n(9586),i=n(4084),a=n(5823),o=n(9793);e.exports=function(e){return a(e)?r(o(e)):i(e)}},7499:function(e,t,n){var r=n(7810)((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));e.exports=r},8174:function(e){e.exports=function(){return[]}},9488:function(e){e.exports=function(){return!1}},3518:function(e,t,n){var r=n(2446);e.exports=function(e){return null==e?"":r(e)}},2085:function(e,t,n){var r=n(322)("toUpperCase");e.exports=r},5660:function(e,t,n){var r=n(240),i=n(7137),a=n(3518),o=n(1029);e.exports=function(e,t,n){return e=a(e),void 0===(t=n?void 0:t)?i(e)?o(e):r(e):e.match(t)||[]}},2758:function(e){"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,a=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,u=new t(512),s=new t(512),c=new t(512);function l(e){return u.get(e)||u.set(e,f(e).map((function(e){return e.replace(o,"$2")})))}function f(e){return e.match(n)||[""]}function h(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function d(e){return!h(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return a.test(e)}(e))}e.exports={Cache:t,split:f,normalizePath:l,setter:function(e){var t=l(e);return s.get(e)||s.set(e,(function(e,n){for(var r=0,i=t.length,a=e;r<i-1;){var o=t[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;a=a[t[r++]]}a[t[r]]=n}))},getter:function(e,t){var n=l(e);return c.get(e)||c.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(h(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,a,o,u=e.length;for(i=0;i<u;i++)(r=e[i])&&(d(r)&&(r='"'+r+'"'),a=!(o=h(r))&&/^\d+$/.test(r),t.call(n,r,o,a,i,e))}(Array.isArray(e)?e:f(e),t,n)}}},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,M=Object.assign;function j(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var V=!1;function U(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function q(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Fe(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,Me=null,je=!1,Ve=null,Ue={onError:function(e){Le=!0,Me=e}};function qe(e,t,n,r,i,a,o,u,s){Le=!1,Me=null,Fe.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,It,Et,St=!1,Tt=[],Ct=null,Nt=null,At=null,Dt=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){jt(e)&&n.delete(t)}function Ut(){St=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Dt.forEach(Vt),Pt.forEach(Vt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return qt(t,e)}if(0<Tt.length){qt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==Nt&&qt(Nt,e),null!==At&&qt(At,e),Dt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Bt=b.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Gt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Ht(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Ft(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ft(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=M({},cn,{view:0,detail:0}),hn=an(fn),dn=M({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(M({},dn,{dataTransfer:0})),yn=an(M({},fn,{relatedTarget:0})),mn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Sn=M({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(M({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Dn),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Fn=null;l&&"documentMode"in document&&(Fn=document.documentMode);var Ln=l&&"TextEvent"in window&&!Fn,Mn=l&&(!On||Fn&&8<Fn&&11>=Fn),jn=String.fromCharCode(32),Vn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){jr(e,0)}function $n(e){if(H(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&$n(Hn)){var t=[];Kn(t,Hn,e,we(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Hn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),s(t,[e])}for(var Rr=0;Rr<Dr.length;Rr++){var Or=Dr[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Le){if(!Le)throw Error(a(198));var l=Me;Le=!1,Me=null,je||(je=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}}}if(je)throw e=Ve,je=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Ur("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=mn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Yn;else if(Wn(u))if(Jn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Un(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(m=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Vn=!0,jn);case"textInput":return(e=t.data)===jn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Un(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Si(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Fi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Fi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Si(Ci,e)):Ei(Ni),Si(Ni,n)}var ji=null,Vi=!1,Ui=!1;function qi(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!Ui&&null!==ji){Ui=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Vi=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),He(Ze,zi),i}finally{kt=t,Ui=!1}}return null}var Bi=[],Wi=0,Ki=null,Gi=0,Hi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){Bi[Wi++]=Gi,Bi[Wi++]=Ki,Ki=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=Yi,Hi[Qi++]=Ji,Hi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Yi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=Bi[--Wi],Bi[Wi]=null,Gi=Bi[--Wi],Bi[Wi]=null;for(;e===$i;)$i=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,Yi=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ma.current;Ei(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function Fa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=M({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ls|=o,e.lanes=o,e.memoizedState=f}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function Ua(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),Fa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),Fa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),Fa(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function Ba(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Pi(t)?Ai:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ua(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case _:return(t=jc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||F(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||F(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||F(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,u,s,c){var l=F(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Fc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ga(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(F(o))return y(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Ja=$a(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ls|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ls|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Wo(Fo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Mo(e)}function Fo(e,t,n){return n((function(){Lo(t)&&Mo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Mo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function jo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Uo(){return To().memoizedState}function qo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function Bo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Go(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ls|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:jo,useDebugValue:$o,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Fo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Jo,useReducer:No,useRef:Uo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(To(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Jo,useReducer:Ao,useRef:Uo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Ks=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Gs?Gs=new Set([this]):Gs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Ya(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Rs,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Rs,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Rs,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Rs,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Di(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Li(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Bu(e,t),Ba(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Di(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Ma(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(Ua(t,n,l,r),s=t.memoizedState),(u=Aa||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Di(t,s=Pi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Wa(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Ma(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Ua(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ru,Ou,Fu={dehydrated:null,treeContext:null,retryLane:0};function Lu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Lc(s,i,0,null),e=Fc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Lu(n),t.memoizedState=Fu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(o=Fc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Lu(u),t.memoizedState=Fu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Yi,Hi[Qi++]=Ji,Hi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),(t=ju(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Rc(r,u):(u=Fc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Lu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Fu,i}return e=(u=e.child).sibling,i=Rc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uu(e,n,t);else if(19===e.tag)Uu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ls|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gu(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Gu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Gu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ru(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Fr.length;i++)Vr(Fr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Fr.length;i++)Vr(Fr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Gu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Gu(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Gu(t),null;case 10:return _a(t.type._context),Gu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>zs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Gu(t),null}else 2*Je()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Gu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Gu(t),6&t.subtreeFlags&&(t.flags|=8192)):Gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Yu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Yu&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,hs(e,t,n),Yu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Ic(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Ic(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ic(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ic(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ic(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){Ic(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Je())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||f,vs(t,e),Yu=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xu=e,f=e.child;null!==f;){for(h=Xu=f;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ic(r,n,y)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Xu=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ic(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ic(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=$u;var c=Yu;if($u=o,(Yu=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Xu=s):_s(i);for(;null!==a;)Xu=a,ks(a,t,n),a=a.sibling;Xu=i,$u=u,Yu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):bs(e)}}function bs(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function ws(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function _s(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var xs,Is=Math.ceil,Es=b.ReactCurrentDispatcher,Ss=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Ds=0,Ps=0,Rs=Ii(0),Os=0,Fs=null,Ls=0,Ms=0,js=0,Vs=null,Us=null,qs=0,zs=1/0,Bs=null,Ws=!1,Ks=null,Gs=null,Hs=!1,Qs=null,$s=0,Ys=0,Js=null,Xs=-1,Zs=0;function ec(){return 0!==(6&Cs)?Je():-1!==Xs?Xs:Xs=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Ys)throw Ys=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Ms|=n),4===Os&&uc(e,Ds)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(zs=Je()+500,Vi&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Ds:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,qi(e)}(sc.bind(null,e)):qi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Ds===t||(Bs=null,zs=Je()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Es.current=o,Cs=i,null!==As?t=0:(Ns=null,Ds=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Fs,hc(e,0),uc(e,r),rc(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Fs,hc(e,0),uc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Us,Bs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=qs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Us,Bs),t);break}wc(e,Us,Bs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Us,Bs),r);break}wc(e,Us,Bs);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Us,Us=n,null!==t&&oc(t)),e}function oc(e){null===Us?Us=e:Us.push.apply(Us,e)}function uc(e,t){for(t&=~js,t&=~Ms,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Fs,hc(e,0),uc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Us,Bs),rc(e,Je()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(zs=Je()+500,Vi&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&_c();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&zi()}}function fc(){Ps=Rs.current,Ei(Rs)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:_a(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Rc(e.current,null),Ds=Ps=t,Os=0,Fs=null,js=Ms=Ls=0,Us=Vs=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Ss.current=null,null===n||null===n.return){Os=1,Fs=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gs||!Gs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ns||0===(268435455&Ls)&&0===(268435455&Ms)||uc(Ns,Ds)}function yc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Ds===t||(Bs=null,hc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Es.current=r,null!==As)throw Error(a(261));return Ns=null,Ds=0,Os}function mc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!$e();)kc(As)}function kc(e){var t=xs(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,Ss.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Ps)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Os=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Os&&(Os=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ss.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Ye(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Hs&&(Hs=!1,Qs=e,$s=i),0===(o=e.pendingLanes)&&(Gs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Ks,Ks=null,e;0!==(1&$s)&&0!==e.tag&&_c(),0!==(1&(o=e.pendingLanes))?e===Js?Ys++:(Ys=0,Js=e):Ys=0,zi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function _c(){if(null!==Qs){var e=bt($s),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,$s=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var f=Xu;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xu=h;else for(;null!==Xu;){var d=(f=Xu).sibling,p=f.return;if(as(f),f===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var b=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Xu=b;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(_){Ic(s,s.return,_)}if(s===u){Xu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Xu=w;break e}Xu=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function xc(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gs||!Gs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Ds&n)===n&&(4===Os||3===Os&&(130023424&Ds)===Ds&&500>Je()-qs?hc(e,0):js|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Nc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Fc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Dc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Dc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function qc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Fi(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=Uc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ra(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),Fa(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Si(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Wu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bu(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Ma(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Mu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Bu(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Ia(t,n),Ba(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Je()),0===(6&Cs)&&(zs=Je()+500,zi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return qc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,R(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=A,x=function(){P.postMessage(null)}}else x=function(){m(A,0)};function R(e){E=e,I||(I=!0,x())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6514:function(e){function t(e,t){var n=e.length,r=new Array(n),i={},a=n,o=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),u=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!u.has(e[0])||!u.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));a--;)i[a]||s(e[a],a,new Set);return r;function s(e,t,a){if(a.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(h){c=""}throw new Error("Cyclic dependency"+c)}if(!u.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var l=o.get(e)||new Set;if(t=(l=Array.from(l)).length){a.add(e);do{var f=l[--t];s(f,u.get(f),a)}while(t);a.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r](a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f59de87c.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="quiz_web:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkquiz_web=self.webpackChunkquiz_web||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Le},SDK_VERSION:function(){return nn},_DEFAULT_ENTRY_NAME:function(){return Bt},_addComponent:function(){return Ht},_addOrOverwriteComponent:function(){return Qt},_apps:function(){return Kt},_clearComponents:function(){return Xt},_components:function(){return Gt},_getProvider:function(){return Yt},_registerComponent:function(){return $t},_removeServiceInstance:function(){return Jt},deleteApp:function(){return un},getApp:function(){return an},getApps:function(){return on},initializeApp:function(){return rn},onLog:function(){return ln},registerVersion:function(){return cn},setLogLevel:function(){return fn}});var t,r=n(2791),i=n(1250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||s()}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var f=function(e){return e};var h="beforeunload",d="popstate";function p(e){e.preventDefault(),e.returnValue=""}function v(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function y(){return Math.random().toString(36).substr(2,8)}function m(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var k=(0,r.createContext)(null);var b=(0,r.createContext)(null);var w=(0,r.createContext)({outlet:null,matches:[]});function _(e,t){if(!e)throw new Error(t)}function x(e,t,n){void 0===n&&(n="/");var r=D(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;var i=I(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=C(i[o],r);return a}function I(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||_(!1),a.relativePath=a.relativePath.slice(r.length));var o=P([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&_(!1),I(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:u})})),t}var E=/^:\w+$/,S=function(e){return"*"===e};function T(e,t){var n=e.split("/"),r=n.length;return n.some(S)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!S(e)})).reduce((function(e,t){return e+(E.test(t)?3:""===t?1:10)}),r)}function C(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=N({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:P([i,l.pathname]),pathnameBase:R(P([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=P([i,l.pathnameBase]))}return a}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(rD){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function A(e,t,n){var r,i="string"===typeof e?g(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?g(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:O(a),hash:F(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var P=function(e){return e.join("/").replace(/\/\/+/g,"/")},R=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},O=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},F=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function L(e){M()||_(!1);var t=(0,r.useContext)(k),n=t.basename,i=t.navigator,a=U(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?g(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?n+(f?"/":""):P([n,u])}return i.createHref({pathname:c,search:s,hash:o})}function M(){return null!=(0,r.useContext)(b)}function j(){return M()||_(!1),(0,r.useContext)(b).location}function V(){M()||_(!1);var e=(0,r.useContext)(k),t=e.basename,n=e.navigator,i=(0,r.useContext)(w).matches,a=j().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=A(e,JSON.parse(o),a);"/"!==t&&(i.pathname=P([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}function U(e){var t=(0,r.useContext)(w).matches,n=j().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return A(e,JSON.parse(i),n)}),[e,i,n])}function q(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(w.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function z(e){_(!1)}function B(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;M()&&_(!1);var d=R(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=g(u));var v=u,y=v.pathname,m=void 0===y?"/":y,w=v.search,x=void 0===w?"":w,I=v.hash,E=void 0===I?"":I,S=v.state,T=void 0===S?null:S,C=v.key,N=void 0===C?"default":C,A=(0,r.useMemo)((function(){var e=D(m,d);return null==e?null:{pathname:e,search:x,hash:E,state:T,key:N}}),[d,m,x,E,T,N]);return null==A?null:(0,r.createElement)(k.Provider,{value:p},(0,r.createElement)(b.Provider,{children:o,value:{location:A,navigationType:c}}))}function W(e){var t=e.children,n=e.location;return function(e,t){M()||_(!1);var n,i=(0,r.useContext)(w).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,j());if(t){var c,l="string"===typeof t?g(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||_(!1),n=l}else n=s;var f=n.pathname||"/",h=x(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return q(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:P([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:P([u,e.pathnameBase])})})),i)}(K(t),n)}function K(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==z&&_(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=K(e.props.children)),t.push(n)}else t.push.apply(t,K(e.props.children))})),t}function G(){return G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}function H(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Q=["onClick","reloadDocument","replace","state","target","to"];function $(e){var n=e.basename,i=e.children,a=e.window,o=(0,r.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,f({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(d,(function(){if(o)w.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(w.length){if(null!=r){var u=c-r;u&&(o={action:e,location:i,retry:function(){T(-1*u)}},T(u))}}else S(e)}}));var u=t.Pop,s=a(),c=s[0],k=s[1],b=v(),w=v();function _(e){return"string"===typeof e?e:m(e)}function x(e,t){return void 0===t&&(t=null),f(l({pathname:k.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:y()}))}function I(e,t){return[{usr:e.state,key:e.key,idx:t},_(e)]}function E(e,t,n){return!w.length||(w.call({action:e,location:t,retry:n}),!1)}function S(e){u=e;var t=a();c=t[0],k=t[1],b.call({action:u,location:k})}function T(e){i.go(e)}null==c&&(c=0,i.replaceState(l({},i.state,{idx:c}),""));var C={get action(){return u},get location(){return k},createHref:_,push:function e(n,a){var o=t.Push,u=x(n,a);if(E(o,u,(function(){e(n,a)}))){var s=I(u,c+1),l=s[0],f=s[1];try{i.pushState(l,"",f)}catch(rD){r.location.assign(f)}S(o)}},replace:function e(n,r){var a=t.Replace,o=x(n,r);if(E(a,o,(function(){e(n,r)}))){var u=I(o,c),s=u[0],l=u[1];i.replaceState(s,"",l),S(a)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return b.push(e)},block:function(e){var t=w.push(e);return 1===w.length&&r.addEventListener(h,p),function(){t(),w.length||r.removeEventListener(h,p)}}};return C}({window:a}));var u=o.current,s=c((0,r.useState)({action:u.action,location:u.location}),2),k=s[0],b=s[1];return(0,r.useLayoutEffect)((function(){return u.listen(b)}),[u]),(0,r.createElement)(B,{basename:n,children:i,location:k.location,navigationType:k.action,navigator:u})}var Y=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=H(e,Q),f=L(c),h=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=V(),s=j(),c=U(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||m(s)===m(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,r.createElement)("a",G({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:t,target:s}))}));function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function X(){X=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==J(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Z(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(rD){return void n(rD)}u.done?t(s):Promise.resolve(s).then(r,i)}function ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Z(a,r,i,o,u,"next",e)}function u(e){Z(a,r,i,o,u,"throw",e)}o(void 0)}))}}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t,n){return t&&re(e.prototype,t),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ae(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function se(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function le(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function fe(e,t){if(t&&("object"===J(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function he(e){var t=le();return function(){var n,r=ce(e);if(t){var i=ce(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fe(this,n)}}function de(e,t,n){return de=le()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ue(i,n.prototype),i},de.apply(null,arguments)}function pe(e){var t="function"===typeof Map?new Map:void 0;return pe=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return de(e,arguments,ce(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ue(n,e)},pe(e)}var ve=!1,ye=!1,me="${JSCORE_VERSION}",ge=function(e,t){if(!e)throw ke(t)},ke=function(e){return new Error("Firebase Database ("+me+") INTERNAL ASSERT FAILED: "+e)},be=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(be(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},_e=function(e){var t=be(e);return we.encodeByteArray(t,!0)},xe=function(e){return _e(e).replace(/\./g,"")},Ie=function(e){try{return we.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ee(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ee(e[n],t[n]));return e}var Se=function(){function e(){var t=this;ne(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ie(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Te(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(a)),""].join(".")}function Ce(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ce())}function Ae(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function De(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Pe(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Re(){var e=Ce();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Oe(){return!0===ve||!0===ye}function Fe(){return"object"===typeof indexedDB}var Le=function(e){se(n,e);var t=he(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(oe(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(oe(a),Me.prototype.create),a}return ie(n)}(pe(Error)),Me=function(){function e(t,n,r){ne(this,e),this.service=t,this.serviceName=n,this.errors=r}return ie(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?je(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Le(n,a,t);return o}}]),e}();function je(e,t){return e.replace(Ve,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Ve=/\{\$([^}]+)}/g;function Ue(e){return JSON.parse(e)}function qe(e){return JSON.stringify(e)}var ze=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Ue(Ie(a[0])||""),n=Ue(Ie(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Be(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function We(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Ke(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ge(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function He(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Qe(u)&&Qe(s)){if(!He(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Qe(e){return null!==e&&"object"===typeof e}function $e(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Ye(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Je(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Xe=function(){function e(){ne(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return ie(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Ze(e,t){var n=new et(e,t);return n.subscribe.bind(n)}var et=function(){function e(t,n){var r=this;ne(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ie(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ae(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=tt),void 0===r.error&&(r.error=tt),void 0===r.complete&&(r.complete=tt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function tt(){}function nt(e,t){return"".concat(e," failed: ").concat(t," argument ")}var rt=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function it(e){return e&&e._delegate?e._delegate:e}function at(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ot(e){return function(e){if(Array.isArray(e))return o(e)}(e)||at(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ut=function(){function e(t,n,r){ne(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ie(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),st="[DEFAULT]",ct=function(){function e(t,n){ne(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ie(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Se;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:st})}catch(s){}var t,n=ae(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ot(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ot(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ae(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(mI){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===st?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(mI){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.component?this.component.multipleInstances?e:st:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var lt,ft,ht=function(){function e(t){ne(this,e),this.name=t,this.providers=new Map}return ie(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ct(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),dt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ft||(ft={}));var pt={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},vt=ft.INFO,yt=(te(lt={},ft.DEBUG,"log"),te(lt,ft.VERBOSE,"log"),te(lt,ft.INFO,"info"),te(lt,ft.WARN,"warn"),te(lt,ft.ERROR,"error"),lt),mt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=yt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},gt=function(){function e(t){ne(this,e),this.name=t,this._logLevel=vt,this._logHandler=mt,this._userLogHandler=null,dt.push(this)}return ie(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ft))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?pt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.DEBUG].concat(t)),this._logHandler.apply(this,[this,ft.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ft.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.INFO].concat(t)),this._logHandler.apply(this,[this,ft.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.WARN].concat(t)),this._logHandler.apply(this,[this,ft.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.ERROR].concat(t)),this._logHandler.apply(this,[this,ft.ERROR].concat(t))}}]),e}();function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wt,_t;var xt=new WeakMap,It=new WeakMap,Et=new WeakMap,St=new WeakMap,Tt=new WeakMap;var Ct={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return It.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Et.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Nt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(_t||(_t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Pt(this),n),Dt(xt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Dt(e.apply(Pt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Pt(this),t].concat(r));return Et.set(a,t.sort?t.sort():[t]),Dt(a)}}function At(e){return"function"===typeof e?Nt(e):(e instanceof IDBTransaction&&function(e){if(!It.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));It.set(e,t)}}(e),function(e,t){return t.some((function(t){return e instanceof t}))}(e,wt||(wt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ct):e)}function Dt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Dt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&xt.set(t,e)})).catch((function(){})),Tt.set(t,e),t}(e);if(St.has(e))return St.get(e);var t=At(e);return t!==e&&(St.set(e,t),Tt.set(t,e)),t}var Pt=function(e){return Tt.get(e)};var Rt,Ot,Ft=["get","getKey","getAll","getAllKeys","count"],Lt=["put","add","delete","clear"],Mt=new Map;function jt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Mt.get(t))return Mt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Lt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ft.includes(n))){var a=function(){var e=ee(X().mark((function e(t){var a,o,u,s,c,l,f=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Mt.set(t,a),a}}}Ct=function(e){return bt(bt({},e),{},{get:function(t,n,r){return jt(t,n)||e.get(t,n,r)},has:function(t,n){return!!jt(t,n)||e.has(t,n)}})}(Ct);var Vt=function(){function e(t){ne(this,e),this.container=t}return ie(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ut="@firebase/app",qt="0.7.29",zt=new gt("@firebase/app"),Bt="[DEFAULT]",Wt=(te(Rt={},Ut,"fire-core"),te(Rt,"@firebase/app-compat","fire-core-compat"),te(Rt,"@firebase/analytics","fire-analytics"),te(Rt,"@firebase/analytics-compat","fire-analytics-compat"),te(Rt,"@firebase/app-check","fire-app-check"),te(Rt,"@firebase/app-check-compat","fire-app-check-compat"),te(Rt,"@firebase/auth","fire-auth"),te(Rt,"@firebase/auth-compat","fire-auth-compat"),te(Rt,"@firebase/database","fire-rtdb"),te(Rt,"@firebase/database-compat","fire-rtdb-compat"),te(Rt,"@firebase/functions","fire-fn"),te(Rt,"@firebase/functions-compat","fire-fn-compat"),te(Rt,"@firebase/installations","fire-iid"),te(Rt,"@firebase/installations-compat","fire-iid-compat"),te(Rt,"@firebase/messaging","fire-fcm"),te(Rt,"@firebase/messaging-compat","fire-fcm-compat"),te(Rt,"@firebase/performance","fire-perf"),te(Rt,"@firebase/performance-compat","fire-perf-compat"),te(Rt,"@firebase/remote-config","fire-rc"),te(Rt,"@firebase/remote-config-compat","fire-rc-compat"),te(Rt,"@firebase/storage","fire-gcs"),te(Rt,"@firebase/storage-compat","fire-gcs-compat"),te(Rt,"@firebase/firestore","fire-fst"),te(Rt,"@firebase/firestore-compat","fire-fst-compat"),te(Rt,"fire-js","fire-js"),te(Rt,"firebase","fire-js-all"),Rt),Kt=new Map,Gt=new Map;function Ht(e,t){try{e.container.addComponent(t)}catch(n){zt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Qt(e,t){e.container.addOrOverwriteComponent(t)}function $t(e){var t=e.name;if(Gt.has(t))return zt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Gt.set(t,e);var n,r=ae(Kt.values());try{for(r.s();!(n=r.n()).done;){Ht(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Yt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Jt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bt;Yt(e,t).clearInstance(n)}function Xt(){Gt.clear()}var Zt=(te(Ot={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),te(Ot,"bad-app-name","Illegal App name: '{$appName}"),te(Ot,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),te(Ot,"app-deleted","Firebase App named '{$appName}' already deleted"),te(Ot,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),te(Ot,"invalid-log-argument","First argument to `onLog` must be null or a function."),te(Ot,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),te(Ot,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),te(Ot,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),te(Ot,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Ot),en=new Me("app","Firebase",Zt),tn=function(){function e(t,n,r){var i=this;ne(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ut("app",(function(){return i}),"PUBLIC"))}return ie(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw en.create("app-deleted",{appName:this._name})}}]),e}(),nn="9.9.1";function rn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw en.create("bad-app-name",{appName:String(i)});var a=Kt.get(i);if(a){if(He(e,a.options)&&He(r,a.config))return a;throw en.create("duplicate-app",{appName:i})}var o,u=new ht(i),s=ae(Gt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new tn(e,r,u);return Kt.set(i,l),l}function an(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=Kt.get(e);if(!t)throw en.create("no-app",{appName:e});return t}function on(){return Array.from(Kt.values())}function un(e){return sn.apply(this,arguments)}function sn(){return sn=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Kt.has(n)){e.next=6;break}return Kt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),sn.apply(this,arguments)}function cn(e,t,n){var r,i=null!==(r=Wt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void zt.warn(u.join(" "))}$t(new ut("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ln(e,t){if(null!==e&&"function"!==typeof e)throw en.create("invalid-log-argument");!function(e,t){var n,r=ae(dt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=pt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ft[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function fn(e){var t;t=e,dt.forEach((function(e){e.setLogLevel(t)}))}var hn="firebase-heartbeat-store",dn=null;function pn(){return dn||(dn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Dt(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Dt(u.result),e.oldVersion,e.newVersion,Dt(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(hn)}}).catch((function(e){throw en.create("storage-open",{originalErrorMessage:e.message})}))),dn}function vn(e){return yn.apply(this,arguments)}function yn(){return yn=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pn();case 3:return r=e.sent,e.abrupt("return",r.transaction(hn).objectStore(hn).get(kn(t)));case 7:throw e.prev=7,e.t0=e.catch(0),en.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),yn.apply(this,arguments)}function mn(e,t){return gn.apply(this,arguments)}function gn(){return gn=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pn();case 3:return i=e.sent,a=i.transaction(hn,"readwrite"),o=a.objectStore(hn),e.next=8,o.put(n,kn(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),en.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),gn.apply(this,arguments)}function kn(e){return"".concat(e.name,"!").concat(e.options.appId)}var bn=function(){function e(t){var n=this;ne(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new En(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ie(e,[{key:"triggerHeartbeat",value:function(){var e=ee(X().mark((function e(){var t,n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=wn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ee(X().mark((function e(){var t,n,r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=wn(),n=_n(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=xe(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function wn(){return(new Date).toISOString().substring(0,10)}function _n(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=ae(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Sn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Sn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var xn,In,En=function(){function e(t){ne(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ie(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fe()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(rD){t(rD)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,vn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",mn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",mn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ot(r.heartbeats),ot(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Sn(e){return xe(JSON.stringify({version:2,heartbeats:e})).length}xn="",$t(new ut("platform-logger",(function(e){return new Vt(e)}),"PRIVATE")),$t(new ut("heartbeat",(function(e){return new bn(e)}),"PRIVATE")),cn(Ut,qt,xn),cn(Ut,qt,"esm2017"),cn("fire-js","");var Tn=function(){function e(t,n){var r=this;ne(this,e),this._delegate=t,this.firebase=n,Ht(t,new ut("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ie(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),un(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ht(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Qt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Cn=(te(In={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),te(In,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),In),Nn=new Me("app-compat","Firebase",Cn);var An=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=rn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Be(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:cn,setLogLevel:fn,onLog:ln,apps:null,SDK_VERSION:nn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if($t(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Nn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ee(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Be(n,e=e||Bt))throw Nn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Tn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ee(n,e)},createSubscribe:Ze,ErrorFactory:Me,deepExtend:Ee}),n}(),Dn=new gt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Dn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Pn=self.firebase.SDK_VERSION;Pn&&Pn.indexOf("LITE")>=0&&Dn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Rn=An;!function(e){cn("@firebase/app-compat","0.1.30",e)}();function On(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}function Fn(){return Fn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=On(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Fn.apply(this,arguments)}Rn.registerVersion("firebase","9.9.1","app-compat");function Ln(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Mn;Object.create;var jn="facebook.com",Vn="github.com",Un="google.com",qn="password",zn="twitter.com",Bn="EMAIL_SIGNIN",Wn="PASSWORD_RESET",Kn="RECOVER_EMAIL",Gn="REVERT_SECOND_FACTOR_ADDITION",Hn="VERIFY_AND_CHANGE_EMAIL",Qn="VERIFY_EMAIL";function $n(){return te({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Yn=function(){var e;return te(e={},"admin-restricted-operation","This operation is restricted to administrators only."),te(e,"argument-error",""),te(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),te(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),te(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),te(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),te(e,"cordova-not-ready","Cordova framework is not ready."),te(e,"cors-unsupported","This browser is not supported."),te(e,"credential-already-in-use","This credential is already associated with a different user account."),te(e,"custom-token-mismatch","The custom token corresponds to a different audience."),te(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),te(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),te(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),te(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),te(e,"email-already-in-use","The email address is already in use by another account."),te(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),te(e,"expired-action-code","The action code has expired."),te(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),te(e,"internal-error","An internal AuthError has occurred."),te(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),te(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),te(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),te(e,"invalid-auth-event","An internal AuthError has occurred."),te(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),te(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),te(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),te(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),te(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),te(e,"invalid-email","The email address is badly formatted."),te(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),te(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),te(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),te(e,"invalid-credential","The supplied auth credential is malformed or has expired."),te(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),te(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),te(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),te(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),te(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),te(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),te(e,"wrong-password","The password is invalid or the user does not have a password."),te(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),te(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),te(e,"invalid-provider-id","The specified provider ID is invalid."),te(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),te(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),te(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),te(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),te(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),te(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),te(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),te(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),te(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),te(e,"missing-continue-uri","A continue URL must be provided in the request."),te(e,"missing-iframe-start","An internal AuthError has occurred."),te(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),te(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),te(e,"missing-multi-factor-info","No second factor identifier is provided."),te(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),te(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),te(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),te(e,"app-deleted","This instance of FirebaseApp has been deleted."),te(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),te(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),te(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),te(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),te(e,"no-auth-event","An internal AuthError has occurred."),te(e,"no-such-provider","User was not linked to an account with the given provider."),te(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),te(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),te(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),te(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),te(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),te(e,"provider-already-linked","User can only be linked to one identity for the given provider."),te(e,"quota-exceeded","The project's quota for this operation has been exceeded."),te(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),te(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),te(e,"rejected-credential","The request contains malformed or mismatching credentials."),te(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),te(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),te(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),te(e,"timeout","The operation has timed out."),te(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),te(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),te(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),te(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),te(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),te(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),te(e,"unverified-email","The operation requires a verified email."),te(e,"user-cancelled","The user did not grant your application the permissions it requested."),te(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),te(e,"user-disabled","The user account has been disabled by an administrator."),te(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),te(e,"user-signed-out",""),te(e,"weak-password","The password must be 6 characters long or more."),te(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),te(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Jn=$n,Xn=new Me("auth","Firebase",$n()),Zn=new gt("@firebase/auth");function er(e){if(Zn.logLevel<=ft.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Zn.error.apply(Zn,["Auth (".concat(nn,"): ").concat(e)].concat(n))}}function tr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ar.apply(void 0,[e].concat(n))}function nr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ar.apply(void 0,[e].concat(n))}function rr(e,t,n){var r=Object.assign(Object.assign({},Jn()),te({},t,n));return new Me("auth","Firebase",r).create(t,{appName:e.name})}function ir(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&tr(e,"argument-error"),rr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ar(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ot(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ot(o)))}return Xn.create.apply(Xn,[e].concat(n))}function or(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ar.apply(void 0,[t].concat(r))}}function ur(e){var t="INTERNAL ASSERTION FAILED: "+e;throw er(t),new Error(t)}function sr(e,t){e||ur(t)}var cr=new Map;function lr(e){sr(e instanceof Function,"Expected a class definition");var t=cr.get(e);return t?(sr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,cr.set(e,t),t)}function fr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function hr(){return"http:"===dr()||"https:"===dr()}function dr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var pr=function(){function e(t,n){ne(this,e),this.shortDelay=t,this.longDelay=n,sr(n>t,"Short delay should be less than long delay!"),this.isMobile=Ne()||Pe()}return ie(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(hr()||De()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function vr(e,t){sr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var yr=function(){function e(){ne(this,e)}return ie(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),mr=(te(Mn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),te(Mn,"MISSING_CUSTOM_TOKEN","internal-error"),te(Mn,"INVALID_IDENTIFIER","invalid-email"),te(Mn,"MISSING_CONTINUE_URI","internal-error"),te(Mn,"INVALID_PASSWORD","wrong-password"),te(Mn,"MISSING_PASSWORD","internal-error"),te(Mn,"EMAIL_EXISTS","email-already-in-use"),te(Mn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),te(Mn,"INVALID_IDP_RESPONSE","invalid-credential"),te(Mn,"INVALID_PENDING_TOKEN","invalid-credential"),te(Mn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),te(Mn,"MISSING_REQ_TYPE","internal-error"),te(Mn,"EMAIL_NOT_FOUND","user-not-found"),te(Mn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),te(Mn,"EXPIRED_OOB_CODE","expired-action-code"),te(Mn,"INVALID_OOB_CODE","invalid-action-code"),te(Mn,"MISSING_OOB_CODE","internal-error"),te(Mn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),te(Mn,"INVALID_ID_TOKEN","invalid-user-token"),te(Mn,"TOKEN_EXPIRED","user-token-expired"),te(Mn,"USER_NOT_FOUND","user-token-expired"),te(Mn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),te(Mn,"INVALID_CODE","invalid-verification-code"),te(Mn,"INVALID_SESSION_INFO","invalid-verification-id"),te(Mn,"INVALID_TEMPORARY_PROOF","invalid-credential"),te(Mn,"MISSING_SESSION_INFO","missing-verification-id"),te(Mn,"SESSION_EXPIRED","code-expired"),te(Mn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),te(Mn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),te(Mn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),te(Mn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),te(Mn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),te(Mn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),te(Mn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),te(Mn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),te(Mn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),te(Mn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),te(Mn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Mn),gr=new pr(3e4,6e4);function kr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function br(e,t,n,r){return wr.apply(this,arguments)}function wr(){return wr=ee(X().mark((function e(t,n,r,i){var a,o=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",_r(t,a,ee(X().mark((function e(){var a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=$e(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",yr.fetch()(Sr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),wr.apply(this,arguments)}function _r(e,t,n){return xr.apply(this,arguments)}function xr(){return xr=ee(X().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},mr),n),e.prev=2,a=new Tr(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Cr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Cr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Cr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Cr(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw rr(t,p,d);case 34:tr(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Le)){e.next=41;break}throw e.t0;case 41:tr(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),xr.apply(this,arguments)}function Ir(e,t,n,r){return Er.apply(this,arguments)}function Er(){return Er=ee(X().mark((function e(t,n,r,i){var a,o,u=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,br(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&tr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}function Sr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?vr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Tr=function(){function e(t){var n=this;ne(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(nr(n.auth,"network-request-failed"))}),gr.get())}))}return ie(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Cr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=nr(e,t,r);return i.customData._tokenResponse=n,i}function Nr(e,t){return Ar.apply(this,arguments)}function Ar(){return Ar=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",br(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Ar.apply(this,arguments)}function Dr(e,t){return Pr.apply(this,arguments)}function Pr(){return Pr=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",br(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}function Rr(e,t){return Or.apply(this,arguments)}function Or(){return Or=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",br(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}function Fr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Lr(){return Lr=ee(X().mark((function e(t){var n,r,i,a,o,u,s=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=it(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,or((a=jr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Fr(Mr(a.auth_time)),issuedAtTime:Fr(Mr(a.iat)),expirationTime:Fr(Mr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Mr(e){return 1e3*Number(e)}function jr(e){var t,n=c(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return er("JWT malformed, contained fewer than 3 sections"),null;try{var o=Ie(i);return o?JSON.parse(o):(er("Failed to decode base64 JWT payload"),null)}catch(u){return er("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function Vr(e,t){return Ur.apply(this,arguments)}function Ur(){return Ur=ee(X().mark((function e(t,n){var r=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Le&&qr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ur.apply(this,arguments)}function qr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var zr=function(){function e(t){ne(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ie(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Br=function(){function e(t,n){ne(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ie(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Fr(this.lastLoginAt),this.creationTime=Fr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Wr(e){return Kr.apply(this,arguments)}function Kr(){return Kr=ee(X().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Vr(t,Rr(r,{idToken:i}));case 6:or(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Qr(o.providerUserInfo):[],s=Hr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Br(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Kr.apply(this,arguments)}function Gr(){return(Gr=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=it(t),e.next=3,Wr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ot(n),ot(t))}function Qr(e){return e.map((function(e){var t=e.providerId,n=Ln(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function $r(e,t){return Yr.apply(this,arguments)}function Yr(){return Yr=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r(t,{},ee(X().mark((function e(){var r,i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$e({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Sr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",yr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Yr.apply(this,arguments)}var Jr=function(){function e(){ne(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ie(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){or(e.idToken,"internal-error"),or("undefined"!==typeof e.idToken,"internal-error"),or("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=jr(e);return or(t,"internal-error"),or("undefined"!==typeof t.exp,"internal-error"),or("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ee(X().mark((function e(t){var n,r=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],or(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$r(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return ur("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(or("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(or("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(or("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Xr(e,t){or("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Zr=function(){function e(t){ne(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Ln(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?ot(a.providerData):[],this.metadata=new Br(a.createdAt||void 0,a.lastLoginAt||void 0)}return ie(e,[{key:"getIdToken",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(or(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Lr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Gr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(or(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){or(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ee(X().mark((function e(t){var n,r,i=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Wr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Vr(this,Nr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;or(k&&x,t,"internal-error");var I=Jr.fromJSON(this.name,x);or("string"===typeof k,t,"internal-error"),Xr(f,t.name),Xr(h,t.name),or("boolean"===typeof b,t,"internal-error"),or("boolean"===typeof w,t,"internal-error"),Xr(d,t.name),Xr(p,t.name),Xr(v,t.name),Xr(y,t.name),Xr(m,t.name),Xr(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=ee(X().mark((function t(n,r){var i,a,o,u=arguments;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Jr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Wr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ei=function(){function e(){ne(this,e),this.type="NONE",this.storage={}}return ie(e,[{key:"_isAvailable",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ei.type="NONE";var ti=ei;function ni(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ri=function(){function e(t,n,r){ne(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ni(this.userKey,a.apiKey,o),this.fullPersistenceKey=ni("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ie(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Zr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ee(X().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(lr(ti),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||lr(ti),u=ni(i,n.config.apiKey,n.name),s=null,c=ae(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Zr._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ii(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(si(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ai(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(li(t))return"Blackberry";if(fi(t))return"Webos";if(oi(t))return"Safari";if((t.includes("chrome/")||ui(t))&&!t.includes("edge/"))return"Chrome";if(ci(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/firefox\//i.test(e)}function oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/crios\//i.test(e)}function si(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/iemobile/i.test(e)}function ci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/android/i.test(e)}function li(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/blackberry/i.test(e)}function fi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/webos/i.test(e)}function hi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function di(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return hi(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function pi(){return Re()&&10===document.documentMode}function vi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return hi(e)||ci(e)||fi(e)||li(e)||/windows phone/i.test(e)||si(e)}function yi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ii(Ce());break;case"Worker":t="".concat(ii(Ce()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(nn,"/").concat(r)}var mi=function(){function e(t){ne(this,e),this.auth=t,this.queue=[]}return ie(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ee(X().mark((function e(t){var n,r,i,a,o,u,s,c;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=ae(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=ae(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),gi=function(){function e(t,n,r){ne(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bi(this),this.idTokenSubscription=new bi(this),this.beforeStateQueue=new mi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return ie(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=lr(t)),this._initializationPromise=this.queue(ee(X().mark((function r(){var i,a;return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ri.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ee(X().mark((function e(t){var n,r,i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return or(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?it(t):null)&&or(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ee(X().mark((function e(t){var n,r=this,i=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&or(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ee(X().mark((function n(){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(lr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Me("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return or(n=t&&lr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ri.create(this,[lr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ee(X().mark((function e(t){var n=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return or(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return or(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ee(X().mark((function e(){var t,n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=te({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ki(e){return it(e)}var bi=function(){function e(t){var n=this;ne(this,e),this.auth=t,this.observer=null,this.addObserver=Ze((function(e){return n.observer=e}))}return ie(e,[{key:"next",get:function(){return or(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function wi(e,t,n){var r=ki(e);or(r._canInitEmulator,r,"emulator-config-failed"),or(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=_i(t),o=function(e){var t=_i(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:xi(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:xi(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function _i(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ii=function(){function e(t,n){ne(this,e),this.providerId=t,this.signInMethod=n}return ie(e,[{key:"toJSON",value:function(){return ur("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return ur("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return ur("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return ur("not implemented")}}]),e}();function Ei(e,t){return Si.apply(this,arguments)}function Si(){return Si=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",br(t,"POST","/v1/accounts:resetPassword",kr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Si.apply(this,arguments)}function Ti(e,t){return Ci.apply(this,arguments)}function Ci(){return Ci=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",br(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ci.apply(this,arguments)}function Ni(e,t){return Ai.apply(this,arguments)}function Ai(){return Ai=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",br(t,"POST","/v1/accounts:update",kr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ai.apply(this,arguments)}function Di(e,t){return Pi.apply(this,arguments)}function Pi(){return Pi=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:signInWithPassword",kr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Pi.apply(this,arguments)}function Ri(e,t){return Oi.apply(this,arguments)}function Oi(){return Oi=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",br(t,"POST","/v1/accounts:sendOobCode",kr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Oi.apply(this,arguments)}function Fi(e,t){return Li.apply(this,arguments)}function Li(){return Li=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ri(t,n));case 1:case"end":return e.stop()}}),e)}))),Li.apply(this,arguments)}function Mi(e,t){return ji.apply(this,arguments)}function ji(){return ji=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ri(t,n));case 1:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}function Vi(e,t){return Ui.apply(this,arguments)}function Ui(){return Ui=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ri(t,n));case 1:case"end":return e.stop()}}),e)}))),Ui.apply(this,arguments)}function qi(e,t){return zi.apply(this,arguments)}function zi(){return zi=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ri(t,n));case 1:case"end":return e.stop()}}),e)}))),zi.apply(this,arguments)}function Bi(e,t){return Wi.apply(this,arguments)}function Wi(){return Wi=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:signInWithEmailLink",kr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}function Ki(e,t){return Gi.apply(this,arguments)}function Gi(){return Gi=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:signInWithEmailLink",kr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Gi.apply(this,arguments)}var Hi=function(e){se(n,e);var t=he(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ne(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return ie(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Di(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Bi(t,{email:this._email,oobCode:this._password}));case 5:tr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ti(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ki(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:tr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ii);function Qi(e,t){return $i.apply(this,arguments)}function $i(){return $i=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:signInWithIdp",kr(t,n)));case 1:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}var Yi=function(e){se(n,e);var t=he(n);function n(){var e;return ne(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ie(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Qi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Qi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Qi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$e(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Ln(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ii);function Ji(e,t){return Xi.apply(this,arguments)}function Xi(){return Xi=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",br(t,"POST","/v1/accounts:sendVerificationCode",kr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Xi.apply(this,arguments)}function Zi(){return Zi=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:signInWithPhoneNumber",kr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zi.apply(this,arguments)}function ea(){return ea=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ir(t,"POST","/v1/accounts:signInWithPhoneNumber",kr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Cr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),ea.apply(this,arguments)}var ta=te({},"USER_NOT_FOUND","user-not-found");function na(){return na=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ir(t,"POST","/v1/accounts:signInWithPhoneNumber",kr(t,r),ta));case 2:case"end":return e.stop()}}),e)}))),na.apply(this,arguments)}var ra=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ie(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Zi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ea.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return na.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ii);var ia=function(){function e(t){var n,r,i,a,o,u;ne(this,e);var s=Ye(Je(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);or(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return ie(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ye(Je(e)).link,n=t?Ye(Je(t)).deep_link_id:null,r=Ye(Je(e)).deep_link_id;return(r?Ye(Je(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(mI){return null}}}]),e}();var aa=function(){function e(){ne(this,e),this.providerId=e.PROVIDER_ID}return ie(e,null,[{key:"credential",value:function(e,t){return Hi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ia.parseLink(t);return or(n,"argument-error"),Hi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();aa.PROVIDER_ID="password",aa.EMAIL_PASSWORD_SIGN_IN_METHOD="password",aa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var oa=function(){function e(t){ne(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ie(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ua=function(e){se(n,e);var t=he(n);function n(){var e;return ne(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ie(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ot(this.scopes)}}]),n}(oa),sa=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return or(e.idToken||e.accessToken,"argument-error"),Yi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return or("providerId"in t&&"signInMethod"in t,"argument-error"),Yi._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(ua),ca=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.call(this,"facebook.com")}return ie(n,null,[{key:"credential",value:function(e){return Yi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(mI){return null}}}]),n}(ua);ca.FACEBOOK_SIGN_IN_METHOD="facebook.com",ca.PROVIDER_ID="facebook.com";var la=function(e){se(n,e);var t=he(n);function n(){var e;return ne(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ie(n,null,[{key:"credential",value:function(e,t){return Yi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(mI){return null}}}]),n}(ua);la.GOOGLE_SIGN_IN_METHOD="google.com",la.PROVIDER_ID="google.com";var fa=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.call(this,"github.com")}return ie(n,null,[{key:"credential",value:function(e){return Yi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(mI){return null}}}]),n}(ua);fa.GITHUB_SIGN_IN_METHOD="github.com",fa.PROVIDER_ID="github.com";var ha=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return ie(n,[{key:"_getIdTokenResponse",value:function(e){return Qi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Qi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Qi(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ii),da=function(e){se(n,e);var t=he(n);function n(e){return ne(this,n),or(e.startsWith("saml."),"argument-error"),t.call(this,e)}return ie(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ha.fromJSON(e);return or(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ha._create(r,n)}catch(i){return null}}}]),n}(oa),pa=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.call(this,"twitter.com")}return ie(n,null,[{key:"credential",value:function(e,t){return Yi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(mI){return null}}}]),n}(ua);function va(e,t){return ya.apply(this,arguments)}function ya(){return ya=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:signUp",kr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}pa.TWITTER_SIGN_IN_METHOD="twitter.com",pa.PROVIDER_ID="twitter.com";var ma=function(){function e(t){ne(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ie(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ee(X().mark((function t(n,r,i){var a,o,u,s,c=arguments;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Zr._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=ga(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ee(X().mark((function t(n,r,i){var a;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ga(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ga(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function ka(){return ka=ee(X().mark((function e(t){var n,r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ki(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ma({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,va(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ma._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),ka.apply(this,arguments)}var ba=function(e){se(n,e);var t=he(n);function n(e,r,i,a){var o,u;return ne(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(oe(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return ie(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Le);function wa(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ba._fromErrorAndOperation(e,n,t,r);throw n}))}function _a(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function xa(e,t){return Ia.apply(this,arguments)}function Ia(){return Ia=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=it(t),e.next=3,Ta(!0,r,n);case 3:return e.t0=Dr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=_a(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Ia.apply(this,arguments)}function Ea(e,t){return Sa.apply(this,arguments)}function Sa(){return Sa=ee(X().mark((function e(t,n){var r,i,a=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Vr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ma._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Sa.apply(this,arguments)}function Ta(e,t,n){return Ca.apply(this,arguments)}function Ca(){return(Ca=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wr(n);case 2:i=_a(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",or(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(e,t){return Aa.apply(this,arguments)}function Aa(){return Aa=ee(X().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Vr(t,wa(a,o,n,t),r);case 6:return or((u=e.sent).idToken,a,"internal-error"),or(s=jr(u.idToken),a,"internal-error"),c=s.sub,or(t.uid===c,a,"user-mismatch"),e.abrupt("return",ma._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&tr(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Aa.apply(this,arguments)}function Da(e,t){return Pa.apply(this,arguments)}function Pa(){return Pa=ee(X().mark((function e(t,n){var r,i,a,o,u=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,wa(t,i,n);case 4:return a=e.sent,e.next=7,ma._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}function Ra(e,t){return Oa.apply(this,arguments)}function Oa(){return Oa=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Da(ki(t),n));case 1:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function Fa(e,t){return La.apply(this,arguments)}function La(){return(La=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=it(t),e.next=3,Ta(!1,r,n.providerId);case 3:return e.abrupt("return",Ea(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ma(e,t){return ja.apply(this,arguments)}function ja(){return(ja=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Na(it(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Va(e,t){return Ua.apply(this,arguments)}function Ua(){return Ua=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:signInWithCustomToken",kr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ua.apply(this,arguments)}function qa(){return qa=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ki(t),e.next=3,Va(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ma._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}var za=function(){function e(t,n){ne(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return ie(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ba._fromServerResponse(e,t):tr(e,"internal-error")}}]),e}(),Ba=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return ie(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(za);function Wa(e,t,n){var r;or((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),or("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(or(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(or(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ka(){return Ka=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=it(t),a={requestType:"PASSWORD_RESET",email:n},r&&Wa(i,a,r),e.next=5,Mi(i,a);case 5:case"end":return e.stop()}}),e)}))),Ka.apply(this,arguments)}function Ga(){return Ga=ee(X().mark((function e(t,n,r){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ei(it(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Ga.apply(this,arguments)}function Ha(){return Ha=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ni(it(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Qa(e,t){return $a.apply(this,arguments)}function $a(){return $a=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=it(t),e.next=3,Ei(r,{oobCode:n});case 3:i=e.sent,or(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return or(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:or(i.mfaInfo,r,"internal-error");case 13:or(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=za._fromServerResponse(ki(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}function Ya(){return Ya=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qa(it(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Ya.apply(this,arguments)}function Ja(e,t,n){return Xa.apply(this,arguments)}function Xa(){return Xa=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ki(t),e.next=3,va(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ma._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Xa.apply(this,arguments)}function Za(){return Za=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=it(t),a={requestType:"EMAIL_SIGNIN",email:n},or(r.handleCodeInApp,i,"argument-error"),r&&Wa(i,a,r),e.next=6,Vi(i,a);case 6:case"end":return e.stop()}}),e)}))),Za.apply(this,arguments)}function eo(){return eo=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=it(t),or((a=aa.credentialWithLink(n,r||fr()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ra(i,a));case 4:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(e,t){return no.apply(this,arguments)}function no(){return no=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",br(t,"POST","/v1/accounts:createAuthUri",kr(t,n)));case 1:case"end":return e.stop()}}),e)}))),no.apply(this,arguments)}function ro(){return ro=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hr()?fr():"http://localhost",i={identifier:n,continueUri:r},e.next=4,to(it(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),ro.apply(this,arguments)}function io(){return(io=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=it(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Wa(r.auth,a,n),e.next=8,Fi(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ao(){return(ao=ee(X().mark((function e(t,n,r){var i,a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=it(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Wa(i.auth,o,r),e.next=8,qi(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oo(e,t){return uo.apply(this,arguments)}function uo(){return uo=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",br(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),uo.apply(this,arguments)}function so(){return(so=ee(X().mark((function e(t,n){var r,i,a,o,u,s,c;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=it(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Vr(a,oo(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function co(e,t,n){return lo.apply(this,arguments)}function lo(){return lo=ee(X().mark((function e(t,n,r){var i,a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Vr(t,Ti(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),lo.apply(this,arguments)}var fo=ie((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ne(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ho=function(e){se(n,e);var t=he(n);function n(e,r,i,a){var o;return ne(this,n),(o=t.call(this,e,r,i)).username=a,o}return ie(n)}(fo),po=function(e){se(n,e);var t=he(n);function n(e,r){return ne(this,n),t.call(this,e,"facebook.com",r)}return ie(n)}(fo),vo=function(e){se(n,e);var t=he(n);function n(e,r){return ne(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return ie(n)}(ho),yo=function(e){se(n,e);var t=he(n);function n(e,r){return ne(this,n),t.call(this,e,"google.com",r)}return ie(n)}(fo),mo=function(e){se(n,e);var t=he(n);function n(e,r,i){return ne(this,n),t.call(this,e,"twitter.com",r,i)}return ie(n)}(ho);function go(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=jr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new fo(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new po(a,i);case"github.com":return new vo(a,i);case"google.com":return new yo(a,i);case"twitter.com":return new mo(a,i,e.screenName||null);case"custom":case"anonymous":return new fo(a,null);default:return new fo(a,r,i)}}(n)}var ko=function(){function e(t,n){ne(this,e),this.type=t,this.credential=n}return ie(e,[{key:"toJSON",value:function(){return{multiFactorSession:te({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),bo=function(){function e(t,n,r){ne(this,e),this.session=t,this.hints=n,this.signInResolver=r}return ie(e,[{key:"resolveSignIn",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ki(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return za._fromServerResponse(r,e)}));or(i.mfaPendingCredential,r,"internal-error");var o=ko._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ee(X().mark((function e(t){var a,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ma._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return or(n.user,r,"internal-error"),e.abrupt("return",ma._forOperation(n.user,n.operationType,u));case 17:tr(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function wo(e,t){return br(e,"POST","/v2/accounts/mfaEnrollment:start",kr(e,t))}function _o(e,t){return br(e,"POST","/v2/accounts/mfaEnrollment:withdraw",kr(e,t))}var xo=function(){function e(t){var n=this;ne(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return za._fromServerResponse(t.auth,e)})))}))}return ie(e,[{key:"getSession",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ko,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Vr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ee(X().mark((function e(t){var n,r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Vr(this.user,_o(this.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Io=new WeakMap;var Eo="__sak",So=function(){function e(t,n){ne(this,e),this.storageRetriever=t,this.type=n}return ie(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Eo,"1"),this.storage.removeItem(Eo),Promise.resolve(!0)):Promise.resolve(!1)}catch(mI){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var To=function(e){se(n,e);var t=he(n);function n(){var e;return ne(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Ce();return oi(e)||hi(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=vi(),e._shouldAllowMigration=!0,e}return ie(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);pi()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ee(X().mark((function e(t,r){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn(ce(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ee(X().mark((function e(t){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn(ce(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn(ce(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(So);To.type="LOCAL";var Co=To,No=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ie(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(So);No.type="SESSION";var Ao=No;function Do(e){return Promise.all(e.map(function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Po=function(){function e(t){ne(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ie(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ee(X().mark((function e(t){var n,r,i,a,o,u,s,c;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Do(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ro(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Po.receivers=[];var Oo=function(){function e(t){ne(this,e),this.target=t,this.handlers=new Set}return ie(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ee(X().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Ro("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Fo(){return window}function Lo(){return"undefined"!==typeof Fo().WorkerGlobalScope&&"function"===typeof Fo().importScripts}function Mo(){return jo.apply(this,arguments)}function jo(){return(jo=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Vo(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Uo="firebaseLocalStorageDb",qo="firebaseLocalStorage",zo="fbase_key",Bo=function(){function e(t){ne(this,e),this.request=t}return ie(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Wo(e,t){return e.transaction([qo],t?"readwrite":"readonly").objectStore(qo)}function Ko(){var e=indexedDB.deleteDatabase(Uo);return new Bo(e).toPromise()}function Go(){var e=indexedDB.open(Uo,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(qo,{keyPath:zo})}catch(r){n(r)}})),e.addEventListener("success",ee(X().mark((function n(){var r;return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(qo)){n.next=12;break}return r.close(),n.next=5,Ko();case 5:return n.t0=t,n.next=8,Go();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ho(e,t,n){return Qo.apply(this,arguments)}function Qo(){return Qo=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Wo(t,!0).put((te(i={},zo,n),te(i,"value",r),i)),e.abrupt("return",new Bo(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}function $o(e,t){return Yo.apply(this,arguments)}function Yo(){return Yo=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wo(t,!1).get(n),e.next=3,new Bo(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}function Jo(e,t){var n=Wo(e,!0).delete(t);return new Bo(n).toPromise()}var Xo=function(){function e(){ne(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ie(e,[{key:"_openDb",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Go();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ee(X().mark((function e(){var t=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Po._getInstance(Lo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ee(X().mark((function e(n,r){var i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ee(X().mark((function e(){var t,n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Oo(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Vo()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Go();case 5:return t=e.sent,e.next=8,Ho(t,Eo,"1");case 8:return e.next=10,Jo(t,Eo);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ee(X().mark((function e(t,n){var r=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ho(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return $o(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ee(X().mark((function e(t){var n=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Jo(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ee(X().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Wo(e,!1).getAll();return new Bo(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=ae(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Xo.type="LOCAL";var Zo=Xo;function eu(e,t){return br(e,"POST","/v2/accounts/mfaSignIn:start",kr(e,t))}function tu(e){return nu.apply(this,arguments)}function nu(){return nu=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,br(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),nu.apply(this,arguments)}function ru(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=nr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function iu(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var au=1e12,ou=function(){function e(t){ne(this,e),this.auth=t,this.counter=au,this._widgets=new Map}return ie(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new uu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||au;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||au;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||au,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),uu=function(){function e(t,n,r){var i=this;ne(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;or(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return ie(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var su=iu("rcb"),cu=new pr(3e4,6e4),lu="https://www.google.com/recaptcha/api.js?",fu=function(){function e(){var t;ne(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Fo().grecaptcha)||void 0===t?void 0:t.render)}return ie(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return or(hu(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Fo().grecaptcha):new Promise((function(r,i){var a=Fo().setTimeout((function(){i(nr(e,"network-request-failed"))}),cu.get());Fo()[su]=function(){Fo().clearTimeout(a),delete Fo()[su];var o=Fo().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(nr(e,"internal-error"))},ru("".concat(lu,"?").concat($e({onload:su,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(nr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Fo().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function hu(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var du=function(){function e(){ne(this,e)}return ie(e,[{key:"load",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ou(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),pu="recaptcha",vu={theme:"light",type:"image"},yu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},vu),r=arguments.length>2?arguments[2]:void 0;ne(this,e),this.parameters=n,this.type=pu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ki(r),this.isInvisible="invisible"===this.parameters.size,or("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;or(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new du:new fu,this.validateStartingState()}return ie(e,[{key:"verify",value:function(){var e=ee(X().mark((function e(){var t,n,r,i=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){or(!this.parameters.sitekey,this.auth,"argument-error"),or(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),or("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Fo()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){or(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ee(X().mark((function e(){var t,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return or(hr()&&!Lo(),this.auth,"internal-error"),e.next=3,mu();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,tu(this.auth);case 8:or(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return or(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function mu(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var gu=function(){function e(t,n){ne(this,e),this.verificationId=t,this.onConfirmation=n}return ie(e,[{key:"confirm",value:function(e){var t=ra._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function ku(){return ku=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ki(t),e.next=3,xu(i,n,it(r));case 3:return a=e.sent,e.abrupt("return",new gu(a,(function(e){return Ra(i,e)})));case 5:case"end":return e.stop()}}),e)}))),ku.apply(this,arguments)}function bu(e,t,n){return wu.apply(this,arguments)}function wu(){return(wu=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=it(t),e.next=3,Ta(!1,i,"phone");case 3:return e.next=5,xu(i.auth,n,it(r));case 5:return a=e.sent,e.abrupt("return",new gu(a,(function(e){return Fa(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _u(){return(_u=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=it(t),e.next=3,xu(i.auth,n,it(r));case 3:return a=e.sent,e.abrupt("return",new gu(a,(function(e){return Ma(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xu(e,t,n){return Iu.apply(this,arguments)}function Iu(){return Iu=ee(X().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,or("string"===typeof a,t,"argument-error"),or(r.type===pu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return or("enroll"===u.type,t,"internal-error"),e.next=13,wo(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return or("signin"===u.type,t,"internal-error"),or(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,eu(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ji(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Iu.apply(this,arguments)}function Eu(){return(Eu=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ea(it(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Su=function(){function e(t){ne(this,e),this.providerId=e.PROVIDER_ID,this.auth=ki(t)}return ie(e,[{key:"verifyPhoneNumber",value:function(e,t){return xu(this.auth,e,it(t))}}],[{key:"credential",value:function(e,t){return ra._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ra._fromTokenResponse(n,r):null}}]),e}();function Tu(e,t){return t?lr(t):(or(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Su.PROVIDER_ID="phone",Su.PHONE_SIGN_IN_METHOD="phone";var Cu=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ie(n,[{key:"_getIdTokenResponse",value:function(e){return Qi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Qi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Qi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ii);function Nu(e){return Da(e.auth,new Cu(e),e.bypassAuthState)}function Au(e){var t=e.auth,n=e.user;return or(n,t,"internal-error"),Na(n,new Cu(e),e.bypassAuthState)}function Du(e){return Pu.apply(this,arguments)}function Pu(){return Pu=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,or(r=t.user,n,"internal-error"),e.abrupt("return",Ea(r,new Cu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Pu.apply(this,arguments)}var Ru=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ne(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ie(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ee(X().mark((function t(n,r){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ee(X().mark((function e(t){var n,r,i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Nu;case"linkViaPopup":case"linkViaRedirect":return Du;case"reauthViaPopup":case"reauthViaRedirect":return Au;default:tr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Ou=new pr(2e3,1e4);function Fu(e,t,n){return Lu.apply(this,arguments)}function Lu(){return Lu=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ki(t),ir(t,n,oa),a=Tu(i,r),o=new Uu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Lu.apply(this,arguments)}function Mu(){return(Mu=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ir((i=it(t)).auth,n,oa),a=Tu(i.auth,r),o=new Uu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ju(e,t,n){return Vu.apply(this,arguments)}function Vu(){return(Vu=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ir((i=it(t)).auth,n,oa),a=Tu(i.auth,r),o=new Uu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Uu=function(e){se(n,e);var t=he(n);function n(e,r,i,a,o){var u;return ne(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=oe(u),u}return ie(n,[{key:"executeNotNull",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return or(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ee(X().mark((function e(){var t,n=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sr(1===this.filter.length,"Popup operations only handle one event"),t=Ro(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(nr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(nr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(nr(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Ou.get())}()}}]),n}(Ru);Uu.currentPopupAction=null;var qu=new Map,zu=function(e){se(n,e);var t=he(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ne(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return ie(n,[{key:"execute",value:function(){var e=ee(X().mark((function e(){var t,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=qu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Bu(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Fn(ce(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:qu.set(this.auth._key(),t);case 21:return this.bypassAuthState||qu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ee(X().mark((function e(t){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Fn(ce(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Fn(ce(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ru);function Bu(e,t){return Wu.apply(this,arguments)}function Wu(){return Wu=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$u(n),i=Qu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Ku(e,t){return Gu.apply(this,arguments)}function Gu(){return Gu=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qu(t)._set($u(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Gu.apply(this,arguments)}function Hu(e,t){qu.set(e._key(),t)}function Qu(e){return lr(e._redirectPersistence)}function $u(e){return ni("pendingRedirect",e.config.apiKey,e.name)}function Yu(e,t,n){return function(e,t,n){return Ju.apply(this,arguments)}(e,t,n)}function Ju(){return Ju=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ki(t),ir(t,n,oa),a=Tu(i,r),e.next=5,Ku(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Ju.apply(this,arguments)}function Xu(e,t,n){return function(e,t,n){return Zu.apply(this,arguments)}(e,t,n)}function Zu(){return(Zu=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ir((i=it(t)).auth,n,oa),a=Tu(i.auth,r),e.next=5,Ku(a,i.auth);case 5:return e.next=7,os(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function es(e,t,n){return function(e,t,n){return ts.apply(this,arguments)}(e,t,n)}function ts(){return(ts=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ir((i=it(t)).auth,n,oa),a=Tu(i.auth,r),e.next=5,Ta(!1,i,n.providerId);case 5:return e.next=7,Ku(a,i.auth);case 7:return e.next=9,os(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ns(e,t){return rs.apply(this,arguments)}function rs(){return rs=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ki(t)._initializationPromise;case 2:return e.abrupt("return",is(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),rs.apply(this,arguments)}function is(e,t){return as.apply(this,arguments)}function as(){return as=ee(X().mark((function e(t,n){var r,i,a,o,u,s=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ki(t),a=Tu(i,n),o=new zu(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),as.apply(this,arguments)}function os(e){return us.apply(this,arguments)}function us(){return(us=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ro("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ss=function(){function e(t){ne(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ie(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ls(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ls(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(nr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cs(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(cs(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function cs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ls(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function fs(e){return hs.apply(this,arguments)}function hs(){return hs=ee(X().mark((function e(t){var n,r=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",br(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),hs.apply(this,arguments)}var ds=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ps=/^https?/;function vs(){return vs=ee(X().mark((function e(t){var n,r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fs(t);case 4:n=e.sent,r=n.authorizedDomains,i=ae(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ys(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:tr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),vs.apply(this,arguments)}function ys(e){var t=fr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ps.test(r))return!1;if(ds.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var ms=new pr(3e4,6e4);function gs(){var e=Fo().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ot(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var ks=null;function bs(e){return ks=ks||function(e){return new Promise((function(t,n){var r,i,a;function o(){gs(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){gs(),n(nr(e,"network-request-failed"))},timeout:ms.get()})}if(null===(i=null===(r=Fo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Fo().gapi)||void 0===a?void 0:a.load)){var u=iu("iframefcb");return Fo()[u]=function(){gapi.load?o():n(nr(e,"network-request-failed"))},ru("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw ks=null,e}))}(e),ks}var ws=new pr(5e3,15e3),_s={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Is(e){var t=e.config;or(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?vr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:nn},i=xs.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat($e(r).slice(1))}function Es(e){return Ss.apply(this,arguments)}function Ss(){return Ss=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bs(t);case 2:return n=e.sent,or(r=Fo().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Is(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_s,dontclear:!0},(function(e){return new Promise(function(){var n=ee(X().mark((function n(r,i){var a,o,u;return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Fo().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=nr(t,"network-request-failed"),o=Fo().setTimeout((function(){i(a)}),ws.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Ss.apply(this,arguments)}var Ts={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Cs="_blank",Ns="http://localhost",As=function(){function e(t){ne(this,e),this.window=t,this.associatedEvent=null}return ie(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ds(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Ts),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Ce().toLowerCase();n&&(u=ui(l)?Cs:n),ai(l)&&(t=t||Ns,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(di(l)&&"_self"!==u)return Ps(t||"",u),new As(null);var h=window.open(t||"",u,f);or(h,e,"popup-blocked");try{h.focus()}catch(d){}return new As(h)}function Ps(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Rs="__/auth/handler",Os="emulator/auth/handler";function Fs(e,t,n,r,i,a){or(e.config.authDomain,e,"auth-domain-config-required"),or(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:nn,eventId:i};if(t instanceof oa){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Ke(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof ua){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Rs);return vr(t,Os)}(e),"?").concat($e(p).slice(1))}var Ls="webStorageSupport",Ms=function(){function e(){ne(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ao,this._completeRedirectFn=is,this._overrideRedirectResult=Hu}return ie(e,[{key:"_openPopup",value:function(){var e=ee(X().mark((function e(t,n,r,i){var a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Fs(t,n,r,fr(),i),e.abrupt("return",Ds(t,o,Ro()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ee(X().mark((function e(t,n,r,i){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Fs(t,n,r,fr(),i),Fo().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(sr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Es(t);case 2:return n=e.sent,r=new ss(t),n.register("authEvent",(function(e){return or(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Ls,{type:Ls},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),tr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return vs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return vi()||oi()||hi()}}]),e}(),js=Ms,Vs=function(){function e(t){ne(this,e),this.factorId=t}return ie(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ur("unexpected MultiFactorSessionType")}}}]),e}(),Us=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this,"phone")).credential=e,r}return ie(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return br(e,"POST","/v2/accounts/mfaEnrollment:finalize",kr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return br(e,"POST","/v2/accounts/mfaSignIn:finalize",kr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Vs),qs=function(){function e(){ne(this,e)}return ie(e,null,[{key:"assertion",value:function(e){return Us._fromCredential(e)}}]),e}();qs.FACTOR_ID="phone";var zs,Bs="@firebase/auth",Ws="0.20.5",Ks=function(){function e(t){ne(this,e),this.auth=t,this.internalListeners=new Map}return ie(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){or(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Gs(){return window}zs="Browser",$t(new ut("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){or(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),or(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:zs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yi(zs)},i=new gi(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(lr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),$t(new ut("auth-internal",(function(e){return function(e){return new Ks(e)}(ki(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),cn(Bs,Ws,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(zs)),cn(Bs,Ws,"esm2017");function Hs(e,t,n){return Qs.apply(this,arguments)}function Qs(){return Qs=ee(X().mark((function e(t,n,r){var i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gs(),o=a.BuildInfo,sr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,ec(n.sessionId);case 4:return u=e.sent,s={},hi()?s.ibi=o.packageName:ci()?s.apn=o.packageName:tr(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Fs(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Qs.apply(this,arguments)}function $s(){return $s=ee(X().mark((function e(t){var n,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gs(),r=n.BuildInfo,i={},hi()?i.iosBundleId=r.packageName:ci()?i.androidPackageName=r.packageName:tr(t,"operation-not-supported-in-this-environment"),e.next=5,fs(t,i);case 5:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Ys(e){var t=Gs().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Js(e,t,n){return Xs.apply(this,arguments)}function Xs(){return Xs=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gs(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(nr(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ci()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Xs.apply(this,arguments)}function Zs(e){var t,n,r,i,a,o,u,s,c,l,f=Gs();or("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),or("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),or("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),or("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),or("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function ec(e){return tc.apply(this,arguments)}function tc(){return(tc=ee(X().mark((function e(t){var n,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nc(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nc(e){if(sr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var rc=function(e){se(n,e);var t=he(n);function n(){var e;return ne(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return ie(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Fn(ce(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ss);function ic(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:cc(),postBody:null,tenantId:e.tenantId,error:nr(e,"no-auth-event")}}function ac(e,t){return lc()._set(fc(e),t)}function oc(e){return uc.apply(this,arguments)}function uc(){return uc=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lc()._get(fc(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,lc()._remove(fc(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),uc.apply(this,arguments)}function sc(e,t){var n,r,i=function(e){var t=hc(e),n=t.link?decodeURIComponent(t.link):void 0,r=hc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return hc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=hc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?nr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function cc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function lc(){return lr(Co)}function fc(e){return ni("authEvent",e.config.apiKey,e.name)}function hc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||at(t)||u(t)||s();r[0];return Ye(r.slice(1).join("?"))}var dc=function(){function e(){ne(this,e),this._redirectPersistence=Ao,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=is,this._overrideRedirectResult=Hu}return ie(e,[{key:"_initialize",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new rc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){tr(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ee(X().mark((function e(t,n,r,i){var a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zs(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),qu.clear(),e.next=10,this._originValidation(t);case 10:return o=ic(t,r,i),e.next=13,ac(t,o);case 13:return e.next=15,Hs(t,o,n);case 15:return u=e.sent,e.next=18,Ys(u);case 18:return s=e.sent,e.abrupt("return",Js(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return $s.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Gs(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ee(X().mark((function n(){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,oc(e);case 2:t.onEvent(vc());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=ee(X().mark((function n(r){var i,a;return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,oc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=sc(i,r.url)),t.onEvent(a||vc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Gs().handleOpenURL=function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),pc=dc;function vc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:nr("no-auth-event")}}function yc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function mc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return!("file:"!==yc()&&"ionic:"!==yc()&&"capacitor:"!==yc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function gc(){return Re()&&11===(null===document||void 0===document?void 0:document.documentMode)}function kc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/Edge\/\d+/.test(e)}function bc(){try{var e=self.localStorage,t=Ro();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return gc()||kc(e)}()||Fe()}catch(n){return wc()&&Fe()}return!1}function wc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function _c(){return("http:"===yc()||"https:"===yc()||De()||mc())&&!(Pe()||Ae())&&bc()&&!wc()}function xc(){return mc()&&"undefined"!==typeof document}function Ic(){return Ec.apply(this,arguments)}function Ec(){return(Ec=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Sc={LOCAL:"local",NONE:"none",SESSION:"session"},Tc=or,Cc="persistence";function Nc(e,t){Tc(Object.values(Sc).includes(t),e,"invalid-persistence-type"),Pe()?Tc(t!==Sc.SESSION,e,"unsupported-persistence-type"):Ae()?Tc(t===Sc.NONE,e,"unsupported-persistence-type"):wc()?Tc(t===Sc.NONE||t===Sc.LOCAL&&Fe(),e,"unsupported-persistence-type"):Tc(t===Sc.NONE||bc(),e,"unsupported-persistence-type")}function Ac(e){return Dc.apply(this,arguments)}function Dc(){return Dc=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Pc(),r=ni(Cc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Dc.apply(this,arguments)}function Pc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Rc=or,Oc=function(){function e(){ne(this,e),this.browserResolver=lr(js),this.cordovaResolver=lr(pc),this.underlyingResolver=null,this._redirectPersistence=Ao,this._completeRedirectFn=is,this._overrideRedirectResult=Hu}return ie(e,[{key:"_initialize",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ee(X().mark((function e(t,n,r,i){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ee(X().mark((function e(t,n,r,i){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return xc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Rc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ic();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Fc(e){return e.unwrap()}function Lc(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new qc(e,function(e,t){var n,r=it(e),i=t;return or(t.customData.operationType,r,"argument-error"),or(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),bo._fromError(r,i)}(e,t));else if(i){var a=Mc(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function Mc(e){var t=(e instanceof Le?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Le)&&"temporaryProof"in t&&"phoneNumber"in t)return Su.credentialFromResult(e);var n,r=t.providerId;if(!r||r===qn)return null;switch(r){case Un:n=la;break;case jn:n=ca;break;case Vn:n=fa;break;case zn:n=pa;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?ha._create(r,u):Yi._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new sa(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Le?n.credentialFromError(e):n.credentialFromResult(e)}function jc(e,t){return t.catch((function(t){throw t instanceof Le&&Lc(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Mc(t)),additionalUserInfo:go(e),user:zc.getOrCreate(r)}}))}function Vc(e,t){return Uc.apply(this,arguments)}function Uc(){return Uc=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return jc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Uc.apply(this,arguments)}var qc=function(){function e(t,n){ne(this,e),this.resolver=n,this.auth=function(e){return e.wrapped()}(t)}return ie(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return jc(Fc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),zc=function(){function e(t){ne(this,e),this._delegate=t,this.multiFactor=function(e){var t=it(e);return Io.has(t)||Io.set(t,xo._fromUser(t)),Io.get(t)}(t)}return ie(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jc(this.auth,Fa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vc(this.auth,bu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jc(this.auth,ju(this._delegate,t,Oc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ac(ki(this.auth));case 2:return e.abrupt("return",es(this._delegate,t,Oc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jc(this.auth,Ma(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Vc(this.auth,function(e,t,n){return _u.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return jc(this.auth,function(e,t,n){return Mu.apply(this,arguments)}(this._delegate,e,Oc))}},{key:"reauthenticateWithRedirect",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ac(ki(this.auth));case 2:return e.abrupt("return",Xu(this._delegate,t,Oc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return io.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xa(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return co(it(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return co(it(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Eu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return so.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ao.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();zc.USER_MAP=new WeakMap;var Bc=or,Wc=function(){function e(t,n){if(ne(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Bc(r,"invalid-api-key",{appName:t.name}),Bc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Oc:void 0;this._delegate=n.initialize({options:{persistence:Gc(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Yn),this.linkUnderlyingAuth()}return ie(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?zc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){wi(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Ha.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Qa(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Ga.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jc(this._delegate,Ja(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return ro.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ia.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bc(_c(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ns(this._delegate,Oc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",jc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ki(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Kc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Kc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Za.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ka.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Nc(this._delegate,t),e.t0=t,e.next=e.t0===Sc.SESSION?4:e.t0===Sc.LOCAL?6:e.t0===Sc.NONE?11:13;break;case 4:return n=Ao,e.abrupt("break",14);case 6:return e.next=8,lr(Zo)._isAvailable();case 8:return r=e.sent,n=r?Zo:Co,e.abrupt("break",14);case 11:return n=ti,e.abrupt("break",14);case 13:return e.abrupt("return",tr("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return jc(this._delegate,function(e){return ka.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return jc(this._delegate,Ra(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return jc(this._delegate,function(e,t){return qa.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return jc(this._delegate,function(e,t,n){return Ra(it(e),aa.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return jc(this._delegate,function(e,t,n){return eo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Vc(this._delegate,function(e,t,n){return ku.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bc(_c(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",jc(this._delegate,Fu(this._delegate,t,Oc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bc(_c(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ac(this._delegate);case 3:return e.abrupt("return",Yu(this._delegate,t,Oc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ya.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Kc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&zc.getOrCreate(e))},error:t,complete:n}}function Gc(e,t){var n=function(e,t){var n=Pc();if(!n)return[];var r=ni(Cc,e,t);switch(n.getItem(r)){case Sc.NONE:return[ti];case Sc.LOCAL:return[Zo,Ao];case Sc.SESSION:return[Ao];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Zo)||n.push(Zo),"undefined"!==typeof window)for(var r=0,i=[Co,Ao];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(ti)||n.push(ti),n}Wc.Persistence=Sc;var Hc=function(){function e(){ne(this,e),this.providerId="phone",this._delegate=new Su(Fc(Rn.auth()))}return ie(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Su.credential(e,t)}}]),e}();Hc.PHONE_SIGN_IN_METHOD=Su.PHONE_SIGN_IN_METHOD,Hc.PROVIDER_ID=Su.PROVIDER_ID;var Qc,$c=or,Yc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rn.app();ne(this,e),$c(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new yu(t,n,i.auth()),this.type=this._delegate.type}return ie(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Qc=Rn).INTERNAL.registerComponent(new ut("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Wc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Bn,PASSWORD_RESET:Wn,RECOVER_EMAIL:Kn,REVERT_SECOND_FACTOR_ADDITION:Gn,VERIFY_AND_CHANGE_EMAIL:Hn,VERIFY_EMAIL:Qn}},EmailAuthProvider:aa,FacebookAuthProvider:ca,GithubAuthProvider:fa,GoogleAuthProvider:la,OAuthProvider:sa,SAMLAuthProvider:da,PhoneAuthProvider:Hc,PhoneMultiFactorGenerator:qs,RecaptchaVerifier:Yc,TwitterAuthProvider:pa,Auth:Wc,AuthCredential:Ii,Error:Le}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Qc.registerVersion("@firebase/auth-compat","0.2.18");var Jc,Xc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Zc={},el=el||{},tl=Xc||self;function nl(){}function rl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function il(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var al="closure_uid_"+(1e9*Math.random()>>>0),ol=0;function ul(e,t,n){return e.call.apply(e.bind,arguments)}function sl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function cl(e,t,n){return(cl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ul:sl).apply(null,arguments)}function ll(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function fl(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function hl(){this.s=this.s,this.o=this.o}var dl={};hl.prototype.s=!1,hl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,al)&&e[al]||(e[al]=++ol)}(this);delete dl[e]}},hl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var pl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},vl=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function yl(e){return Array.prototype.concat.apply([],arguments)}function ml(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function gl(e){return/^[\s\xa0]*$/.test(e)}var kl,bl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function wl(e,t){return-1!=e.indexOf(t)}function _l(e,t){return e<t?-1:e>t?1:0}e:{var xl=tl.navigator;if(xl){var Il=xl.userAgent;if(Il){kl=Il;break e}}kl=""}function El(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Sl(e){var t={};for(var n in e)t[n]=e[n];return t}var Tl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Tl.length;a++)n=Tl[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Nl(e){return Nl[" "](e),e}Nl[" "]=nl;var Al,Dl=wl(kl,"Opera"),Pl=wl(kl,"Trident")||wl(kl,"MSIE"),Rl=wl(kl,"Edge"),Ol=Rl||Pl,Fl=wl(kl,"Gecko")&&!(wl(kl.toLowerCase(),"webkit")&&!wl(kl,"Edge"))&&!(wl(kl,"Trident")||wl(kl,"MSIE"))&&!wl(kl,"Edge"),Ll=wl(kl.toLowerCase(),"webkit")&&!wl(kl,"Edge");function Ml(){var e=tl.document;return e?e.documentMode:void 0}e:{var jl="",Vl=function(){var e=kl;return Fl?/rv:([^\);]+)(\)|;)/.exec(e):Rl?/Edge\/([\d\.]+)/.exec(e):Pl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ll?/WebKit\/(\S+)/.exec(e):Dl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Vl&&(jl=Vl?Vl[1]:""),Pl){var Ul=Ml();if(null!=Ul&&Ul>parseFloat(jl)){Al=String(Ul);break e}}Al=jl}var ql,zl={};function Bl(){return function(e){var t=zl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=bl(String(Al)).split("."),n=bl("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=_l(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||_l(0==a[2].length,0==o[2].length)||_l(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(tl.document&&Pl){var Wl=Ml();ql=Wl||(parseInt(Al,10)||void 0)}else ql=void 0;var Kl=ql,Gl=function(){if(!tl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{tl.addEventListener("test",nl,t),tl.removeEventListener("test",nl,t)}catch(n){}return e}();function Hl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ql(e,t){if(Hl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Fl){e:{try{Nl(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:$l[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ql.Z.h.call(this)}}Hl.prototype.h=function(){this.defaultPrevented=!0},fl(Ql,Hl);var $l={2:"touch",3:"pen",4:"mouse"};Ql.prototype.h=function(){Ql.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Yl="closure_listenable_"+(1e6*Math.random()|0),Jl=0;function Xl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Jl,this.ca=this.fa=!1}function Zl(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ef(e){this.src=e,this.g={},this.h=0}function tf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=pl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Zl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function nf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}ef.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=nf(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Xl(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var rf="closure_lm_"+(1e6*Math.random()|0),af={};function of(e,t,n,r,i){if(r&&r.once)return sf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)of(e,t[a],n,r,i);return null}return n=vf(n),e&&e[Yl]?e.N(t,n,il(r)?!!r.capture:!!r,i):uf(e,t,n,!1,r,i)}function uf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=il(i)?!!i.capture:!!i,u=df(e);if(u||(e[rf]=u=new ef(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=hf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Gl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ff(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function sf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)sf(e,t[a],n,r,i);return null}return n=vf(n),e&&e[Yl]?e.O(t,n,il(r)?!!r.capture:!!r,i):uf(e,t,n,!0,r,i)}function cf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)cf(e,t[a],n,r,i);else r=il(r)?!!r.capture:!!r,n=vf(n),e&&e[Yl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=nf(a=e.g[t],n,r,i))&&(Zl(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=df(e))&&(t=e.g[t.toString()],e=-1,t&&(e=nf(t,n,r,i)),(n=-1<e?t[e]:null)&&lf(n))}function lf(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Yl])tf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ff(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=df(t))?(tf(n,e),0==n.h&&(n.src=null,t[rf]=null)):Zl(e)}}}function ff(e){return e in af?af[e]:af[e]="on"+e}function hf(e,t){if(e.ca)e=!0;else{t=new Ql(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&lf(e),e=n.call(r,t)}return e}function df(e){return(e=e[rf])instanceof ef?e:null}var pf="__closure_events_fn_"+(1e9*Math.random()>>>0);function vf(e){return"function"===typeof e?e:(e[pf]||(e[pf]=function(t){return e.handleEvent(t)}),e[pf])}function yf(){hl.call(this),this.i=new ef(this),this.P=this,this.I=null}function mf(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Hl(t,e);else if(t instanceof Hl)t.target=t.target||e;else{var i=t;Cl(t=new Hl(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=gf(o,r,!0,t)&&i}if(i=gf(o=t.g=e,r,!0,t)&&i,i=gf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=gf(o=t.g=n[a],r,!1,t)&&i}function gf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&tf(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}fl(yf,hl),yf.prototype[Yl]=!0,yf.prototype.removeEventListener=function(e,t,n,r){cf(this,e,t,n,r)},yf.prototype.M=function(){if(yf.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zl(n[r]);delete t.g[e],t.h--}}this.I=null},yf.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},yf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var kf=tl.JSON.stringify;function bf(){var e=Cf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var wf,_f=function(){function e(){ne(this,e),this.h=this.g=null}return ie(e,[{key:"add",value:function(e,t){var n=xf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),xf=new(function(){function e(t,n){ne(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ie(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new If}),(function(e){return e.reset()})),If=function(){function e(){ne(this,e),this.next=this.g=this.h=null}return ie(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ef(e){tl.setTimeout((function(){throw e}),0)}function Sf(e,t){wf||function(){var e=tl.Promise.resolve(void 0);wf=function(){e.then(Nf)}}(),Tf||(wf(),Tf=!0),Cf.add(e,t)}var Tf=!1,Cf=new _f;function Nf(){for(var e;e=bf();){try{e.h.call(e.g)}catch(n){Ef(n)}var t=xf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Tf=!1}function Af(e,t){yf.call(this),this.h=e||1,this.g=t||tl,this.j=cl(this.kb,this),this.l=Date.now()}function Df(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Pf(e,t,n){if("function"===typeof e)n&&(e=cl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=cl(e.handleEvent,e)}return 2147483647<Number(t)?-1:tl.setTimeout(e,t||0)}function Rf(e){e.g=Pf((function(){e.g=null,e.i&&(e.i=!1,Rf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}fl(Af,yf),(Jc=Af.prototype).da=!1,Jc.S=null,Jc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),mf(this,"tick"),this.da&&(Df(this),this.start()))}},Jc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Jc.M=function(){Af.Z.M.call(this),Df(this),delete this.g};var Of=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ie(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Rf(this)}},{key:"M",value:function(){Fn(ce(n.prototype),"M",this).call(this),this.g&&(tl.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(hl);function Ff(e){hl.call(this),this.h=e,this.g={}}fl(Ff,hl);var Lf=[];function Mf(e,t,n,r){Array.isArray(n)||(n&&(Lf[0]=n.toString()),n=Lf);for(var i=0;i<n.length;i++){var a=of(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function jf(e){El(e.g,(function(e,t){this.g.hasOwnProperty(t)&&lf(e)}),e),e.g={}}function Vf(){this.g=!0}function Uf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return kf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Ff.prototype.M=function(){Ff.Z.M.call(this),jf(this)},Ff.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vf.prototype.Aa=function(){this.g=!1},Vf.prototype.info=function(){};var qf={},zf=null;function Bf(){return zf=zf||new yf}function Wf(e){Hl.call(this,qf.Ma,e)}function Kf(e){var t=Bf();mf(t,new Wf(t,e))}function Gf(e,t){Hl.call(this,qf.STAT_EVENT,e),this.stat=t}function Hf(e){var t=Bf();mf(t,new Gf(t,e))}function Qf(e,t){Hl.call(this,qf.Na,e),this.size=t}function $f(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return tl.setTimeout((function(){e()}),t)}qf.Ma="serverreachability",fl(Wf,Hl),qf.STAT_EVENT="statevent",fl(Gf,Hl),qf.Na="timingevent",fl(Qf,Hl);var Yf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Jf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Xf(){}function Zf(e){return e.h||(e.h=e.i())}function eh(){}Xf.prototype.h=null;var th,nh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function rh(){Hl.call(this,"d")}function ih(){Hl.call(this,"c")}function ah(){}function oh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ff(this),this.P=sh,e=Ol?125:void 0,this.W=new Af(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new uh}function uh(){this.i=null,this.g="",this.h=!1}fl(rh,Hl),fl(ih,Hl),fl(ah,Xf),ah.prototype.g=function(){return new XMLHttpRequest},ah.prototype.i=function(){return{}},th=new ah;var sh=45e3,ch={},lh={};function fh(e,t,n){e.K=1,e.v=Oh(Ch(t)),e.s=n,e.U=!0,hh(e,null)}function hh(e,t){e.F=Date.now(),yh(e),e.A=Ch(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Hh(n.h,"t",r),e.C=0,n=e.l.H,e.h=new uh,e.g=$d(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Of(cl(e.Ia,e,e.g),e.O)),Mf(e.V,e.g,"readystatechange",e.gb),t=e.H?Sl(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Kf(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function dh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function ph(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=vh(e,n))==lh){4==t&&(e.o=4,Hf(14),i=!1),Uf(e.j,e.m,null,"[Incomplete Response]");break}if(r==ch){e.o=4,Hf(15),Uf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Uf(e.j,e.m,r,null),wh(e,r)}dh(e)&&r!=lh&&r!=ch&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Hf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),qd(t),t.L=!0,Hf(11))):(Uf(e.j,e.m,n,"[Invalid Chunked Response]"),bh(e),kh(e))}function vh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?lh:(n=Number(t.substring(n,r)),isNaN(n)?ch:(r+=1)+n>t.length?lh:(t=t.substr(r,n),e.C=r+n,t))}function yh(e){e.Y=Date.now()+e.P,mh(e,e.P)}function mh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=$f(cl(e.eb,e),t)}function gh(e){e.B&&(tl.clearTimeout(e.B),e.B=null)}function kh(e){0==e.l.G||e.I||Wd(e.l,e)}function bh(e){gh(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Df(e.W),jf(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function wh(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||td(n.i,e)))if(n.I=e.N,!e.J&&td(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Bd(n),Pd(n)}Ud(n),Hf(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=$f(cl(n.ab,n),6e3));if(1>=ed(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Gd(n,11)}else if((e.J||n.g==e)&&Bd(n),!gl(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(wl(l,"spdy")||wl(l,"quic")||wl(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(nd(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Rh(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Qd(r,r.H?r.la:null,r.W),d.J){rd(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(gh(p),yh(p)),r.g=d}else Vd(r);0<n.l.length&&Fd(n)}else"stop"!=a[0]&&"close"!=a[0]||Gd(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Gd(n,7):Dd(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Kf(4)}catch(a){}}function _h(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(rl(e)||"string"===typeof e)vl(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(rl(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(rl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function xh(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof xh)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ih(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Eh(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Eh(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Eh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Jc=oh.prototype).setTimeout=function(e){this.P=e},Jc.gb=function(e){e=e.target;var t=this.L;t&&3==Sd(e)?t.l():this.Ia(e)},Jc.Ia=function(e){try{if(e==this.g)e:{var t=Sd(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Ol||this.g&&(this.h.h||this.g.ga()||Td(this.g)))){this.I||4!=t||7==n||Kf(8==n||0>=r?3:2),gh(this);var i=this.g.ba();this.N=i;t:if(dh(this)){var a=Td(this.g);e="";var o=a.length,u=4==Sd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){bh(this),kh(this);var s="";break t}this.h.i=new tl.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gl(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Hf(12),bh(this),kh(this);break e}Uf(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wh(this,i)}this.U?(ph(this,t,s),Ol&&this.i&&3==t&&(Mf(this.V,this.W,"tick",this.fb),this.W.start())):(Uf(this.j,this.m,s,null),wh(this,s)),4==t&&bh(this),this.i&&!this.I&&(4==t?Wd(this.l,this):(this.i=!1,yh(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Hf(12)):(this.o=0,Hf(13)),bh(this),kh(this)}}}catch(t){}},Jc.fb=function(){if(this.g){var e=Sd(this.g),t=this.g.ga();this.C<t.length&&(gh(this),ph(this,e,t),this.i&&4!=e&&yh(this))}},Jc.cancel=function(){this.I=!0,bh(this)},Jc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Kf(3),Hf(17)),bh(this),this.o=2,kh(this)):mh(this,this.Y-e)},(Jc=xh.prototype).R=function(){Ih(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Jc.T=function(){return Ih(this),this.g.concat()},Jc.get=function(e,t){return Eh(this.h,e)?this.h[e]:t},Jc.set=function(e,t){Eh(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Jc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Sh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Th(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Th){this.g=void 0!==t?t:e.g,Nh(this,e.j),this.s=e.s,Ah(this,e.i),Dh(this,e.m),this.l=e.l,t=e.h;var n=new Bh;n.i=t.i,t.g&&(n.g=new xh(t.g),n.h=t.h),Ph(this,n),this.o=e.o}else e&&(n=String(e).match(Sh))?(this.g=!!t,Nh(this,n[1]||"",!0),this.s=Fh(n[2]||""),Ah(this,n[3]||"",!0),Dh(this,n[4]),this.l=Fh(n[5]||"",!0),Ph(this,n[6]||"",!0),this.o=Fh(n[7]||"")):(this.g=!!t,this.h=new Bh(null,this.g))}function Ch(e){return new Th(e)}function Nh(e,t,n){e.j=n?Fh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ah(e,t,n){e.i=n?Fh(t,!0):t}function Dh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ph(e,t,n){t instanceof Bh?(e.h=t,function(e,t){t&&!e.j&&(Wh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Kh(this,t),Hh(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Lh(t,qh)),e.h=new Bh(t,e.g))}function Rh(e,t,n){e.h.set(t,n)}function Oh(e){return Rh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Fh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Lh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Mh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Mh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Th.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Lh(t,jh,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Lh(t,jh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Lh(n,"/"==n.charAt(0)?Uh:Vh,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Lh(n,zh)),e.join("")};var jh=/[#\/\?@]/g,Vh=/[#\?:]/g,Uh=/[#\?]/g,qh=/[#\?@]/g,zh=/#/g;function Bh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Wh(e){e.g||(e.g=new xh,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Kh(e,t){Wh(e),t=Qh(e,t),Eh(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Eh((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ih(e)))}function Gh(e,t){return Wh(e),t=Qh(e,t),Eh(e.g.h,t)}function Hh(e,t,n){Kh(e,t),0<n.length&&(e.i=null,e.g.set(Qh(e,t),ml(n)),e.h+=n.length)}function Qh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Jc=Bh.prototype).add=function(e,t){Wh(this),this.i=null,e=Qh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Jc.forEach=function(e,t){Wh(this),this.g.forEach((function(n,r){vl(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Jc.T=function(){Wh(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Jc.R=function(e){Wh(this);var t=[];if("string"===typeof e)Gh(this,e)&&(t=yl(t,this.g.get(Qh(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=yl(t,e[n])}return t},Jc.set=function(e,t){return Wh(this),this.i=null,Gh(this,e=Qh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Jc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Jc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var $h=ie((function e(t,n){ne(this,e),this.h=t,this.g=n}));function Yh(e){this.l=e||Xh,tl.PerformanceNavigationTiming?e=0<(e=tl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(tl.g&&tl.g.Ea&&tl.g.Ea()&&tl.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Jh,Xh=10;function Zh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ed(e){return e.h?1:e.g?e.g.size:0}function td(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function nd(e,t){e.g?e.g.add(t):e.h=t}function rd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function id(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ae(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return ml(e.i)}function ad(){}function od(){this.g=new ad}function ud(e,t,n){var r=n||"";try{_h(e,(function(e,n){var i=e;il(e)&&(i=kf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function sd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function cd(e){this.l=e.$b||null,this.j=e.ib||!1}function ld(e,t){yf.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=fd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yh.prototype.cancel=function(){if(this.i=id(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ae(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},ad.prototype.stringify=function(e){return tl.JSON.stringify(e,void 0)},ad.prototype.parse=function(e){return tl.JSON.parse(e,void 0)},fl(cd,Xf),cd.prototype.g=function(){return new ld(this.l,this.j)},cd.prototype.i=(Jh={},function(){return Jh}),fl(ld,yf);var fd=0;function hd(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function dd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,pd(e)}function pd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Jc=ld.prototype).open=function(e,t){if(this.readyState!=fd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,pd(this)},Jc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||tl).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Jc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dd(this)),this.readyState=fd},Jc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,pd(this)),this.g&&(this.readyState=3,pd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof tl.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hd(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Jc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?dd(this):pd(this),3==this.readyState&&hd(this)}},Jc.Ua=function(e){this.g&&(this.response=this.responseText=e,dd(this))},Jc.Ta=function(e){this.g&&(this.response=e,dd(this))},Jc.ha=function(){this.g&&dd(this)},Jc.setRequestHeader=function(e,t){this.v.append(e,t)},Jc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Jc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ld.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var vd=tl.JSON.parse;function yd(e){yf.call(this),this.headers=new xh,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=md,this.K=this.L=!1}fl(yd,yf);var md="",gd=/^https?$/i,kd=["POST","PUT"];function bd(e){return"content-type"==e.toLowerCase()}function wd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_d(e),Id(e)}function _d(e){e.D||(e.D=!0,mf(e,"complete"),mf(e,"error"))}function xd(e){if(e.h&&"undefined"!=typeof el&&(!e.C[1]||4!=Sd(e)||2!=e.ba()))if(e.v&&4==Sd(e))Pf(e.Fa,0,e);else if(mf(e,"readystatechange"),4==Sd(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Sh)[1]||null;if(!a&&tl.self&&tl.self.location){var o=tl.self.location.protocol;a=o.substr(0,o.length-1)}i=!gd.test(a?a.toLowerCase():"")}t=i}if(t)mf(e,"complete"),mf(e,"success");else{e.m=6;try{var u=2<Sd(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",_d(e)}}finally{Id(e)}}}function Id(e,t){if(e.g){Ed(e);var n=e.g,r=e.C[0]?nl:null;e.g=null,e.C=null,t||mf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ed(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(tl.clearTimeout(e.A),e.A=null)}function Sd(e){return e.g?e.g.readyState:0}function Td(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case md:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Cd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return El(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Rh(e,t,n))}function Nd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ad(e){this.za=0,this.l=[],this.h=new Vf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Nd("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Nd("baseRetryDelayMs",5e3,e),this.$a=Nd("retryDelaySeedMs",1e4,e),this.Ya=Nd("forwardChannelMaxRetries",2,e),this.ra=Nd("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Yh(e&&e.concurrentRequestLimit),this.Ca=new od,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Dd(e){if(Rd(e),3==e.G){var t=e.V++,n=Ch(e.F);Rh(n,"SID",e.J),Rh(n,"RID",t),Rh(n,"TYPE","terminate"),Md(e,n),(t=new oh(e,e.h,t,void 0)).K=2,t.v=Oh(Ch(n)),n=!1,tl.navigator&&tl.navigator.sendBeacon&&(n=tl.navigator.sendBeacon(t.v.toString(),"")),!n&&tl.Image&&((new Image).src=t.v,n=!0),n||(t.g=$d(t.l,null),t.g.ea(t.v)),t.F=Date.now(),yh(t)}Hd(e)}function Pd(e){e.g&&(qd(e),e.g.cancel(),e.g=null)}function Rd(e){Pd(e),e.u&&(tl.clearTimeout(e.u),e.u=null),Bd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&tl.clearTimeout(e.m),e.m=null)}function Od(e,t){e.l.push(new $h(e.Za++,t)),3==e.G&&Fd(e)}function Fd(e){Zh(e.i)||e.m||(e.m=!0,Sf(e.Ha,e),e.C=0)}function Ld(e,t){var n;n=t?t.m:e.V++;var r=Ch(e.F);Rh(r,"SID",e.J),Rh(r,"RID",n),Rh(r,"AID",e.U),Md(e,r),e.o&&e.s&&Cd(r,e.o,e.s),n=new oh(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=jd(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),nd(e.i,n),fh(n,r,t)}function Md(e,t){e.j&&_h({},(function(e,n){Rh(t,n,e)}))}function jd(e,t,n){n=Math.min(e.l.length,n);var r=e.j?cl(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{ud(l,o,"req"+c+"_")}catch(xp){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Vd(e){e.g||e.u||(e.Y=1,Sf(e.Ga,e),e.A=0)}function Ud(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=$f(cl(e.Ga,e),Kd(e,e.A)),e.A++,!0)}function qd(e){null!=e.B&&(tl.clearTimeout(e.B),e.B=null)}function zd(e){e.g=new oh(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ch(e.oa);Rh(t,"RID","rpc"),Rh(t,"SID",e.J),Rh(t,"CI",e.N?"0":"1"),Rh(t,"AID",e.U),Md(e,t),Rh(t,"TYPE","xmlhttp"),e.o&&e.s&&Cd(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Oh(Ch(t)),n.s=null,n.U=!0,hh(n,e)}function Bd(e){null!=e.v&&(tl.clearTimeout(e.v),e.v=null)}function Wd(e,t){var n=null;if(e.g==t){Bd(e),qd(e),e.g=null;var r=2}else{if(!td(e.i,t))return;n=t.D,rd(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;mf(r=Bf(),new Qf(r,n,t,i)),Fd(e)}else Vd(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ed(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=$f(cl(e.Ha,e,t),Kd(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ud(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Gd(e,5);break;case 4:Gd(e,10);break;case 3:Gd(e,6);break;default:Gd(e,2)}}function Kd(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Gd(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=cl(e.jb,e);n||(n=new Th("//www.google.com/images/cleardot.gif"),tl.location&&"http"==tl.location.protocol||Nh(n,"https"),Oh(n)),function(e,t){var n=new Vf;if(tl.Image){var r=new Image;r.onload=ll(sd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ll(sd,n,r,"TestLoadImage: error",!1,t),r.onabort=ll(sd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ll(sd,n,r,"TestLoadImage: timeout",!1,t),tl.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Hf(2);e.G=0,e.j&&e.j.va(t),Hd(e),Rd(e)}function Hd(e){e.G=0,e.I=-1,e.j&&(0==id(e.i).length&&0==e.l.length||(e.i.i.length=0,ml(e.l),e.l.length=0),e.j.ua())}function Qd(e,t,n){var r=function(e){return e instanceof Th?Ch(e):new Th(e,void 0)}(n);if(""!=r.i)t&&Ah(r,t+"."+r.i),Dh(r,r.m);else{var i=tl.location;r=function(e,t,n,r){var i=new Th(null,void 0);return e&&Nh(i,e),t&&Ah(i,t),n&&Dh(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&El(e.aa,(function(e,t){Rh(r,t,e)})),t=e.D,n=e.sa,t&&n&&Rh(r,t,n),Rh(r,"VER",e.ma),Md(e,r),r}function $d(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new yd(new cd({ib:!0})):new yd(e.qa)).L=e.H,t}function Yd(){}function Jd(){if(Pl&&!(10<=Number(Kl)))throw Error("Environmental error: no available transport.")}function Xd(e,t){yf.call(this),this.g=new Ad(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!gl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!gl(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new tp(this)}function Zd(e){rh.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ep(){ih.call(this),this.status=1}function tp(e){this.g=e}(Jc=yd.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():th.g(),this.C=this.u?Zf(this.u):Zf(th),this.g.onreadystatechange=cl(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void wd(this,a)}e=n||"";var i=new xh(this.headers);r&&_h(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=bd,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=tl.FormData&&e instanceof tl.FormData,!(0<=pl(kd,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ed(this),0<this.B&&((this.K=function(e){return Pl&&Bl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=cl(this.pa,this)):this.A=Pf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){wd(this,a)}},Jc.pa=function(){"undefined"!=typeof el&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mf(this,"timeout"),this.abort(8))},Jc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,mf(this,"complete"),mf(this,"abort"),Id(this))},Jc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Id(this,!0)),yd.Z.M.call(this)},Jc.Fa=function(){this.s||(this.F||this.v||this.l?xd(this):this.cb())},Jc.cb=function(){xd(this)},Jc.ba=function(){try{return 2<Sd(this)?this.g.status:-1}catch(Jh){return-1}},Jc.ga=function(){try{return this.g?this.g.responseText:""}catch(Jh){return""}},Jc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),vd(t)}},Jc.Da=function(){return this.m},Jc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Jc=Ad.prototype).ma=8,Jc.G=1,Jc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Jc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new oh(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Cl(n=Sl(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=jd(this,t,r),Rh(i=Ch(this.F),"RID",e),Rh(i,"CVER",22),this.D&&Rh(i,"X-HTTP-Session-Id",this.D),Md(this,i),this.o&&n&&Cd(i,this.o,n),nd(this.i,t),this.Ra&&Rh(i,"TYPE","init"),this.ja?(Rh(i,"$req",r),Rh(i,"SID","null"),t.$=!0,fh(t,i,null)):fh(t,i,r),this.G=2}}else 3==this.G&&(e?Ld(this,e):0==this.l.length||Zh(this.i)||Ld(this))},Jc.Ga=function(){if(this.u=null,zd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=$f(cl(this.bb,this),e)}},Jc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Hf(10),Pd(this),zd(this))},Jc.ab=function(){null!=this.v&&(this.v=null,Pd(this),Ud(this),Hf(19))},Jc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Hf(2)):(this.h.info("Failed to ping google.com"),Hf(1))},(Jc=Yd.prototype).xa=function(){},Jc.wa=function(){},Jc.va=function(){},Jc.ua=function(){},Jc.Oa=function(){},Jd.prototype.g=function(e,t){return new Xd(e,t)},fl(Xd,yf),Xd.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Sf(cl(e.hb,e,t))),Hf(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Qd(e,null,e.W),Fd(e)},Xd.prototype.close=function(){Dd(this.g)},Xd.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Od(this.g,t)}else this.v?((t={}).__data__=kf(e),Od(this.g,t)):Od(this.g,e)},Xd.prototype.M=function(){this.g.j=null,delete this.j,Dd(this.g),delete this.g,Xd.Z.M.call(this)},fl(Zd,rh),fl(ep,ih),fl(tp,Yd),tp.prototype.xa=function(){mf(this.g,"a")},tp.prototype.wa=function(e){mf(this.g,new Zd(e))},tp.prototype.va=function(e){mf(this.g,new ep(e))},tp.prototype.ua=function(){mf(this.g,"b")},Jd.prototype.createWebChannel=Jd.prototype.g,Xd.prototype.send=Xd.prototype.u,Xd.prototype.open=Xd.prototype.m,Xd.prototype.close=Xd.prototype.close,Yf.NO_ERROR=0,Yf.TIMEOUT=8,Yf.HTTP_ERROR=6,Jf.COMPLETE="complete",eh.EventType=nh,nh.OPEN="a",nh.CLOSE="b",nh.ERROR="c",nh.MESSAGE="d",yf.prototype.listen=yf.prototype.N,yd.prototype.listenOnce=yd.prototype.O,yd.prototype.getLastError=yd.prototype.La,yd.prototype.getLastErrorCode=yd.prototype.Da,yd.prototype.getStatus=yd.prototype.ba,yd.prototype.getResponseJson=yd.prototype.Qa,yd.prototype.getResponseText=yd.prototype.ga,yd.prototype.send=yd.prototype.ea;var np=Zc.createWebChannelTransport=function(){return new Jd},rp=Zc.getStatEventTarget=function(){return Bf()},ip=Zc.ErrorCode=Yf,ap=Zc.EventType=Jf,op=Zc.Event=qf,up=Zc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},sp=Zc.FetchXmlHttpFactory=cd,cp=Zc.WebChannel=eh,lp=Zc.XhrIo=yd,fp="@firebase/firestore",hp=function(){function e(t){ne(this,e),this.uid=t}return ie(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();hp.UNAUTHENTICATED=new hp(null),hp.GOOGLE_CREDENTIALS=new hp("google-credentials-uid"),hp.FIRST_PARTY=new hp("first-party-uid"),hp.MOCK_USER=new hp("mock-user");var dp="9.9.1",pp=new gt("@firebase/firestore");function vp(){return pp.logLevel}function yp(e){if(pp.logLevel<=ft.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(kp);pp.debug.apply(pp,["Firestore (".concat(dp,"): ").concat(e)].concat(ot(i)))}}function mp(e){if(pp.logLevel<=ft.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(kp);pp.error.apply(pp,["Firestore (".concat(dp,"): ").concat(e)].concat(ot(i)))}}function gp(e){if(pp.logLevel<=ft.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(kp);pp.warn.apply(pp,["Firestore (".concat(dp,"): ").concat(e)].concat(ot(i)))}}function kp(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function bp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(dp,") INTERNAL ASSERTION FAILED: ")+e;throw mp(t),new Error(t)}function wp(e,t){e||bp()}function _p(e,t){return e}var xp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ip=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ie(n)}(Le),Ep=ie((function e(){var t=this;ne(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Sp=ie((function e(t,n){ne(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Tp=function(){function e(){ne(this,e)}return ie(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(hp.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Cp=function(){function e(t){ne(this,e),this.token=t,this.changeListener=null}return ie(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Np=function(){function e(t){ne(this,e),this.t=t,this.currentUser=hp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ie(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Ep;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Ep,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){yp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(yp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ep)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(yp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(wp("string"==typeof n.accessToken),new Sp(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return wp(null===e||"string"==typeof e),new hp(e)}}]),e}(),Ap=ie((function e(t,n,r){ne(this,e),this.type="FirstParty",this.user=hp.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Dp=function(){function e(t,n,r){ne(this,e),this.h=t,this.l=n,this.m=r}return ie(e,[{key:"getToken",value:function(){return Promise.resolve(new Ap(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(hp.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Pp=ie((function e(t){ne(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Rp=function(){function e(t){ne(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return ie(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&yp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,yp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){yp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):yp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(wp("string"==typeof t.token),e.p=t.token,new Pp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Op(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Fp=function(){function e(){ne(this,e)}return ie(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Op(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Lp(e,t){return e<t?-1:e>t?1:0}function Mp(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function jp(e){return e+"\0"}var Vp=function(){function e(t,n){if(ne(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Ip(xp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ip(xp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ip(xp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ip(xp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ie(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Lp(this.nanoseconds,e.nanoseconds):Lp(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Up=function(){function e(t){ne(this,e),this.timestamp=t}return ie(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Vp(0,0))}},{key:"max",value:function(){return new e(new Vp(253402300799,999999999))}}]),e}(),qp=function(){function e(t,n,r){ne(this,e),void 0===n?n=0:n>t.length&&bp(),void 0===r?r=t.length-n:r>t.length-n&&bp(),this.segments=t,this.offset=n,this.len=r}return ie(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),zp=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Ip(xp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ot(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(qp),Bp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wp=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Bp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Ip(xp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Ip(xp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Ip(xp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Ip(xp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(qp),Kp=function(){function e(t){ne(this,e),this.path=t}return ie(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===zp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(zp.fromString(t))}},{key:"fromName",value:function(t){return new e(zp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(zp.emptyPath())}},{key:"comparator",value:function(e,t){return zp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new zp(t.slice()))}}]),e}(),Gp=ie((function e(t,n,r,i){ne(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Hp(e){return e.fields.find((function(e){return 2===e.kind}))}function Qp(e){return e.fields.filter((function(e){return 2!==e.kind}))}Gp.UNKNOWN_ID=-1;var $p=ie((function e(t,n){ne(this,e),this.fieldPath=t,this.kind=n})),Yp=function(){function e(t,n){ne(this,e),this.sequenceNumber=t,this.offset=n}return ie(e,null,[{key:"empty",value:function(){return new e(0,Zp.min())}}]),e}();function Jp(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Up.fromTimestamp(1e9===r?new Vp(n+1,0):new Vp(n,r));return new Zp(i,Kp.empty(),t)}function Xp(e){return new Zp(e.readTime,e.key,-1)}var Zp=function(){function e(t,n,r){ne(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ie(e,null,[{key:"min",value:function(){return new e(Up.min(),Kp.empty(),-1)}},{key:"max",value:function(){return new e(Up.max(),Kp.empty(),-1)}}]),e}();function ev(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Kp.comparator(e.documentKey,t.documentKey))?n:Lp(e.largestBatchId,t.largestBatchId)}var tv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nv=function(){function e(){ne(this,e),this.onCommittedListeners=[]}return ie(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function rv(e){return iv.apply(this,arguments)}function iv(){return iv=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===xp.FAILED_PRECONDITION&&t.message===tv){e.next=2;break}throw t;case 2:yp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),iv.apply(this,arguments)}var av=function(){function e(t){var n=this;ne(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ie(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&bp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ae(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),ov=function(){function e(t,n){var r=this;ne(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new Ep,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new cv(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=pv(e.target.error);r.T.reject(new cv(t,n))}}return ie(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(yp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new fv(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new cv(n,t)}}}]),e}(),uv=function(){function e(t,n,r){ne(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(Ce())&&mp("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ie(e,[{key:"k",value:function(){var e=ee(X().mark((function e(t){var n=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return yp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new cv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ip(xp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Ip(xp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new cv(t,n))},i.onupgradeneeded=function(e){yp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.O(t,i.transaction,e.oldVersion,n.version).next((function(){yp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.M&&(this.db.onversionchange=function(e){return n.M(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.M=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ee(X().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(X().mark((function e(){var n,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=ov.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),av.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,yp("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return yp("SimpleDb","Removing database:",e),hv(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!Fe())return!1;if(e.S())return!0;var t=Ce(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),sv=function(){function e(t){ne(this,e),this.$=t,this.B=!1,this.L=null}return ie(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return hv(this.$.delete())}}]),e}(),cv=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,xp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ie(n)}(Ip);function lv(e){return"IndexedDbTransactionError"===e.name}var fv=function(){function e(t){ne(this,e),this.store=t}return ie(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(yp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(yp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),hv(n)}},{key:"add",value:function(e){return yp("SimpleDb","ADD",this.store.name,e,e),hv(this.store.add(e))}},{key:"get",value:function(e){var t=this;return hv(this.store.get(e)).next((function(n){return void 0===n&&(n=null),yp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return yp("SimpleDb","DELETE",this.store.name,e),hv(this.store.delete(e))}},{key:"count",value:function(){return yp("SimpleDb","COUNT",this.store.name),hv(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new av((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new av((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){yp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new av((function(n,r){t.onerror=function(e){var t=pv(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new av((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new sv(i),o=t(i.primaryKey,i.value,a);if(o instanceof av){var u=o.catch((function(e){return a.done(),av.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return av.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function hv(e){return new av((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=pv(e.target.error);n(t)}}))}var dv=!1;function pv(e){var t=uv.v(Ce());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Ip("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return dv||(dv=!0,setTimeout((function(){throw r}),0)),r}}return e}var vv=function(){function e(t,n){ne(this,e),this.asyncQueue=t,this.X=n,this.task=null}return ie(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;yp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=yp,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!lv(e.t4)){e.next=17;break}yp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,rv(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),yv=function(){function e(t,n){ne(this,e),this.localStore=t,this.persistence=n}return ie(e,[{key:"tt",value:function(){var e=ee(X().mark((function e(){var t,n=this,r=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return av.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return yp("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return yp("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Xp(t);ev(r,n)>0&&(n=r)})),new Zp(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),mv=function(){function e(t,n){var r=this;ne(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return ie(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function gv(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function kv(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bv(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}mv.ot=-1;var wv=function(){function e(t,n){ne(this,e),this.comparator=t,this.root=n||xv.EMPTY}return ie(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,xv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new _v(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new _v(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new _v(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new _v(this.root,e,this.comparator,!0)}}]),e}(),_v=function(){function e(t,n,r,i){ne(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ie(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),xv=function(){function e(t,n,r,i,a){ne(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ie(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw bp();if(this.right.isRed())throw bp();var e=this.left.check();if(e!==this.right.check())throw bp();return e+(this.isRed()?0:1)}}]),e}();xv.EMPTY=null,xv.RED=!0,xv.BLACK=!1,xv.EMPTY=new(function(){function e(){ne(this,e),this.size=0}return ie(e,[{key:"key",get:function(){throw bp()}},{key:"value",get:function(){throw bp()}},{key:"color",get:function(){throw bp()}},{key:"left",get:function(){throw bp()}},{key:"right",get:function(){throw bp()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new xv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Iv=function(){function e(t){ne(this,e),this.comparator=t,this.data=new wv(this.comparator)}return ie(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Ev(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Ev(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Ev=function(){function e(t){ne(this,e),this.iter=t}return ie(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Sv(e){return e.hasNext()?e.getNext():void 0}var Tv=function(){function e(t){ne(this,e),this.fields=t,t.sort(Wp.comparator)}return ie(e,[{key:"unionWith",value:function(t){var n,r=new Iv(Wp.comparator),i=ae(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=ae(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=ae(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Mp(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Cv=function(e){function t(e){ne(this,t),this.binaryString=e}return ie(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Lp(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Cv.EMPTY_BYTE_STRING=new Cv("");var Nv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Av(e){if(wp(!!e),"string"==typeof e){var t=0,n=Nv.exec(e);if(wp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Dv(e.seconds),nanos:Dv(e.nanos)}}function Dv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Pv(e){return"string"==typeof e?Cv.fromBase64String(e):Cv.fromUint8Array(e)}function Rv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ov(e){var t=e.mapValue.fields.__previous_value__;return Rv(t)?Ov(t):t}function Fv(e){var t=Av(e.mapValue.fields.__local_write_time__.timestampValue);return new Vp(t.seconds,t.nanos)}var Lv=ie((function e(t,n,r,i,a,o,u,s){ne(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Mv=function(){function e(t,n){ne(this,e),this.projectId=t,this.database=n||"(default)"}return ie(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function jv(e){return null==e}function Vv(e){return 0===e&&1/e==-1/0}function Uv(e){return"number"==typeof e&&Number.isInteger(e)&&!Vv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var qv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zv={nullValue:"NULL_VALUE"};function Bv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Rv(e)?4:ry(e)?9007199254740991:10:bp()}function Wv(e,t){if(e===t)return!0;var n=Bv(e);if(n!==Bv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fv(e).isEqual(Fv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Av(e.timestampValue),r=Av(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Pv(e.bytesValue).isEqual(Pv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Dv(e.geoPointValue.latitude)===Dv(t.geoPointValue.latitude)&&Dv(e.geoPointValue.longitude)===Dv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Dv(e.integerValue)===Dv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Dv(e.doubleValue),r=Dv(t.doubleValue);return n===r?Vv(n)===Vv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Mp(e.arrayValue.values||[],t.arrayValue.values||[],Wv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(gv(n)!==gv(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Wv(n[i],r[i])))return!1;return!0}(e,t);default:return bp()}}function Kv(e,t){return void 0!==(e.values||[]).find((function(e){return Wv(e,t)}))}function Gv(e,t){if(e===t)return 0;var n=Bv(e),r=Bv(t);if(n!==r)return Lp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lp(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Dv(e.integerValue||e.doubleValue),r=Dv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Hv(e.timestampValue,t.timestampValue);case 4:return Hv(Fv(e),Fv(t));case 5:return Lp(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Pv(e),r=Pv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Lp(n[i],r[i]);if(0!==a)return a}return Lp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Lp(Dv(e.latitude),Dv(t.latitude));return 0!==n?n:Lp(Dv(e.longitude),Dv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Gv(n[i],r[i]);if(a)return a}return Lp(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===qv.mapValue&&t===qv.mapValue)return 0;if(e===qv.mapValue)return 1;if(t===qv.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Lp(r[o],a[o]);if(0!==u)return u;var s=Gv(n[r[o]],i[a[o]]);if(0!==s)return s}return Lp(r.length,a.length)}(e.mapValue,t.mapValue);default:throw bp()}}function Hv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Lp(e,t);var n=Av(e),r=Av(t),i=Lp(n.seconds,r.seconds);return 0!==i?i:Lp(n.nanos,r.nanos)}function Qv(e){return $v(e)}function $v(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Av(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Pv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Kp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ae(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=$v(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ae(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat($v(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):bp();var t,n}function Yv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Jv(e){return!!e&&"integerValue"in e}function Xv(e){return!!e&&"arrayValue"in e}function Zv(e){return!!e&&"nullValue"in e}function ey(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ty(e){return!!e&&"mapValue"in e}function ny(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return kv(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ny(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ny(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ry(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function iy(e){return"nullValue"in e?zv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Yv(Mv.empty(),Kp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:bp()}function ay(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Yv(Mv.empty(),Kp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?qv:bp()}function oy(e,t){var n=Gv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function uy(e,t){var n=Gv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var sy=function(){function e(t){ne(this,e),this.value=t}return ie(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ty(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ny(t)}},{key:"setAll",value:function(e){var t=this,n=Wp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ny(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ty(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Wv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ty(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){kv(t,(function(t,n){return e[t]=n}));var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ny(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function cy(e){var t=[];return kv(e.fields,(function(e,n){var r=new Wp([e]);if(ty(n)){var i=cy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ae(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Tv(t)}var ly=function(){function e(t,n,r,i,a,o){ne(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return ie(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=sy.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=sy.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Up.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Up.min(),Up.min(),sy.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Up.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Up.min(),sy.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Up.min(),sy.empty(),2)}}]),e}(),fy=ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ne(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function hy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new fy(e,t,n,r,i,a,o)}function dy(e){var t=_p(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Qv(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),jv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Qv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Qv(e)})).join(",")),t.ut=n}return t.ut}function py(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ay(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Wv(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Py(e.startAt,t.startAt)&&Py(e.endAt,t.endAt)}function vy(e){return Kp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function yy(e,t){return e.filters.filter((function(e){return e instanceof ky&&e.field.isEqual(t)}))}function my(e,t,n){var r,i=zv,a=!0,o=ae(yy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=zv,c=!0;switch(u.op){case"<":case"<=":s=iy(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=zv}oy({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];oy({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function gy(e,t,n){var r,i=qv,a=!0,o=ae(yy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=qv,c=!0;switch(u.op){case">=":case">":s=ay(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=qv}uy({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];uy({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var ky=function(e){se(n,e);var t=he(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Gv(t,this.value)):null!==t&&Bv(this.value)===Bv(t)&&this.at(Gv(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return bp()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new by(e,t,r):"array-contains"===t?new Iy(e,r):"in"===t?new Ey(e,r):"not-in"===t?new Sy(e,r):"array-contains-any"===t?new Ty(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new wy(e,n):new _y(e,n)}}]),n}(function(){return ie((function e(){ne(this,e)}))}()),by=function(e){se(n,e);var t=he(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this,e,r,i)).key=Kp.fromName(i.referenceValue),a}return ie(n,[{key:"matches",value:function(e){var t=Kp.comparator(e.key,this.key);return this.at(t)}}]),n}(ky),wy=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,"in",r)).keys=xy("in",r),i}return ie(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ky),_y=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,"not-in",r)).keys=xy("not-in",r),i}return ie(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ky);function xy(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Kp.fromName(e.referenceValue)}))}var Iy=function(e){se(n,e);var t=he(n);function n(e,r){return ne(this,n),t.call(this,e,"array-contains",r)}return ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Xv(t)&&Kv(t.arrayValue,this.value)}}]),n}(ky),Ey=function(e){se(n,e);var t=he(n);function n(e,r){return ne(this,n),t.call(this,e,"in",r)}return ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Kv(this.value.arrayValue,t)}}]),n}(ky),Sy=function(e){se(n,e);var t=he(n);function n(e,r){return ne(this,n),t.call(this,e,"not-in",r)}return ie(n,[{key:"matches",value:function(e){if(Kv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Kv(this.value.arrayValue,t)}}]),n}(ky),Ty=function(e){se(n,e);var t=he(n);function n(e,r){return ne(this,n),t.call(this,e,"array-contains-any",r)}return ie(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Xv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Kv(t.value.arrayValue,e)}))}}]),n}(ky),Cy=ie((function e(t,n){ne(this,e),this.position=t,this.inclusive=n})),Ny=ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ne(this,e),this.field=t,this.dir=n}));function Ay(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Dy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Kp.comparator(Kp.fromName(o.referenceValue),n.key):Gv(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Py(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Wv(e.position[n],t.position[n]))return!1;return!0}var Ry=ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ne(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function Oy(e,t,n,r,i,a,o,u){return new Ry(e,t,n,r,i,a,o,u)}function Fy(e){return new Ry(e)}function Ly(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function My(e){var t,n=ae(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function jy(e){return null!==e.collectionGroup}function Vy(e){var t=_p(e);if(null===t.lt){t.lt=[];var n=My(t),r=Ly(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new Ny(n)),t.lt.push(new Ny(Wp.keyField(),"asc"));else{var i,a=!1,o=ae(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Ny(Wp.keyField(),s))}}}return t.lt}function Uy(e){var t=_p(e);if(!t.ft)if("F"===t.limitType)t.ft=hy(t.path,t.collectionGroup,Vy(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ae(Vy(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Ny(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Cy(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Cy(t.startAt.position,t.startAt.inclusive):null;t.ft=hy(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function qy(e,t,n){return new Ry(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zy(e,t){return py(Uy(e),Uy(t))&&e.limitType===t.limitType}function By(e){return"".concat(dy(Uy(e)),"|lt:").concat(e.limitType)}function Wy(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Qv(t.value));var t})).join(", "),"]")),jv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Qv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Qv(e)})).join(",")),"Target(".concat(t,")")}(Uy(e)),"; limitType=").concat(e.limitType,")")}function Ky(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Kp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ae(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ae(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Dy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Vy(e),t))&&!(e.endAt&&!function(e,t,n){var r=Dy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Vy(e),t))}(e,t)}function Gy(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Hy(e){return function(t,n){var r,i=!1,a=ae(Vy(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Qy(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Qy(e,t,n){var r=e.field.isKeyField()?Kp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Gv(r,i):bp()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return bp()}}function $y(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vv(t)?"-0":t}}function Yy(e){return{integerValue:""+e}}function Jy(e,t){return Uv(t)?Yy(t):$y(e,t)}var Xy=ie((function e(){ne(this,e),this._=void 0}));function Zy(e,t,n){return e instanceof nm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof rm?im(e,t):e instanceof am?om(e,t):function(e,t){var n=tm(e,t),r=sm(n)+sm(e._t);return Jv(n)&&Jv(e._t)?Yy(r):$y(e.wt,r)}(e,t)}function em(e,t,n){return e instanceof rm?im(e,t):e instanceof am?om(e,t):n}function tm(e,t){return e instanceof um?Jv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var nm=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n)}(Xy),rm=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this)).elements=e,r}return ie(n)}(Xy);function im(e,t){var n,r=cm(t),i=ae(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Wv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var am=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this)).elements=e,r}return ie(n)}(Xy);function om(e,t){var n,r=cm(t),i=ae(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Wv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var um=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).wt=e,i._t=r,i}return ie(n)}(Xy);function sm(e){return Dv(e.integerValue||e.doubleValue)}function cm(e){return Xv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var lm=ie((function e(t,n){ne(this,e),this.field=t,this.transform=n}));var fm=ie((function e(t,n){ne(this,e),this.version=t,this.transformResults=n})),hm=function(){function e(t,n){ne(this,e),this.updateTime=t,this.exists=n}return ie(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function dm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var pm=ie((function e(){ne(this,e)}));function vm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Tm(e.key,hm.none()):new bm(e.key,e.data,hm.none());var n,r=e.data,i=sy.empty(),a=new Iv(Wp.comparator),o=ae(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new wm(e.key,i,new Tv(a.toArray()),hm.none())}function ym(e,t,n){e instanceof bm?function(e,t,n){var r=e.value.clone(),i=xm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof wm?function(e,t,n){if(dm(e.precondition,t)){var r=xm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(_m(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function mm(e,t,n,r){return e instanceof bm?function(e,t,n,r){if(!dm(e.precondition,t))return n;var i=e.value.clone(),a=Im(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof wm?function(e,t,n,r){if(!dm(e.precondition,t))return n;var i=Im(e.fieldTransforms,r,t),a=t.data;return a.setAll(_m(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return dm(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function gm(e,t){var n,r=null,i=ae(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=tm(a.transform,o||null);null!=u&&(null===r&&(r=sy.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function km(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Mp(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof rm&&t instanceof rm||e instanceof am&&t instanceof am?Mp(e.elements,t.elements,Wv):e instanceof um&&t instanceof um?Wv(e._t,t._t):e instanceof nm&&t instanceof nm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var bm=function(e){se(n,e);var t=he(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ne(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ie(n,[{key:"getFieldMask",value:function(){return null}}]),n}(pm),wm=function(e){se(n,e);var t=he(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ne(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return ie(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(pm);function _m(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function xm(e,t,n){var r=new Map;wp(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,em(o,u,n[i]))}return r}function Im(e,t,n){var r,i=new Map,a=ae(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Zy(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Em,Sm,Tm=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ie(n,[{key:"getFieldMask",value:function(){return null}}]),n}(pm),Cm=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ie(n,[{key:"getFieldMask",value:function(){return null}}]),n}(pm),Nm=ie((function e(t){ne(this,e),this.count=t}));function Am(e){switch(e){default:return bp();case xp.CANCELLED:case xp.UNKNOWN:case xp.DEADLINE_EXCEEDED:case xp.RESOURCE_EXHAUSTED:case xp.INTERNAL:case xp.UNAVAILABLE:case xp.UNAUTHENTICATED:return!1;case xp.INVALID_ARGUMENT:case xp.NOT_FOUND:case xp.ALREADY_EXISTS:case xp.PERMISSION_DENIED:case xp.FAILED_PRECONDITION:case xp.ABORTED:case xp.OUT_OF_RANGE:case xp.UNIMPLEMENTED:case xp.DATA_LOSS:return!0}}function Dm(e){if(void 0===e)return mp("GRPC error has no .code"),xp.UNKNOWN;switch(e){case Em.OK:return xp.OK;case Em.CANCELLED:return xp.CANCELLED;case Em.UNKNOWN:return xp.UNKNOWN;case Em.DEADLINE_EXCEEDED:return xp.DEADLINE_EXCEEDED;case Em.RESOURCE_EXHAUSTED:return xp.RESOURCE_EXHAUSTED;case Em.INTERNAL:return xp.INTERNAL;case Em.UNAVAILABLE:return xp.UNAVAILABLE;case Em.UNAUTHENTICATED:return xp.UNAUTHENTICATED;case Em.INVALID_ARGUMENT:return xp.INVALID_ARGUMENT;case Em.NOT_FOUND:return xp.NOT_FOUND;case Em.ALREADY_EXISTS:return xp.ALREADY_EXISTS;case Em.PERMISSION_DENIED:return xp.PERMISSION_DENIED;case Em.FAILED_PRECONDITION:return xp.FAILED_PRECONDITION;case Em.ABORTED:return xp.ABORTED;case Em.OUT_OF_RANGE:return xp.OUT_OF_RANGE;case Em.UNIMPLEMENTED:return xp.UNIMPLEMENTED;case Em.DATA_LOSS:return xp.DATA_LOSS;default:return bp()}}(Sm=Em||(Em={}))[Sm.OK=0]="OK",Sm[Sm.CANCELLED=1]="CANCELLED",Sm[Sm.UNKNOWN=2]="UNKNOWN",Sm[Sm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sm[Sm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sm[Sm.NOT_FOUND=5]="NOT_FOUND",Sm[Sm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sm[Sm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sm[Sm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sm[Sm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sm[Sm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sm[Sm.ABORTED=10]="ABORTED",Sm[Sm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sm[Sm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sm[Sm.INTERNAL=13]="INTERNAL",Sm[Sm.UNAVAILABLE=14]="UNAVAILABLE",Sm[Sm.DATA_LOSS=15]="DATA_LOSS";var Pm=function(){function e(t,n){ne(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ie(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){kv(this.inner,(function(t,n){var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return bv(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Rm=new wv(Kp.comparator);function Om(){return Rm}var Fm=new wv(Kp.comparator);function Lm(){for(var e=Fm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Mm(e){var t=Fm;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function jm(){return Um()}function Vm(){return Um()}function Um(){return new Pm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var qm=new wv(Kp.comparator),zm=new Iv(Kp.comparator);function Bm(){for(var e=zm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Wm=new Iv(Lp);function Km(){return Wm}var Gm=function(){function e(t,n,r,i,a){ne(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ie(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Hm.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Up.min(),r,Km(),Om(),Bm())}}]),e}(),Hm=function(){function e(t,n,r,i,a){ne(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ie(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Cv.EMPTY_BYTE_STRING,n,Bm(),Bm(),Bm())}}]),e}(),Qm=ie((function e(t,n,r,i){ne(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),$m=ie((function e(t,n){ne(this,e),this.targetId=t,this.It=n})),Ym=ie((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ne(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Jm=function(){function e(){ne(this,e),this.Tt=0,this.Et=eg(),this.At=Cv.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return ie(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=Bm(),t=Bm(),n=Bm();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:bp()}})),new Hm(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=eg()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),Xm=function(){function e(t){ne(this,e),this.Mt=t,this.Ft=new Map,this.$t=Om(),this.Bt=Zm(),this.Lt=new Iv(Lp)}return ie(e,[{key:"Ut",value:function(e){var t,n=ae(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=ae(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:bp()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(vy(i))if(0===n){var a=new Kp(i.path);this.Kt(t,a,ly.newNoDocument(a,Up.min()))}else wp(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&vy(a.target)){var o=new Kp(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,ly.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=Bm();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new Gm(e,n,this.Lt,this.$t,r);return this.$t=Om(),this.Bt=Zm(),this.Lt=new Iv(Lp),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new Jm,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new Iv(Lp),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||yp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new Jm),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Zm(){return new wv(Kp.comparator)}function eg(){return new wv(Kp.comparator)}var tg={asc:"ASCENDING",desc:"DESCENDING"},ng={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rg=ie((function e(t,n){ne(this,e),this.databaseId=t,this.dt=n}));function ig(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ag(e,t){return e.dt?t.toBase64():t.toUint8Array()}function og(e,t){return ig(e,t.toTimestamp())}function ug(e){return wp(!!e),Up.fromTimestamp(function(e){var t=Av(e);return new Vp(t.seconds,t.nanos)}(e))}function sg(e,t){return function(e){return new zp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function cg(e){var t=zp.fromString(e);return wp(Pg(t)),t}function lg(e,t){return sg(e.databaseId,t.path)}function fg(e,t){var n=cg(t);if(n.get(1)!==e.databaseId.projectId)throw new Ip(xp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ip(xp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Kp(vg(n))}function hg(e,t){return sg(e.databaseId,t)}function dg(e){var t=cg(e);return 4===t.length?zp.emptyPath():vg(t)}function pg(e){return new zp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vg(e){return wp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function yg(e,t,n){return{name:lg(e,t),fields:n.value.mapValue.fields}}function mg(e,t,n){var r=fg(e,t.name),i=ug(t.updateTime),a=new sy({mapValue:{fields:t.fields}}),o=ly.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function gg(e,t){return"found"in t?function(e,t){wp(!!t.found),t.found.name,t.found.updateTime;var n=fg(e,t.found.name),r=ug(t.found.updateTime),i=new sy({mapValue:{fields:t.found.fields}});return ly.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){wp(!!t.missing),wp(!!t.readTime);var n=fg(e,t.missing),r=ug(t.readTime);return ly.newNoDocument(n,r)}(e,t):bp()}function kg(e,t){var n;if(t instanceof bm)n={update:yg(e,t.key,t.value)};else if(t instanceof Tm)n={delete:lg(e,t.key)};else if(t instanceof wm)n={update:yg(e,t.key,t.data),updateMask:Dg(t.fieldMask)};else{if(!(t instanceof Cm))return bp();n={verify:lg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof nm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof am)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof um)return{fieldPath:t.field.canonicalString(),increment:n._t};throw bp()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:og(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:bp()}(e,t.precondition)),n}function bg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?hm.updateTime(ug(e.updateTime)):void 0!==e.exists?hm.exists(e.exists):hm.none()}(t.currentDocument):hm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)wp("REQUEST_TIME"===t.setToServerValue),n=new nm;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new rm(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new am(i)}else"increment"in t?n=new um(e,t.increment):bp();var a=Wp.fromServerFormat(t.fieldPath);return new lm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=fg(e,t.update.name),a=new sy({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Tv(t.map((function(e){return Wp.fromServerFormat(e)})))}(t.updateMask);return new wm(i,a,o,n,r)}return new bm(i,a,n,r)}if(t.delete){var u=fg(e,t.delete);return new Tm(u,n)}if(t.verify){var s=fg(e,t.verify);return new Cm(s,n)}return bp()}function wg(e,t){return{documents:[hg(e,t.path)]}}function _g(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=hg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=hg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(ey(e.value))return{unaryFilter:{field:Tg(e.field),op:"IS_NAN"}};if(Zv(e.value))return{unaryFilter:{field:Tg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ey(e.value))return{unaryFilter:{field:Tg(e.field),op:"IS_NOT_NAN"}};if(Zv(e.value))return{unaryFilter:{field:Tg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tg(e.field),op:Sg(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Tg(e.field),direction:Eg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||jv(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function xg(e){var t=dg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){wp(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Ig(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Ny(Cg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return jv(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Cy(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Cy(n,t)}(n.endAt)),Oy(t,i,u,o,s,"F",c,l)}function Ig(e){return e?void 0!==e.unaryFilter?[Ag(e)]:void 0!==e.fieldFilter?[Ng(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Ig(e)})).reduce((function(e,t){return e.concat(t)})):bp():[]}function Eg(e){return tg[e]}function Sg(e){return ng[e]}function Tg(e){return{fieldPath:e.canonicalString()}}function Cg(e){return Wp.fromServerFormat(e.fieldPath)}function Ng(e){return ky.create(Cg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bp()}}(e.fieldFilter.op),e.fieldFilter.value)}function Ag(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Cg(e.unaryFilter.field);return ky.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Cg(e.unaryFilter.field);return ky.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cg(e.unaryFilter.field);return ky.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cg(e.unaryFilter.field);return ky.create(i,"!=",{nullValue:"NULL_VALUE"});default:return bp()}}function Dg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Pg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Rg(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Fg(t)),t=Og(e.get(n),t);return Fg(t)}function Og(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Fg(e){return e+"\x01\x01"}function Lg(e){var t=e.length;if(wp(t>=2),2===t)return wp("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),zp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&bp(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:bp()}a=o+2}return new zp(r)}var Mg=["userId","batchId"];function jg(e,t){return[e,Rg(t)]}function Vg(e,t,n){return[e,Rg(t),n]}var Ug={},qg=["prefixPath","collectionGroup","readTime","documentId"],zg=["prefixPath","collectionGroup","documentId"],Bg=["collectionGroup","readTime","prefixPath","documentId"],Wg=["canonicalId","targetId"],Kg=["targetId","path"],Gg=["path","targetId"],Hg=["collectionId","parent"],Qg=["indexId","uid"],$g=["uid","sequenceNumber"],Yg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jg=["indexId","uid","orderedDocumentKey"],Xg=["userId","collectionPath","documentId"],Zg=["userId","collectionPath","largestBatchId"],ek=["userId","collectionGroup","largestBatchId"],tk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),nk=[].concat(ot(tk),["documentOverlays"]),rk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ik=rk,ak=[].concat(ik,["indexConfiguration","indexState","indexEntries"]),ok=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return ie(n)}(nv);function uk(e,t){var n=_p(e);return uv.N(n.ee,t)}var sk=function(){function e(t,n,r,i){ne(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ie(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ym(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=ae(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=mm(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=ae(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=mm(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Vm();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=vm(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Up.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Bm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Mp(this.mutations,e.mutations,(function(e,t){return km(e,t)}))&&Mp(this.baseMutations,e.baseMutations,(function(e,t){return km(e,t)}))}}]),e}(),ck=function(){function e(t,n,r,i){ne(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ie(e,null,[{key:"from",value:function(t,n,r){wp(t.mutations.length===r.length);for(var i=qm,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),lk=function(){function e(t,n){ne(this,e),this.largestBatchId=t,this.mutation=n}return ie(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),fk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Up.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Up.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Cv.EMPTY_BYTE_STRING;ne(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return ie(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),hk=ie((function e(t){ne(this,e),this.ne=t}));function dk(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:pk(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:lg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ig(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:vk(t.version)};else{if(!t.isUnknownDocument())return bp();r.unknownDocument={path:n.path.toArray(),version:vk(t.version)}}return r}function pk(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function vk(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function yk(e){var t=new Vp(e.seconds,e.nanoseconds);return Up.fromTimestamp(t)}function mk(e,t){for(var n=(t.baseMutations||[]).map((function(t){return bg(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return bg(e.ne,t)})),u=Vp.fromMillis(t.localWriteTimeMs);return new sk(t.batchId,u,n,o)}function gk(e){var t,n,r=yk(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?yk(e.lastLimboFreeSnapshotVersion):Up.min();return void 0!==e.query.documents?(wp(1===(n=e.query).documents.length),t=Uy(Fy(dg(n.documents[0])))):t=function(e){return Uy(xg(e))}(e.query),new fk(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Cv.fromBase64String(e.resumeToken))}function kk(e,t){var n,r=vk(t.snapshotVersion),i=vk(t.lastLimboFreeSnapshotVersion);n=vy(t.target)?wg(e.ne,t.target):_g(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:dy(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function bk(e){var t=xg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?qy(t,t.limit,"L"):t}function wk(e,t){return new lk(t.largestBatchId,bg(e.ne,t.overlayMutation))}function _k(e,t){var n=t.path.lastSegment();return[e,Rg(t.path.popLast()),n]}function xk(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:vk(r.readTime),documentKey:Rg(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ik=function(){function e(){ne(this,e)}return ie(e,[{key:"getBundleMetadata",value:function(e,t){return Ek(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:yk(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Ek(e).put({bundleId:(n=t).id,createTime:vk(ug(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Sk(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:bk(t.bundledQuery),readTime:yk(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Sk(e).put(function(e){return{name:e.name,readTime:vk(ug(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Ek(e){return uk(e,"bundles")}function Sk(e){return uk(e,"namedQueries")}var Tk=function(){function e(t,n){ne(this,e),this.wt=t,this.userId=n}return ie(e,[{key:"getOverlay",value:function(e,t){var n=this;return Ck(e).get(_k(this.userId,t)).next((function(e){return e?wk(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=jm();return av.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new lk(t,a);i.push(r.ie(e,o))})),av.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Rg(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Ck(e).W("collectionPathOverlayIndex",i))})),av.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=jm(),a=Rg(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ck(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=wk(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=jm(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ck(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=wk(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return Ck(e).put(function(e,t,n){var r=c(_k(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:kg(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Ck(e){return uk(e,"documentOverlays")}var Nk=function(){function e(){ne(this,e)}return ie(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Dv(e.integerValue));else if("doubleValue"in e){var n=Dv(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),Vv(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Pv(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?ry(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):bp()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),Kp.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function Ak(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Dk(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Ak(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Nk.ye=new Nk;var Pk=function(){function e(){ne(this,e),this.buffer=new Uint8Array(1024),this.position=0}return ie(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=Dk(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=Dk(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Oe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Rk=function(){function e(t){ne(this,e),this.Me=t}return ie(e,[{key:"de",value:function(e){this.Me.pe(e)}},{key:"he",value:function(e){this.Me.be(e)}},{key:"ae",value:function(e){this.Me.ve(e)}},{key:"ue",value:function(){this.Me.Ce()}}]),e}(),Ok=function(){function e(t){ne(this,e),this.Me=t}return ie(e,[{key:"de",value:function(e){this.Me.Ee(e)}},{key:"he",value:function(e){this.Me.Pe(e)}},{key:"ae",value:function(e){this.Me.De(e)}},{key:"ue",value:function(){this.Me.Ne()}}]),e}(),Fk=function(){function e(){ne(this,e),this.Me=new Pk,this.Fe=new Rk(this.Me),this.$e=new Ok(this.Me)}return ie(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Oe",value:function(){return this.Me.Oe()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),Lk=function(){function e(t,n,r,i){ne(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return ie(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Mk(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=jk(e.arrayValue,t.arrayValue))?n:0!==(n=jk(e.directionalValue,t.directionalValue))?n:Kp.comparator(e.documentKey,t.documentKey)}function jk(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Vk=function(){function e(t){ne(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=ae(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return ie(e,[{key:"Ge",value:function(e){var t=Hp(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=Qp(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=ae(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Uk=function(){function e(){ne(this,e),this.ze=new qk}return ie(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),av.resolve()}},{key:"getCollectionParents",value:function(e,t){return av.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return av.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return av.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return av.resolve(null)}},{key:"getIndexType",value:function(e,t){return av.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return av.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return av.resolve(null)}},{key:"getMinOffset",value:function(e,t){return av.resolve(Zp.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return av.resolve(Zp.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return av.resolve()}},{key:"updateIndexEntries",value:function(e,t){return av.resolve()}}]),e}(),qk=function(){function e(){ne(this,e),this.index={}}return ie(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Iv(zp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Iv(zp.comparator)).toArray()}}]),e}(),zk=new Uint8Array(0),Bk=function(){function e(t,n){ne(this,e),this.user=t,this.databaseId=n,this.He=new qk,this.Je=new Pm((function(e){return dy(e)}),(function(e,t){return py(e,t)})),this.uid=t.uid||""}return ie(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:Rg(i)};return Wk(e).put(a)}return av.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[jp(t),""],!1,!0);return Wk(e).K(r).next((function(e){var r,i=ae(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Lg(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Gk(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Hk(e);return a.next((function(e){o.put(xk(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Gk(e),r=Hk(e),i=Kk(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Kk(e),i=!0,a=new Map;return av.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Bm(),o=[];return av.forEach(a,(function(i,a){var u;yp("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(dy(t)));var s=function(e,t){var n=Hp(t);if(void 0===n)return null;var r,i=ae(yy(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=ae(Qp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=ae(yy(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=ae(Qp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?my(e,o.fieldPath,e.startAt):gy(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Cy(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=ae(Qp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?gy(e,o.fieldPath,e.endAt):my(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Cy(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),p=n.tn(i,a,c),v=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return av.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=Kp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return av.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):zk,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),p=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,ot(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new Lk(e,Kp.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new Lk(e,Kp.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new Vk(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return av.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Iv(Wp.comparator),r=!1,i=ae(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=ae(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new Fk,i=ae(Qp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);Nk.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Oe()}},{key:"nn",value:function(e){var t=new Fk;return Nk.ye.re(e,t.Be(0)),t.Oe()}},{key:"un",value:function(e,t){var n=new Fk;return Nk.ye.re(Yv(this.databaseId,t),n.Be(function(e){var t=Qp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Fk);var i,a=0,o=ae(Qp(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=ae(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&Xv(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);Nk.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Oe();return t}},{key:"an",value:function(e,t,n){var r,i=ot(e),a=[],o=ae(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=ae(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Fk;f.seed(l.Oe()),Nk.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof ky&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Gk(e),i=Hk(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return av.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Yp(t.sequenceNumber,new Zp(yk(t.readTime),new Kp(Lg(t.documentKey)),t.largestBatchId)):Yp.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new $p(Wp.fromServerFormat(n),r)}));return new Gp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Lp(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Gk(e),a=Hk(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return av.forEach(t,(function(t){return a.put(xk(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return av.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?av.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),av.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?av.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return Kk(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return Kk(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=Kk(e),i=new Iv(Mk);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new Lk(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new Iv(Mk),r=this.on(t,e);if(null==r)return n;var i=Hp(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Xv(a)){var o,u=ae(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Lk(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Lk(t.indexId,e.key,zk,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;yp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Sv(a),s=Sv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Sv(o)):l?(i(u),u=Sv(a)):(u=Sv(a),s=Sv(o))}}(r,i,Mk,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),av.waitFor(o)}},{key:"ln",value:function(e){var t=1;return Hk(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Mk(e,t)})).filter((function(e,t,n){return!t||0!==Mk(e,n[t-1])}));var r=[];r.push(e);var i,a=ae(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Mk(o,e),s=Mk(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,zk,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,zk,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Qk)}},{key:"getMinOffset",value:function(e,t){var n=this;return av.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||bp()}))})).next(Qk)}}]),e}();function Wk(e){return uk(e,"collectionParents")}function Kk(e){return uk(e,"indexEntries")}function Gk(e){return uk(e,"indexConfiguration")}function Hk(e){return uk(e,"indexState")}function Qk(e){wp(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;ev(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Zp(t.readTime,t.documentKey,n)}var $k={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yk=function(){function e(t,n,r){ne(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ie(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Jk(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){wp(1===u)})));var c,l=[],f=ae(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Vg(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return av.waitFor(a).next((function(){return l}))}function Xk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw bp();t=e.noDocument}return JSON.stringify(t).length}Yk.DEFAULT_COLLECTION_PERCENTILE=10,Yk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yk.DEFAULT=new Yk(41943040,Yk.DEFAULT_COLLECTION_PERCENTILE,Yk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yk.DISABLED=new Yk(-1,0,0);var Zk=function(){function e(t,n,r,i){ne(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return ie(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tb(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=nb(e),o=tb(e);return o.add({}).next((function(u){wp("number"==typeof u);var s,c=new sk(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return kg(e.ne,t)})),i=n.mutations.map((function(t){return kg(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new Iv((function(e,t){return Lp(e.canonicalString(),t.canonicalString())})),d=ae(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Vg(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Ug))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),av.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return tb(e).get(t).next((function(e){return e?(wp(e.userId===n.userId),mk(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?av.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return tb(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(wp(t.batchId>=r),a=mk(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return tb(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tb(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return mk(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=jg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return nb(e).J({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=Lg(l);if(s===n.userId&&t.path.isEqual(h))return tb(e).get(f).next((function(e){if(!e)throw bp();wp(e.userId===n.userId),a.push(mk(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Iv(Lp),i=[];return t.forEach((function(t){var a=jg(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=nb(e).J({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=Lg(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),av.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=jg(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Iv(Lp);return nb(e).J({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=Lg(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(tb(e).get(t).next((function(e){if(null===e)throw bp();wp(e.userId===n.userId),r.push(mk(n.wt,e))})))})),av.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Jk(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),av.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return av.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return nb(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Lg(e[1]);i.push(a)}else r.done()})).next((function(){wp(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return eb(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return rb(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return wp(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function eb(e,t,n){var r=jg(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return nb(e).J({range:a,H:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function tb(e){return uk(e,"mutations")}function nb(e){return uk(e,"documentMutations")}function rb(e){return uk(e,"mutationQueues")}var ib=function(){function e(t){ne(this,e),this.En=t}return ie(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),ab=function(){function e(t,n){ne(this,e),this.referenceDelegate=t,this.wt=n}return ie(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new ib(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return Up.fromTimestamp(new Vp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ob(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return wp(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ob(e).J((function(o,u){var s=gk(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return av.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return ob(e).J((function(e,n){var r=gk(n);t(r)}))}},{key:"bn",value:function(e){return ub(e).get("targetGlobalKey").next((function(e){return wp(null!==e),e}))}},{key:"Pn",value:function(e,t){return ub(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return ob(e).put(kk(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=dy(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ob(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=gk(n);py(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=sb(e);return t.forEach((function(t){var o=Rg(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),av.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=sb(e);return av.forEach(t,(function(t){var a=Rg(t.path);return av.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=sb(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=sb(e),i=Bm();return r.J({range:n,H:!0},(function(e,t,n){var r=Lg(e[1]),a=new Kp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Rg(t.path),r=IDBKeyRange.bound([n],[jp(n)],!1,!0),i=0;return sb(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return ob(e).get(t).next((function(e){return e?gk(e):null}))}}]),e}();function ob(e){return uk(e,"targets")}function ub(e){return uk(e,"targetGlobal")}function sb(e){return uk(e,"targetDocuments")}function cb(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=Lp(r,o);return 0===s?Lp(i,u):s}var lb=function(){function e(t){ne(this,e),this.Sn=t,this.buffer=new Iv(cb),this.Dn=0}return ie(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();cb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),fb=function(){function e(t,n,r){ne(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return ie(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;yp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!lv(e.t0)){e.next=12;break}yp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,rv(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),hb=function(){function e(t,n){ne(this,e),this.On=t,this.params=n}return ie(e,[{key:"calculateTargetCount",value:function(e,t){return this.On.Mn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return av.resolve(mv.ot);var r=new lb(t);return this.On.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.On.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.On.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.On.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(yp("LruGarbageCollector","Garbage collection skipped; disabled"),av.resolve($k)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(yp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),$k):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.On.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(yp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),vp()<=ft.DEBUG&&yp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),av.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),db=function(){function e(t,n){ne(this,e),this.db=t,this.garbageCollector=function(e,t){return new hb(e,t)}(this,n)}return ie(e,[{key:"Mn",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return pb(e,n)}},{key:"removeReference",value:function(e,t,n){return pb(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return pb(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return rb(e).Y((function(r){return eb(e,r,t).next((function(e){return e&&(n=!0),av.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Up.min()),sb(e).delete([0,Rg(o.path)])}))}));i.push(s)}})).next((function(){return av.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return pb(e,t)}},{key:"Ln",value:function(e,t){var n,r=sb(e),i=mv.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==mv.ot&&t(new Kp(Lg(n)),i),i=s,n=u):i=mv.ot})).next((function(){i!==mv.ot&&t(new Kp(Lg(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function pb(e,t){return sb(e).put(function(e,t){return{targetId:0,path:Rg(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var vb=function(){function e(){ne(this,e),this.changes=new Pm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ie(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,ly.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?av.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),yb=function(){function e(t){ne(this,e),this.wt=t}return ie(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return bb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return bb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],pk(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=ly.newInvalidDocument(t);return bb(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wb(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:ly.newInvalidDocument(t)};return bb(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wb(t))},(function(e,i){r={document:n.Kn(t,i),size:Xk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Om();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=Om(),i=new wv(Kp.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,Xk(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return av.resolve();var r=new Iv(xb);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(wb(r.first()),wb(r.last())),a=r.getIterator(),o=a.getNext();return bb(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Kp.fromSegments([].concat(ot(t.prefixPath),[t.collectionGroup,t.documentId]));o&&xb(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(wb(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),pk(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bb(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Om(),i=ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(Kp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Om(),o=_b(t,n),u=_b(t,Zp.max());return bb(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(Kp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new gb(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return kb(e).get("remoteDocumentGlobalKey").next((function(e){return wp(!!e),e}))}},{key:"qn",value:function(e,t){return kb(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=mg(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Kp.fromSegments(t.noDocument.path),i=yk(t.noDocument.readTime);n=ly.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return bp();var a=Kp.fromSegments(t.unknownDocument.path),o=yk(t.unknownDocument.version);n=ly.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Vp(e[0],e[1]);return Up.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(Up.min()))return n}return ly.newInvalidDocument(e)}}]),e}();function mb(e){return new yb(e)}var gb=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new Pm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ie(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Iv((function(e,t){return Lp(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=dk(t.zn.wt,o);i=i.add(a.path.popLast());var c=Xk(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=dk(t.zn.wt,o.convertToNoDocument(Up.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),av.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(vb);function kb(e){return uk(e,"remoteDocumentGlobal")}function bb(e){return uk(e,"remoteDocumentsV14")}function wb(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function _b(e,t){var n=t.documentKey.path.toArray();return[e,pk(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function xb(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Lp(n[a],r[a]))return i;return(i=Lp(n.length,r.length))||((i=Lp(n[n.length-2],r[r.length-2]))||Lp(n[n.length-1],r[r.length-1]))}var Ib=ie((function e(t,n){ne(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Eb=function(){function e(t,n,r,i){ne(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return ie(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&mm(r.mutation,e,Tv.empty(),Vp.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Bm()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bm(),i=jm();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Lm();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=jm();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Bm())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Om(),a=Um(),o=Um();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof wm)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),mm(o.mutation,t,o.mutation.getFieldMask(),Vp.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Ib(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Um(),i=new wv((function(e,t){return e-t})),a=Bm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=ae(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Tv.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Bm()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Vm();c.forEach((function(e){if(!a.has(e)){var n=vm(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return av.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Kp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):av.resolve(jm()),u=-1,s=a;return o.next((function(t){return av.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?av.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Bm())})).next((function(e){return{batchId:u,changes:Mm(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Kp(t)).next((function(e){var t=Lm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Lm();return this.indexManager.getCollectionParents(e,i).next((function(o){return av.forEach(o,(function(o){var u=function(e,t){return new Ry(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,ly.newInvalidDocument(n)))}));var n=Lm();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&mm(a.mutation,i,Tv.empty(),Vp.now()),Ky(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):av.resolve(ly.newInvalidDocument(t))}}]),e}(),Sb=function(){function e(t){ne(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return ie(e,[{key:"getBundleMetadata",value:function(e,t){return av.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:ug(n.createTime)}),av.resolve()}},{key:"getNamedQuery",value:function(e,t){return av.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:bk(e.bundledQuery),readTime:ug(e.readTime)}}(t)),av.resolve()}}]),e}(),Tb=function(){function e(){ne(this,e),this.overlays=new wv(Kp.comparator),this.Xn=new Map}return ie(e,[{key:"getOverlay",value:function(e,t){return av.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=jm();return av.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),av.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),av.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=jm(),i=t.length+1,a=new Kp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return av.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new wv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=jm(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=jm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return av.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new lk(t,n));var a=this.Xn.get(t);void 0===a&&(a=Bm(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),Cb=function(){function e(){ne(this,e),this.Zn=new Iv(Nb.ts),this.es=new Iv(Nb.ns)}return ie(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Nb(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new Nb(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Kp(new zp([])),r=new Nb(n,e),i=new Nb(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Kp(new zp([])),n=new Nb(t,e),r=new Nb(t,e+1),i=Bm();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Nb(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Nb=function(){function e(t,n){ne(this,e),this.key=t,this.ls=n}return ie(e,null,[{key:"ts",value:function(e,t){return Kp.comparator(e.key,t.key)||Lp(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Lp(e.ls,t.ls)||Kp.comparator(e.key,t.key)}}]),e}(),Ab=function(){function e(t,n){ne(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new Iv(Nb.ts)}return ie(e,[{key:"checkEmpty",value:function(e){return av.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new sk(i,t,n,r);this.mutationQueue.push(a);var o,u=ae(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new Nb(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return av.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return av.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return av.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return av.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return av.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Nb(t,0),i=new Nb(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),av.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Iv(Lp);return t.forEach((function(e){var t=new Nb(e,0),i=new Nb(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),av.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Kp.isDocumentKey(i)||(i=i.child(""));var a=new Nb(new Kp(i),0),o=new Iv(Lp);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),av.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;wp(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return av.forEach(t.mutations,(function(i){var a=new Nb(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Nb(t,0),r=this.ds.firstAfterOrEqual(n);return av.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,av.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Db=function(){function e(t){ne(this,e),this.ps=t,this.docs=new wv(Kp.comparator),this.size=0}return ie(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return av.resolve(n?n.document.mutableCopy():ly.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Om();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ly.newInvalidDocument(e))})),av.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Om(),i=new Kp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||ev(Xp(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return av.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){bp()}},{key:"Is",value:function(e,t){return av.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Pb(this)}},{key:"getSize",value:function(e){return av.resolve(this.size)}}]),e}(),Pb=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this)).zn=e,r}return ie(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),av.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(vb),Rb=function(){function e(t){ne(this,e),this.persistence=t,this.Ts=new Pm((function(e){return dy(e)}),py),this.lastRemoteSnapshotVersion=Up.min(),this.highestTargetId=0,this.Es=0,this.As=new Cb,this.targetCount=0,this.Rs=ib.An()}return ie(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),av.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return av.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return av.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),av.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),av.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new ib(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,av.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),av.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,av.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),av.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return av.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return av.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),av.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),av.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),av.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return av.resolve(n)}},{key:"containsKey",value:function(e,t){return av.resolve(this.As.containsKey(t))}}]),e}(),Ob=function(){function e(t,n){var r=this;ne(this,e),this.bs={},this.overlays={},this.Ps=new mv(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Rb(this),this.indexManager=new Uk,this.remoteDocumentCache=new Db((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new hk(n),this.Ds=new Sb(this.wt)}return ie(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Tb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new Ab(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;yp("MemoryPersistence","Starting transaction:",e);var i=new Fb(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return av.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Fb=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ie(n)}(nv),Lb=function(){function e(t){ne(this,e),this.persistence=t,this.ks=new Cb,this.Os=null}return ie(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw bp()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),av.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),av.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),av.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return av.forEach(this.Fs,(function(r){var i=Kp.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Up.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return av.or([function(){return av.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}(),Mb=function(){function e(t){ne(this,e),this.wt=t}return ie(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new ov("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mg,{unique:!0}),e.createObjectStore("documentMutations")}(e),jb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=av.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),jb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Up.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mg,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return av.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Xg});t.createIndex("collectionPathOverlayIndex",Zg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ek,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:qg});t.createIndex("documentKeyIndex",zg),t.createIndex("collectionGroupIndex",Bg)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Qg}).createIndex("sequenceNumberIndex",$g,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Yg}).createIndex("documentKeyIndex",Jg,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=Xk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return av.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return av.forEach(r,(function(r){wp(r.userId===n.userId);var i=mk(t.wt,r);return Jk(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new zp(n),o=function(e){return[0,Rg(e)]}(a);r.push(t.get(o).next((function(n){return n?av.resolve():function(n){return t.put({targetId:0,path:Rg(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return av.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Hg});var n=t.store("collectionParents"),r=new qk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Rg(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new zp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],Lg(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=gk(r),a=kk(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Kp(zp.fromString(i.document.name).popFirst(5)):i.noDocument?Kp.fromSegments(i.noDocument.path):i.unknownDocument?Kp.fromSegments(i.unknownDocument.path):bp()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return av.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=mb(this.wt),a=new Ob(Lb.Ms,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Bm();mk(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),av.forEach(r,(function(e,r){var o=new hp(r),u=Tk.se(n.wt,o),s=a.getIndexManager(o),c=Zk.se(o,n.wt,s,a.referenceDelegate);return new Eb(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new ok(t,mv.ot),e).next()}))}))}}]),e}();function jb(e){e.createObjectStore("targetDocuments",{keyPath:Kg}).createIndex("documentTargetsIndex",Gg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Wg,{unique:!0}),e.createObjectStore("targetGlobal")}var Vb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ub=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:14;if(ne(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new Ip(xp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new db(this,i),this.ei=n+"main",this.wt=new hk(s),this.ni=new uv(this.ei,this.Hs,new Mb(this.wt)),this.Vs=new ab(this.referenceDelegate,this.wt),this.remoteDocumentCache=mb(this.wt),this.Ds=new Ik,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&mp("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ie(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Ip(xp.FAILED_PRECONDITION,Vb);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new mv(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=ee(X().mark((function n(r){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=ee(X().mark((function t(n){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return zb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(lv(t))return yp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return yp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return qb(e).get("owner").next((function(e){return av.resolve(t.di(e))}))}},{key:"_i",value:function(e){return zb(e).delete(this.clientId)}},{key:"wi",value:function(){var e=ee(X().mark((function e(){var t,n,r,i,a=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=uk(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return av.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=ae(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?av.resolve(!0):qb(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new Ip(xp.FAILED_PRECONDITION,Vb);return!1}}return!(!t.networkEnabled||!t.inForeground)||zb(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&yp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ee(X().mark((function e(){var t=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new ok(e,mv.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return zb(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return Zk.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Bk(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Tk.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;yp("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?ak:14===i?ik:13===i?rk:12===i?nk:11===i?tk:void bp();return this.ni.runTransaction(e,o,u,(function(i){return a=new ok(i,r.Ps?r.Ps.next():mv.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw mp("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new Ip(xp.FAILED_PRECONDITION,tv);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return qb(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Ip(xp.FAILED_PRECONDITION,Vb)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qb(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=qb(e);return n.get("owner").next((function(e){return t.di(e)?(yp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):av.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(mp("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!Ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return yp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return mp("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(fl){mp("Failed to set zombie client id.",fl)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(fl){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return uv.V()}}]),e}();function qb(e){return uk(e,"owner")}function zb(e){return uk(e,"clientMetadata")}function Bb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Wb=function(){function e(t,n,r,i){ne(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return ie(e,null,[{key:"Vi",value:function(t,n){var r,i=Bm(),a=Bm(),o=ae(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Kb=function(){function e(){ne(this,e),this.Si=!1}return ie(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return av.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Up.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(vp()<=ft.DEBUG&&yp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wy(t)),i.Mi(e,o,t,Jp(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new Iv(Hy(e));return t.forEach((function(t,r){Ky(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return vp()<=ft.DEBUG&&yp("QueryEngine","Using full collection scan to execute query:",Wy(t)),this.Di.getDocumentsMatchingQuery(e,t,Zp.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Gb=function(){function e(t,n,r,i){ne(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new wv(Lp),this.Bi=new Pm((function(e){return dy(e)}),py),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return ie(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Eb(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function Hb(e,t,n,r){return new Gb(e,t,n,r)}function Qb(e,t){return $b.apply(this,arguments)}function $b(){return $b=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_p(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Bm(),s=ae(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=ae(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=ae(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=ae(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),$b.apply(this,arguments)}function Yb(e,t){var n=_p(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=av.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);wp(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Bm(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Jb(e){var t=_p(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function Xb(e,t){var n=_p(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Cv.EMPTY_BYTE_STRING,Up.min()).withLastLimboFreeSnapshotVersion(Up.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=Om(),s=Bm();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Zb(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(Up.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return av.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function Zb(e,t,n){var r=Bm(),i=Bm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Om();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Up.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):yp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function ew(e,t){var n=_p(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function tw(e,t){var n=_p(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,av.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new fk(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function nw(e,t,n){return rw.apply(this,arguments)}function rw(){return rw=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_p(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),lv(e.t1)){e.next=12;break}throw e.t1;case 12:yp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),rw.apply(this,arguments)}function iw(e,t,n){var r=_p(e),i=Up.min(),a=Bm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=_p(e),i=r.Bi.get(n);return void 0!==i?av.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,Uy(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Up.min(),n?a:Bm())})).next((function(e){return uw(r,Gy(t),e),{documents:e,ji:a}}))}))}function aw(e,t){var n=_p(e),r=_p(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function ow(e,t){var n=_p(e),r=n.Li.get(t)||Up.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,Jp(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return uw(n,t,e),e}))}function uw(e,t,n){var r=Up.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function sw(e,t,n,r){return cw.apply(this,arguments)}function cw(){return cw=ee(X().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=_p(t),o=Bm(),u=Om(),s=ae(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,tw(a,function(e){return Uy(Fy(zp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Zb(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),cw.apply(this,arguments)}function lw(e,t){return fw.apply(this,arguments)}function fw(){return fw=ee(X().mark((function e(t,n){var r,i,a,o=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Bm(),e.next=3,tw(t,Uy(bk(n.bundledQuery)));case 3:return i=e.sent,a=_p(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ug(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(Cv.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),fw.apply(this,arguments)}function hw(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function dw(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function pw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var vw=function(){function e(t,n,r,i){ne(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ie(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Ip(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(mp("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),yw=function(){function e(t,n,r){ne(this,e),this.targetId=t,this.state=n,this.error=r}return ie(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ip(i.error.code,i.error.message))),a?new e(t,i.state,r):(mp("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),mw=function(){function e(t,n){ne(this,e),this.clientId=t,this.activeTargetIds=n}return ie(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Km(),o=0;i&&o<r.activeTargetIds.length;++o)i=Uv(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(mp("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),gw=function(){function e(t,n){ne(this,e),this.clientId=t,this.onlineState=n}return ie(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(mp("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),kw=function(){function e(){ne(this,e),this.activeTargetIds=Km()}return ie(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),bw=function(){function e(t,n,r,i,a){ne(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new wv(Lp),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=hw(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new kw),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return ie(e,[{key:"start",value:function(){var e=ee(X().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=ae(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(hw(this.persistenceKey,i)))&&(o=mw.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=ae(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(pw(this.persistenceKey,e));if(n){var r=yw.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(pw(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return yp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){yp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){yp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(yp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void mp("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(ee(X().mark((function e(){var r,i,a,o,u,s,c;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=mv.ot;if(null!=e)try{var n=JSON.parse(e);wp("number"==typeof n),t=n}catch(e){mp("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==mv.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new vw(this.currentUser,e,t,n),i=dw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=dw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=pw(this.persistenceKey,e),i=new yw(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return mw.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return vw.Ji(new hp(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return yw.Ji(r,t)}},{key:"wr",value:function(e){return gw.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:yp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Mr(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=Km();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ww=function(){function e(){ne(this,e),this.Fr=new kw,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ie(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new kw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),_w=function(){function e(){ne(this,e)}return ie(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),xw=function(){function e(){var t=this;ne(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return ie(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){yp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ae(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){yp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ae(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Iw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ew=function(){function e(t){ne(this,e),this.jr=t.jr,this.Wr=t.Wr}return ie(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),Sw=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ie(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new lp;o.listenOnce(ap.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case ip.NO_ERROR:var t=o.getResponseJson();yp("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ip.TIMEOUT:yp("Connection",'RPC "'+e+'" timed out'),a(new Ip(xp.DEADLINE_EXCEEDED,"Request time out"));break;case ip.HTTP_ERROR:var n=o.getStatus();if(yp("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(xp).indexOf(t)>=0?t:xp.UNKNOWN}(r.status);a(new Ip(u,r.message))}else a(new Ip(xp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ip(xp.UNAVAILABLE,"Connection failed."));break;default:bp()}}finally{yp("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=np(),a=rp(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new sp({})),this.uo(o.initMessageHeaders,t,n),Ne()||Pe()||Ce().indexOf("Electron/")>=0||Re()||Ce().indexOf("MSAppHost/")>=0||De()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");yp("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Ew({jr:function(e){l?yp("Connection","Not sending because WebChannel is closed:",e):(c||(yp("Connection","Opening WebChannel transport."),s.open(),c=!0),yp("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,cp.EventType.OPEN,(function(){l||yp("Connection","WebChannel transport opened.")})),h(s,cp.EventType.CLOSE,(function(){l||(l=!0,yp("Connection","WebChannel transport closed"),f.eo())})),h(s,cp.EventType.ERROR,(function(e){l||(l=!0,gp("Connection","WebChannel transport errored:",e),f.eo(new Ip(xp.UNAVAILABLE,"The operation could not be completed")))})),h(s,cp.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];wp(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){yp("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Em[e];if(void 0!==t)return Dm(t)}(a),u=i.message;void 0===o&&(o=xp.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new Ip(o,u)),s.close()}else yp("Connection","WebChannel received:",n),f.no(n)}})),h(a,op.STAT_EVENT,(function(e){e.stat===up.PROXY?yp("Connection","Detected buffering proxy"):e.stat===up.NOPROXY&&yp("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){ne(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ie(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);yp("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return yp("RestConnection","Received: ",e),e}),(function(t){throw gp("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+dp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=Iw[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function Tw(){return"undefined"!=typeof window?window:null}function Cw(){return"undefined"!=typeof document?document:null}function Nw(e){return new rg(e,!0)}var Aw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ne(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return ie(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&yp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),Dw=function(){function e(t,n,r,i,a,o,u,s){ne(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Aw(t,n)}return ie(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===xp.RESOURCE_EXHAUSTED?(mp(n.toString()),mp("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===xp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new Ip(xp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return yp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(yp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Pw=function(e){se(n,e);var t=he(n);function n(e,r,i,a,o,u){var s;return ne(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return ie(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:bp()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(wp(void 0===t||"string"==typeof t),Cv.fromBase64String(t||"")):(wp(void 0===t||t instanceof Uint8Array),Cv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?xp.UNKNOWN:Dm(e.code);return new Ip(t,e.message||"")}(o);n=new Ym(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=fg(e,s.document.name),l=ug(s.document.updateTime),f=new sy({mapValue:{fields:s.document.fields}}),h=ly.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Qm(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=fg(e,v.document),m=v.readTime?ug(v.readTime):Up.min(),g=ly.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Qm([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=fg(e,b.document),_=b.removedTargetIds||[];n=new Qm([],_,w,null)}else{if(!("filter"in t))return bp();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new Nm(I),S=x.targetId;n=new $m(S,E)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Up.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Up.min():t.readTime?ug(t.readTime):Up.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=pg(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=vy(r)?{documents:wg(e,r)}:{query:_g(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=ag(e,t.resumeToken):t.snapshotVersion.compareTo(Up.min())>0&&(n.readTime=ig(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return bp()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=pg(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(Dw),Rw=function(e){se(n,e);var t=he(n);function n(e,r,i,a,o,u){var s;return ne(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return ie(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Fn(ce(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(wp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(wp(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ug(e.updateTime):ug(t);return n.isEqual(Up.min())&&(n=ug(t)),new fm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ug(e.commitTime);return this.listener.Jo(n,t)}return wp(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=pg(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return kg(t.wt,e)}))};this.Mo(n)}}]),n}(Dw),Ow=function(e){se(n,e);var t=he(n);function n(e,r,i,a){var o;return ne(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return ie(n,[{key:"tu",value:function(){if(this.Zo)throw new Ip(xp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===xp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Ip(xp.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.bo.ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===xp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Ip(xp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return ie((function e(){ne(this,e)}))}()),Fw=function(){function e(t,n){ne(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return ie(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(mp(t),this.su=!1):yp("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),Lw=ie((function e(t,n,r,i,a){var o=this;ne(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Hw(o),!e.t0){e.next=5;break}return yp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=_p(t)).lu.add(4),e.next=4,Vw(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,Mw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new Fw(r,i)}));function Mw(e){return jw.apply(this,arguments)}function jw(){return jw=ee(X().mark((function e(t){var n,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Hw(t)){e.next=18;break}n=ae(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),jw.apply(this,arguments)}function Vw(e){return Uw.apply(this,arguments)}function Uw(){return Uw=ee(X().mark((function e(t){var n,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ae(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Uw.apply(this,arguments)}function qw(e,t){var n=_p(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Gw(n)?Kw(n):__(n).Co()&&Bw(n,t))}function zw(e,t){var n=_p(e),r=__(n);n.hu.delete(t),r.Co()&&Ww(n,t),0===n.hu.size&&(r.Co()?r.ko():Hw(n)&&n._u.set("Unknown"))}function Bw(e,t){e.wu.Nt(t.targetId),__(e).Qo(t)}function Ww(e,t){e.wu.Nt(t),__(e).jo(t)}function Kw(e){e.wu=new Xm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),__(e).start(),e._u.iu()}function Gw(e){return Hw(e)&&!__(e).Do()&&e.hu.size>0}function Hw(e){return 0===_p(e).lu.size}function Qw(e){e.wu=void 0}function $w(e){return Yw.apply(this,arguments)}function Yw(){return Yw=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){Bw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function Jw(e,t){return Xw.apply(this,arguments)}function Xw(){return Xw=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Qw(t),Gw(t)?(t._u.uu(n),Kw(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Xw.apply(this,arguments)}function Zw(e,t,n){return e_.apply(this,arguments)}function e_(){return e_=ee(X().mark((function e(t,n,r){var i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Ym&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ae(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),yp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,t_(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Qm?t.wu.Ut(n):n instanceof $m?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Up.min())){e.next=29;break}return e.prev=14,e.next=17,Jb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Cv.EMPTY_BYTE_STRING,n.snapshotVersion)),Ww(e,t);var r=new fk(n.target,t,1,n.sequenceNumber);Bw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),yp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,t_(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),e_.apply(this,arguments)}function t_(e,t,n){return n_.apply(this,arguments)}function n_(){return n_=ee(X().mark((function e(t,n,r){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lv(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,Vw(t);case 5:t._u.set("Offline"),r||(r=function(){return Jb(t.localStore)}),t.asyncQueue.enqueueRetryable(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,Mw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}function r_(e,t){return t().catch((function(n){return t_(e,n,t)}))}function i_(e){return a_.apply(this,arguments)}function a_(){return a_=ee(X().mark((function e(t){var n,r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_p(t),r=x_(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!o_(n)){e.next=19;break}return e.prev=3,e.next=6,ew(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,u_(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,t_(n,e.t0);case 17:e.next=2;break;case 19:s_(n)&&c_(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),a_.apply(this,arguments)}function o_(e){return Hw(e)&&e.au.length<10}function u_(e,t){e.au.push(t);var n=x_(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function s_(e){return Hw(e)&&!x_(e).Do()&&e.au.length>0}function c_(e){x_(e).start()}function l_(e){return f_.apply(this,arguments)}function f_(){return f_=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x_(t).Xo();case 1:case"end":return e.stop()}}),e)}))),f_.apply(this,arguments)}function h_(e){return d_.apply(this,arguments)}function d_(){return d_=ee(X().mark((function e(t){var n,r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=x_(t),r=ae(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),d_.apply(this,arguments)}function p_(e,t,n){return v_.apply(this,arguments)}function v_(){return v_=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=ck.from(i,n,r),e.next=3,r_(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,i_(t);case 5:case"end":return e.stop()}}),e)}))),v_.apply(this,arguments)}function y_(e,t){return m_.apply(this,arguments)}function m_(){return m_=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&x_(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Am(i=n.code)||i===xp.ABORTED){e.next=7;break}return r=t.au.shift(),x_(t).No(),e.next=5,r_(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,i_(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:s_(t)&&c_(t);case 5:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}function g_(e,t){return k_.apply(this,arguments)}function k_(){return k_=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=_p(t)).asyncQueue.verifyOperationInProgress(),yp("RemoteStore","RemoteStore received new credentials"),i=Hw(r),r.lu.add(3),e.next=6,Vw(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,Mw(r);case 12:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}function b_(e,t){return w_.apply(this,arguments)}function w_(){return w_=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_p(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,Mw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,Vw(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),w_.apply(this,arguments)}function __(e){return e.mu||(e.mu=function(e,t,n){var r=_p(e);return r.tu(),new Pw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:$w.bind(null,e),Jr:Jw.bind(null,e),Go:Zw.bind(null,e)}),e.fu.push(function(){var t=ee(X().mark((function t(n){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),Gw(e)?Kw(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:Qw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function x_(e){return e.gu||(e.gu=function(e,t,n){var r=_p(e);return r.tu(),new Rw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:l_.bind(null,e),Jr:y_.bind(null,e),Yo:h_.bind(null,e),Jo:p_.bind(null,e)}),e.fu.push(function(){var t=ee(X().mark((function t(n){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,i_(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(yp("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var I_=function(){function e(t,n,r,i,a){ne(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ep,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ie(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ip(xp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function E_(e,t){if(mp("AsyncQueue","".concat(t,": ").concat(e)),lv(e))return new Ip(xp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var S_=function(){function e(t){ne(this,e),this.comparator=t?function(e,n){return t(e,n)||Kp.comparator(e.key,n.key)}:function(e,t){return Kp.comparator(e.key,t.key)},this.keyedMap=Lm(),this.sortedSet=new wv(this.comparator)}return ie(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),T_=function(){function e(){ne(this,e),this.yu=new wv(Kp.comparator)}return ie(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):bp():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),C_=function(){function e(t,n,r,i,a,o,u,s){ne(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return ie(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,S_.emptySet(n),a,r,i,!0,!1)}}]),e}(),N_=ie((function e(){ne(this,e),this.Iu=void 0,this.listeners=[]})),A_=ie((function e(){ne(this,e),this.queries=new Pm((function(e){return By(e)}),zy),this.onlineState="Unknown",this.Tu=new Set}));function D_(e,t){return P_.apply(this,arguments)}function P_(){return P_=ee(X().mark((function e(t,n){var r,i,a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_p(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new N_),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=E_(e.t0,"Initialization of query '".concat(Wy(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&M_(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),P_.apply(this,arguments)}function R_(e,t){return O_.apply(this,arguments)}function O_(){return O_=ee(X().mark((function e(t,n){var r,i,a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_p(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),O_.apply(this,arguments)}function F_(e,t){var n,r=_p(e),i=!1,a=ae(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=ae(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&M_(r)}function L_(e,t,n){var r=_p(e),i=r.queries.get(t);if(i){var a,o=ae(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function M_(e){e.Tu.forEach((function(e){e.next()}))}var j_=function(){function e(t,n,r){ne(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return ie(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ae(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new C_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=C_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),V_=function(){function e(t,n){ne(this,e),this.payload=t,this.byteLength=n}return ie(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),U_=function(){function e(t){ne(this,e),this.wt=t}return ie(e,[{key:"Wi",value:function(e){return fg(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?mg(this.wt,e.document,!1):ly.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return ug(e)}}]),e}(),q_=function(){function e(t,n,r){ne(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=z_(t)}return ie(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=zp.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new U_(this.wt),i=ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=ae(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Bm()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ee(X().mark((function e(){var t,n,r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sw(this.localStore,new U_(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=ae(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,lw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function z_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var B_=ie((function e(t){ne(this,e),this.key=t})),W_=ie((function e(t){ne(this,e),this.key=t})),K_=function(){function e(t,n){ne(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Bm(),this.mutatedKeys=Bm(),this.Lu=Hy(t),this.Uu=new S_(this.Lu)}return ie(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new T_,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ky(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Oi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bp()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new C_(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new T_,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Bm(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new W_(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new B_(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=Bm();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return C_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),G_=ie((function e(t,n,r){ne(this,e),this.query=t,this.targetId=n,this.view=r})),H_=ie((function e(t){ne(this,e),this.key=t,this.Xu=!1})),Q_=function(){function e(t,n,r,i,a,o){ne(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Pm((function(e){return By(e)}),zy),this.ec=new Map,this.nc=new Set,this.sc=new wv(Kp.comparator),this.ic=new Map,this.rc=new Cb,this.oc={},this.uc=new Map,this.cc=ib.Rn(),this.onlineState="Unknown",this.ac=void 0}return ie(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function $_(e,t){return Y_.apply(this,arguments)}function Y_(){return Y_=ee(X().mark((function e(t,n){var r,i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=zx(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,tw(r.localStore,Uy(n));case 8:return u=e.sent,r.isPrimaryClient&&qw(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,J_(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Y_.apply(this,arguments)}function J_(e,t,n,r){return X_.apply(this,arguments)}function X_(){return X_=ee(X().mark((function e(t,n,r,i){var a,o,u,s,c,l;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=ee(X().mark((function e(t,n,r,i){var a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Oi,!e.t0){e.next=6;break}return e.next=5,iw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(gx(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,iw(t.localStore,n,!0);case 3:return a=e.sent,o=new K_(n,a.ji),u=o.Ku(a.documents),s=Hm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),gx(t,r,c.zu),l=new G_(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),X_.apply(this,arguments)}function Z_(e,t){return ex.apply(this,arguments)}function ex(){return ex=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_p(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!zy(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,nw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),zw(r.remoteStore,i.targetId),yx(r,i.targetId)})).catch(rv);case 9:e.next=14;break;case 11:return yx(r,i.targetId),e.next=14,nw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),ex.apply(this,arguments)}function tx(e,t,n){return nx.apply(this,arguments)}function nx(){return nx=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bx(t),e.prev=1,e.next=4,function(e,t){var n,r,i=_p(e),a=Vp.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Bm());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Om(),s=Bm();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=ae(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=gm(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new wm(c.key,l,cy(l.value.mapValue),hm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Mm(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new wv(Lp)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,wx(i,a.changes);case 9:return e.next=11,i_(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=E_(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),nx.apply(this,arguments)}function rx(e,t){return ix.apply(this,arguments)}function ix(){return ix=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_p(t),e.prev=1,e.next=4,Xb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(wp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?wp(n.Xu):e.removedDocuments.size>0&&(wp(n.Xu),n.Xu=!1))})),e.next=8,wx(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,rv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),ix.apply(this,arguments)}function ax(e,t,n){var r=_p(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=_p(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ae(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&M_(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ox(e,t,n){return ux.apply(this,arguments)}function ux(){return ux=ee(X().mark((function e(t,n,r){var i,a,o,u,s,c;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=_p(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new wv(Kp.comparator)).insert(o,ly.newNoDocument(o,Up.min())),s=Bm().add(o),c=new Gm(Up.min(),new Map,new Iv(Lp),u,s),e.next=9,rx(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),bx(i),e.next=16;break;case 14:return e.next=16,nw(i.localStore,n,!1).then((function(){return yx(i,n,r)})).catch(rv);case 16:case"end":return e.stop()}}),e)}))),ux.apply(this,arguments)}function sx(e,t){return cx.apply(this,arguments)}function cx(){return cx=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_p(t),i=n.batch.batchId,e.prev=1,e.next=4,Yb(r.localStore,n);case 4:return a=e.sent,vx(r,i,null),px(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,wx(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,rv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),cx.apply(this,arguments)}function lx(e,t,n){return fx.apply(this,arguments)}function fx(){return fx=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_p(t),e.prev=1,e.next=4,function(e,t){var n=_p(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return wp(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,vx(i,n,r),px(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,wx(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,rv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),fx.apply(this,arguments)}function hx(e,t){return dx.apply(this,arguments)}function dx(){return dx=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hw((r=_p(t)).remoteStore)||yp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=_p(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=E_(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),dx.apply(this,arguments)}function px(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function vx(e,t,n){var r=_p(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function yx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ae(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||mx(e,t)}))}function mx(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(zw(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),bx(e))}function gx(e,t,n){var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof B_?(e.rc.addReference(a.key,t),kx(e,a)):a instanceof W_?(yp("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||mx(e,a.key)):bp()}}catch(o){i.e(o)}finally{i.f()}}function kx(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(yp("SyncEngine","New document in limbo: "+n),e.nc.add(r),bx(e))}function bx(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new Kp(zp.fromString(t)),r=e.cc.next();e.ic.set(r,new H_(n)),e.sc=e.sc.insert(n,r),qw(e.remoteStore,new fk(Uy(Fy(n.path)),r,2,mv.ot))}}function wx(e,t,n){return _x.apply(this,arguments)}function _x(){return _x=ee(X().mark((function e(t,n,r){var i,a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_p(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Wb.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=ee(X().mark((function e(t,n){var r,i,a,o,u,s,c,l;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_p(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return av.forEach(n,(function(t){return av.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return av.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),lv(e.t0)){e.next=10;break}throw e.t0;case 10:yp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ae(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),_x.apply(this,arguments)}function xx(e,t){return Ix.apply(this,arguments)}function Ix(){return Ix=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=_p(t)).currentUser.isEqual(n)){e.next=11;break}return yp("SyncEngine","User change. New user:",n.toKey()),e.next=5,Qb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new Ip(xp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,wx(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),Ix.apply(this,arguments)}function Ex(e,t){var n=_p(e),r=n.ic.get(t);if(r&&r.Xu)return Bm().add(r.key);var i=Bm(),a=n.ec.get(t);if(!a)return i;var o,u=ae(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function Sx(e,t){return Tx.apply(this,arguments)}function Tx(){return Tx=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_p(t),e.next=3,iw(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&gx(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Cx(e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_p(t),e.abrupt("return",ow(r.localStore,n).then((function(e){return wx(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(e,t,n,r){return Dx.apply(this,arguments)}function Dx(){return Dx=ee(X().mark((function e(t,n,r,i){var a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_p(t),e.next=3,function(e,t){var n=_p(e),r=_p(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):av.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,i_(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(vx(a,n,i||null),px(a,n),function(e,t){_p(_p(e).mutationQueue).In(t)}(a.localStore,n)):bp();case 11:return e.next=13,wx(a,o);case 13:e.next=16;break;case 15:yp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Dx.apply(this,arguments)}function Px(e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=ee(X().mark((function e(t,n){var r,i,a,o,u,s,c,l;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zx(r=_p(t)),Bx(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Ox(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,b_(r.remoteStore,!0);case 9:o=ae(a);try{for(o.s();!(u=o.n()).done;)s=u.value,qw(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return yx(r,t),nw(r.localStore,t,!0)})),zw(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Ox(r,c);case 21:return function(e){var t=_p(e);t.ic.forEach((function(e,n){zw(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new wv(Kp.comparator)}(r),r.ac=!1,e.next=25,b_(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}function Ox(e,t,n){return Fx.apply(this,arguments)}function Fx(){return Fx=ee(X().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=_p(t),a=[],o=[],u=ae(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,tw(i.localStore,Uy(f[0]));case 11:l=e.sent,h=ae(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,Sx(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,aw(i.localStore,c);case 36:return m=e.sent,e.next=39,tw(i.localStore,m);case 39:return l=e.sent,e.next=42,J_(i,Lx(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Fx.apply(this,arguments)}function Lx(e){return Oy(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Mx(e){var t=_p(e);return _p(_p(t.localStore).persistence).Ri()}function jx(e,t,n,r){return Vx.apply(this,arguments)}function Vx(){return Vx=ee(X().mark((function e(t,n,r,i){var a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=_p(t)).ac){e.next=3;break}return e.abrupt("return",void yp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,ow(a.localStore,Gy(o[0]));case 10:return u=e.sent,s=Gm.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,wx(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,nw(a.localStore,n,!0);case 17:return yx(a,n,i),e.abrupt("break",20);case 19:bp();case 20:case"end":return e.stop()}}),e)}))),Vx.apply(this,arguments)}function Ux(e,t,n){return qx.apply(this,arguments)}function qx(){return qx=ee(X().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=zx(t)).ac){e.next=45;break}a=ae(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return yp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,aw(i.localStore,u);case 12:return s=e.sent,e.next=15,tw(i.localStore,s);case 15:return c=e.sent,e.next=18,J_(i,Lx(s),c.targetId,!1);case 18:qw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ae(r),e.prev=30,h=X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,nw(i.localStore,t,!1).then((function(){zw(i.remoteStore,t),yx(i,t)})).catch(rv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),qx.apply(this,arguments)}function zx(e){var t=_p(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ex.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ox.bind(null,t),t.Zu.Go=F_.bind(null,t.eventManager),t.Zu.lc=L_.bind(null,t.eventManager),t}function Bx(e){var t=_p(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lx.bind(null,t),t}function Wx(e,t,n){var r=_p(e);(function(){var e=ee(X().mark((function e(t,n,r){var i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=_p(e),r=ug(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(z_(i)),a=new q_(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,wx(t,s.Mu,void 0);case 31:return e.next=33,function(e,t){var n=_p(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(gp("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Kx=function(){function e(){ne(this,e),this.synchronizeTabs=!1}return ie(e,[{key:"initialize",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=Nw(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return Hb(this.persistence,new Kb,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new Ob(Lb.Ms,this.wt)}},{key:"dc",value:function(e){return new ww}},{key:"terminate",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Gx=function(e){se(n,e);var t=he(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return ie(n,[{key:"initialize",value:function(){var e=ee(X().mark((function e(t){var r=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn(ce(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,Bx(this.yc.syncEngine);case 6:return e.next=8,i_(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return Hb(this.persistence,new Kb,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new fb(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new yv(t,this.persistence);return new vv(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=Bb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Yk.withCacheSize(this.cacheSizeBytes):Yk.DEFAULT;return new Ub(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Tw(),Cw(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new ww}}]),n}(Kx),Hx=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ie(n,[{key:"initialize",value:function(){var e=ee(X().mark((function e(t){var r,i=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn(ce(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof bw,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:Ax.bind(null,r),Or:jx.bind(null,r),Mr:Ux.bind(null,r),Ri:Mx.bind(null,r),Nr:Cx.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Px(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=Tw();if(!bw.V(t))throw new Ip(xp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Bb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Gx),Qx=function(){function e(){ne(this,e)}return ie(e,[{key:"initialize",value:function(){var e=ee(X().mark((function e(t,n){var r=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ax(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=xx.bind(null,this.syncEngine),e.next=12,b_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new A_}},{key:"createDatastore",value:function(e){var t,n=Nw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Sw(t));return function(e,t,n,r){return new Ow(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ax(o.syncEngine,e,0)},a=xw.V()?new xw:new _w,new Lw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Q_(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_p(t),yp("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,Vw(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function $x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ee(X().mark((function r(){var i;return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Yx=function(){function e(t){ne(this,e),this.observer=t,this.muted=!1}return ie(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Jx=function(){function e(t,n){var r=this;ne(this,e),this.Ec=t,this.wt=n,this.metadata=new Ep,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return ie(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=ee(X().mark((function e(){var t,n,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new V_(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=ee(X().mark((function e(){var t,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=ee(X().mark((function e(){var t,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Xx=function(){function e(t){ne(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ie(e,[{key:"lookup",value:function(){var e=ee(X().mark((function e(t){var n,r=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Ip(xp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ee(X().mark((function e(t,n){var r,i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_p(t),i=pg(r.wt)+"/documents",a={documents:n.map((function(e){return lg(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=gg(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());wp(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Tm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ee(X().mark((function e(){var t,n=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Kp.fromPath(t);n.mutations.push(new Cm(r,n.precondition(r)))})),e.next=7,function(){var e=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_p(t),i=pg(r.wt)+"/documents",a={writes:n.map((function(e){return kg(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw bp();t=Up.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ip(xp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?hm.updateTime(t):hm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Up.min()))throw new Ip(xp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hm.updateTime(t)}return hm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Zx=function(){function e(t,n,r,i,a){ne(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new Aw(this.asyncQueue,"transaction_retry")}return ie(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(ee(X().mark((function t(){var n,r;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Xx(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!jv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Am(t)}return!1}}]),e}(),eI=function(){function e(t,n,r,i){var a=this;ne(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=hp.UNAUTHENTICATED,this.clientId=Fp.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return yp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ie(e,[{key:"getConfiguration",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Ip(xp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ep;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ee(X().mark((function n(){var r;return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=E_(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function tI(e,t){return nI.apply(this,arguments)}function nI(){return nI=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),yp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Qb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),nI.apply(this,arguments)}function rI(e,t){return iI.apply(this,arguments)}function iI(){return iI=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,aI(t);case 3:return r=e.sent,yp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return g_(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return g_(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),iI.apply(this,arguments)}function aI(e){return oI.apply(this,arguments)}function oI(){return oI=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return yp("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,tI(t,new Kx);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),oI.apply(this,arguments)}function uI(e){return sI.apply(this,arguments)}function sI(){return sI=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return yp("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,rI(t,new Qx);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),sI.apply(this,arguments)}function cI(e){return aI(e).then((function(e){return e.persistence}))}function lI(e){return aI(e).then((function(e){return e.localStore}))}function fI(e){return uI(e).then((function(e){return e.remoteStore}))}function hI(e){return uI(e).then((function(e){return e.syncEngine}))}function dI(e){return pI.apply(this,arguments)}function pI(){return pI=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=$_.bind(null,n.syncEngine),r.onUnlisten=Z_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),pI.apply(this,arguments)}function vI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ep;return e.asyncQueue.enqueueAndForget(ee(X().mark((function i(){return X().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Yx({next:function(a){t.enqueueAndForget((function(){return R_(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Ip(xp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Ip(xp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new j_(Fy(n.path),a,{includeMetadataChanges:!0,Du:!0});return D_(e,o)},i.next=3,dI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function yI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ep;return e.asyncQueue.enqueueAndForget(ee(X().mark((function i(){return X().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Yx({next:function(n){t.enqueueAndForget((function(){return R_(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Ip(xp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new j_(n,a,{includeMetadataChanges:!0,Du:!0});return D_(e,o)},i.next=3,dI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var mI=new Map;function gI(e,t,n){if(!n)throw new Ip(xp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function kI(e,t,n,r){if(!0===t&&!0===r)throw new Ip(xp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function bI(e){if(!Kp.isDocumentKey(e))throw new Ip(xp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function wI(e){if(Kp.isDocumentKey(e))throw new Ip(xp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function _I(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":bp()}function xI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ip(xp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=_I(e);throw new Ip(xp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function II(e,t){if(t<=0)throw new Ip(xp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var EI=function(){function e(t){var n;if(ne(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Ip(xp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ip(xp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,kI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ie(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),SI=function(){function e(t,n,r){ne(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EI({}),this._settingsFrozen=!1,t instanceof Mv?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ip(xp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mv(e.options.projectId)}(t))}return ie(e,[{key:"app",get:function(){if(!this._app)throw new Ip(xp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Ip(xp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Tp;switch(e.type){case"gapi":var t=e.client;return wp(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Dp(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ip(xp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=mI.get(e);t&&(yp("ComponentProvider","Removing Datastore"),mI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function TI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=xI(e,SI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&gp("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=hp.MOCK_USER;else{o=Te(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Ip(xp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new hp(s)}e._authCredentials=new Cp(new Sp(o,u))}}var CI=function(){function e(t,n,r){ne(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ie(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new AI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),NI=function(){function e(t,n,r){ne(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ie(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),AI=function(e){se(n,e);var t=he(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this,e,r,Fy(i)))._path=i,a.type="collection",a}return ie(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new CI(this.firestore,null,new Kp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(NI);function DI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=it(e),gI("collection","path",t),e instanceof SI){var a=zp.fromString.apply(zp,[t].concat(r));return wI(a),new AI(e,null,a)}if(!(e instanceof CI||e instanceof AI))throw new Ip(xp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(zp.fromString.apply(zp,[t].concat(r)));return wI(o),new AI(e.firestore,null,o)}function PI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=it(e),1===arguments.length&&(t=Fp.I()),gI("doc","path",t),e instanceof SI){var a=zp.fromString.apply(zp,[t].concat(r));return bI(a),new CI(e,null,new Kp(a))}if(!(e instanceof CI||e instanceof AI))throw new Ip(xp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(zp.fromString.apply(zp,[t].concat(r)));return bI(o),new CI(e.firestore,e instanceof AI?e.converter:null,new Kp(o))}function RI(e,t){return e=it(e),t=it(t),(e instanceof CI||e instanceof AI)&&(t instanceof CI||t instanceof AI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function OI(e,t){return e=it(e),t=it(t),e instanceof NI&&t instanceof NI&&e.firestore===t.firestore&&zy(e._query,t._query)&&e.converter===t.converter}var FI=function(){function e(){var t=this;ne(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Aw(this,"async_queue_retry"),this.Kc=function(){var e=Cw();e&&yp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=Cw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return ie(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=Cw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new Ep;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=ee(X().mark((function e(){var t=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),lv(e.t0)){e.next=12;break}throw e.t0;case 12:yp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw mp("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=I_.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&bp()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=ae(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ae(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function LI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ae(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var MI=function(){function e(){ne(this,e),this._progressObserver={},this._taskCompletionResolver=new Ep,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ie(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),jI=function(e){se(n,e);var t=he(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new FI,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return ie(n,[{key:"_terminate",value:function(){return this._firestoreClient||UI(this),this._firestoreClient.terminate()}}]),n}(SI);function VI(e){return e._firestoreClient||UI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function UI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Lv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new eI(e._authCredentials,e._appCheckCredentials,e._queue,r)}function qI(e,t,n){var r=new Ep;return e.asyncQueue.enqueue(ee(X().mark((function i(){var a;return X().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,tI(e,n);case 3:return i.next=5,rI(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===xp.FAILED_PRECONDITION||e.code===xp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function zI(e){return function(e){return e.asyncQueue.enqueue(ee(X().mark((function t(){var n,r;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cI(e);case 2:return n=t.sent,t.next=5,fI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=_p(e);return t.lu.delete(0),Mw(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(VI(e=xI(e,jI)))}function BI(e){return function(e){return e.asyncQueue.enqueue(ee(X().mark((function t(){var n,r;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cI(e);case 2:return n=t.sent,t.next=5,fI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=_p(t)).lu.add(0),e.next=4,Vw(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(VI(e=xI(e,jI)))}function WI(e,t){var n=VI(e=xI(e,jI)),r=new MI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Jx(e,t)}(function(e,t){if(e instanceof Uint8Array)return $x(e,t);if(e instanceof ArrayBuffer)return $x(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Nw(t));e.asyncQueue.enqueueAndForget(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Wx,t.next=3,hI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function KI(e,t){return function(e,t){return e.asyncQueue.enqueue(ee(X().mark((function n(){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=_p(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,lI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(VI(e=xI(e,jI)),t).then((function(t){return t?new NI(e,null,t.query):null}))}function GI(e){if(e._initialized||e._terminated)throw new Ip(xp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var HI=function(){function e(){ne(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Ip(xp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wp(n)}return ie(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var QI=function(){function e(t){ne(this,e),this._byteString=t}return ie(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Cv.fromBase64String(t))}catch(t){throw new Ip(xp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Cv.fromUint8Array(t))}}]),e}(),$I=ie((function e(t){ne(this,e),this._methodName=t})),YI=function(){function e(t,n){if(ne(this,e),!isFinite(t)||t<-90||t>90)throw new Ip(xp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ip(xp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ie(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Lp(this._lat,e._lat)||Lp(this._long,e._long)}}]),e}(),JI=/^__.*__$/,XI=function(){function e(t,n,r){ne(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ie(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new wm(e,this.data,this.fieldMask,t,this.fieldTransforms):new bm(e,this.data,t,this.fieldTransforms)}}]),e}(),ZI=function(){function e(t,n,r){ne(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ie(e,[{key:"toMutation",value:function(e,t){return new wm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function eE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bp()}}var tE=function(){function e(t,n,r,i,a,o){ne(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ie(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return wE(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(eE(this.Zc)&&JI.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),nE=function(){function e(t,n,r){ne(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||Nw(t)}return ie(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new tE({Zc:e,methodName:t,ca:n,path:Wp.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function rE(e){var t=e._freezeSettings(),n=Nw(e._databaseId);return new nE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function iE(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);mE("Data must be an object, but it was:",o,r);var u,s,c=vE(r,o);if(a.merge)u=new Tv(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=ae(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=gE(t,d,n);if(!o.contains(p))throw new Ip(xp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));_E(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Tv(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new XI(new sy(c),u,s)}var aE=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($I);function oE(e,t,n){return new tE({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var uE=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"_toFieldTransform",value:function(e){return new lm(e.path,new nm)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($I),sE=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e)).ha=r,i}return ie(n,[{key:"_toFieldTransform",value:function(e){var t=oE(this,e,!0),n=this.ha.map((function(e){return pE(e,t)})),r=new rm(n);return new lm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}($I),cE=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e)).ha=r,i}return ie(n,[{key:"_toFieldTransform",value:function(e){var t=oE(this,e,!0),n=this.ha.map((function(e){return pE(e,t)})),r=new am(n);return new lm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}($I),lE=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e)).la=r,i}return ie(n,[{key:"_toFieldTransform",value:function(e){var t=new um(e.wt,Jy(e.wt,this.la));return new lm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}($I);function fE(e,t,n,r){var i=e.aa(1,t,n);mE("Data must be an object, but it was:",i,r);var a=[],o=sy.empty();kv(r,(function(e,r){var u=bE(t,e,n);r=it(r);var s=i.ia(u);if(r instanceof aE)a.push(u);else{var c=pE(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Tv(a);return new ZI(o,u,i.fieldTransforms)}function hE(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[gE(t,r,n)],s=[i];if(a.length%2!=0)throw new Ip(xp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(gE(t,a[c])),s.push(a[c+1]);for(var l=[],f=sy.empty(),h=u.length-1;h>=0;--h)if(!_E(l,u[h])){var d=u[h],p=s[h];p=it(p);var v=o.ia(d);if(p instanceof aE)l.push(d);else{var y=pE(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Tv(l);return new ZI(f,m,o.fieldTransforms)}function dE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return pE(n,e.aa(r?4:3,t))}function pE(e,t){if(yE(e=it(e)))return mE("Unsupported field value:",t,e),vE(e,t);if(e instanceof $I)return function(e,t){if(!eE(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ae(e);try{for(a.s();!(n=a.n()).done;){var o=pE(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=it(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Jy(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Vp.fromDate(e);return{timestampValue:ig(t.wt,n)}}if(e instanceof Vp){var r=new Vp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ig(t.wt,r)}}if(e instanceof YI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof QI)return{bytesValue:ag(t.wt,e._byteString)};if(e instanceof CI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:sg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(_I(e)))}(e,t)}function vE(e,t){var n={};return bv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):kv(e,(function(e,r){var i=pE(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function yE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Vp||e instanceof YI||e instanceof QI||e instanceof CI||e instanceof $I)}function mE(e,t,n){if(!yE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=_I(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function gE(e,t,n){if((t=it(t))instanceof HI)return t._internalPath;if("string"==typeof t)return bE(e,t);throw wE("Field path arguments must be of type string or ",e,!1,void 0,n)}var kE=new RegExp("[~\\*/\\[\\]]");function bE(e,t,n){if(t.search(kE)>=0)throw wE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return de(HI,ot(t.split(".")))._internalPath}catch(r){throw wE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function wE(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Ip(xp.INVALID_ARGUMENT,u+e+s)}function _E(e,t){return e.some((function(e){return e.isEqual(t)}))}var xE=function(){function e(t,n,r,i,a){ne(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ie(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new CI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new IE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(EE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),IE=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"data",value:function(){return Fn(ce(n.prototype),"data",this).call(this)}}]),n}(xE);function EE(e,t){return"string"==typeof t?bE(e,t):t instanceof HI?t._internalPath:t._delegate._internalPath}var SE=function(){function e(t,n){ne(this,e),this.hasPendingWrites=t,this.fromCache=n}return ie(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),TE=function(e){se(n,e);var t=he(n);function n(e,r,i,a,o,u){var s;return ne(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ie(n,[{key:"exists",value:function(){return Fn(ce(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new CE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(EE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(xE),CE=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fn(ce(n.prototype),"data",this).call(this,e)}}]),n}(TE),NE=function(){function e(t,n,r,i){ne(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new SE(i.hasPendingWrites,i.fromCache),this.query=r}return ie(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new CE(n._firestore,n._userDataWriter,r.key,r,new SE(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ip(xp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new CE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new SE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new CE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new SE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:AE(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function AE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bp()}}function DE(e,t){return e instanceof TE&&t instanceof TE?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof NE&&t instanceof NE&&e._firestore===t._firestore&&OI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function PE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ip(xp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var RE=ie((function e(){ne(this,e)}));function OE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var FE=function(e){se(n,e);var t=he(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return ie(n,[{key:"_apply",value:function(e){var t=rE(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Ip(xp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){GE(o,a);var s,c=[],l=ae(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(KE(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=KE(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||GE(o,a),u=dE(n,"where",o,"in"===a||"not-in"===a);var h=ky.create(i,a,u);return function(e,t){if(t.ht()){var n=My(e);if(null!==n&&!n.isEqual(t.field))throw new Ip(xp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Ly(e);null!==r&&HE(e,t.field,r)}var i=function(e,t){var n,r=ae(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Ip(xp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ip(xp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new NI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Ry(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(RE);var LE=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return ie(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Ip(xp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ip(xp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ny(t,n);return function(e,t){if(null===Ly(e)){var n=My(e);null!==n&&HE(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new NI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ry(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(RE);var ME=function(e){se(n,e);var t=he(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return ie(n,[{key:"_apply",value:function(e){return new NI(e.firestore,e.converter,qy(e._query,this.ma,this.ga))}}]),n}(RE);var jE=function(e){se(n,e);var t=he(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return ie(n,[{key:"_apply",value:function(e){var t=WE(e,this.type,this.ya,this.pa);return new NI(e.firestore,e.converter,function(e,t){return new Ry(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(RE);function VE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jE("startAt",t,!0)}function UE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jE("startAfter",t,!1)}var qE=function(e){se(n,e);var t=he(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return ie(n,[{key:"_apply",value:function(e){var t=WE(e,this.type,this.ya,this.pa);return new NI(e.firestore,e.converter,function(e,t){return new Ry(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(RE);function zE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qE("endBefore",t,!1)}function BE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qE("endAt",t,!0)}function WE(e,t,n,r){if(n[0]=it(n[0]),n[0]instanceof xE)return function(e,t,n,r,i){if(!r)throw new Ip(xp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=ae(Vy(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Yv(t,r.key));else{var c=r.data.field(s.field);if(Rv(c))throw new Ip(xp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Ip(xp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Cy(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=rE(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Ip(xp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Ip(xp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!jy(e)&&-1!==c.indexOf("/"))throw new Ip(xp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(zp.fromString(c));if(!Kp.isDocumentKey(l))throw new Ip(xp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Kp(l);u.push(Yv(t,f))}else{var h=dE(n,r,c);u.push(h)}}return new Cy(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function KE(e,t,n){if("string"==typeof(n=it(n))){if(""===n)throw new Ip(xp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jy(t)&&-1!==n.indexOf("/"))throw new Ip(xp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(zp.fromString(n));if(!Kp.isDocumentKey(r))throw new Ip(xp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Yv(e,new Kp(r))}if(n instanceof CI)return Yv(e,n._key);throw new Ip(xp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(_I(n),"."))}function GE(e,t){if(!Array.isArray(e)||0===e.length)throw new Ip(xp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Ip(xp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function HE(e,t,n){if(!n.isEqual(t))throw new Ip(xp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var QE={maxAttempts:5},$E=function(){function e(){ne(this,e)}return ie(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Bv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw bp()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return kv(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new YI(Dv(e.latitude),Dv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ov(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Av(e);return new Vp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=zp.fromString(e);wp(Pg(n));var r=new Mv(n.get(1),n.get(3)),i=new Kp(n.popFirst(5));return r.isEqual(t)||mp("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function YE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var JE=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this)).firestore=e,r}return ie(n,[{key:"convertBytes",value:function(e){return new QI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new CI(this.firestore,null,t)}}]),n}($E),XE=function(){function e(t,n){ne(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=rE(t)}return ie(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=ZE(e,this._firestore),i=YE(r.converter,t,n),a=iE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,hm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=ZE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=it(t))||t instanceof HI?hE(this._dataReader,"WriteBatch.update",i._key,t,n,o):fE(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,hm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=ZE(e,this._firestore);return this._mutations=this._mutations.concat(new Tm(t._key,hm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Ip(xp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function ZE(e,t){if((e=it(e)).firestore!==t)throw new Ip(xp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function eS(e){e=xI(e,CI);var t=xI(e.firestore,jI);return vI(VI(t),e._key).then((function(n){return cS(t,e,n)}))}var tS=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this)).firestore=e,r}return ie(n,[{key:"convertBytes",value:function(e){return new QI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new CI(this.firestore,null,t)}}]),n}($E);function nS(e){e=xI(e,CI);var t=xI(e.firestore,jI),n=VI(t),r=new tS(t);return function(e,t){var n=new Ep;return e.asyncQueue.enqueueAndForget(ee(X().mark((function r(){return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=_p(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Ip(xp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=E_(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,lI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new TE(t,r,e._key,n,new SE(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function rS(e){e=xI(e,NI);var t=xI(e.firestore,jI),n=VI(t),r=new tS(t);return function(e,t){var n=new Ep;return e.asyncQueue.enqueueAndForget(ee(X().mark((function r(){return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ee(X().mark((function e(t,n,r){var i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,iw(t,n,!0);case 3:i=e.sent,a=new K_(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=E_(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,lI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new NE(t,r,e,n)}))}function iS(e,t,n){e=xI(e,CI);var r=xI(e.firestore,jI),i=YE(e.converter,t,n);return sS(r,[iE(rE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,hm.none())])}function aS(e,t,n){e=xI(e,CI);for(var r=xI(e.firestore,jI),i=rE(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return sS(r,[("string"==typeof(t=it(t))||t instanceof HI?hE(i,"updateDoc",e._key,t,n,o):fE(i,"updateDoc",e._key,t)).toMutation(e._key,hm.exists(!0))])}function oS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=it(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||LI(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(LI(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof CI)l=xI(e.firestore,jI),f=Fy(e._key.path),c={next:function(t){n[s]&&n[s](cS(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=xI(e,NI);l=xI(p.firestore,jI),f=p._query;var v=new tS(l);c={next:function(e){n[s]&&n[s](new NE(l,v,p,e))},error:n[s+1],complete:n[s+2]},PE(e._query)}return function(e,t,n,r){var i=new Yx(r),a=new j_(t,i,n);return e.asyncQueue.enqueueAndForget(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=D_,t.next=3,dI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=R_,t.next=3,dI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(VI(l),f,h,c)}function uS(e,t){return function(e,t){var n=new Yx(t);return e.asyncQueue.enqueueAndForget(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){_p(e).Tu.add(t),t.next()},t.next=3,dI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){_p(e).Tu.delete(t)},t.next=3,dI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(VI(e=xI(e,jI)),LI(t)?t:{next:t})}function sS(e,t){return function(e,t){var n=new Ep;return e.asyncQueue.enqueueAndForget(ee(X().mark((function r(){return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=tx,r.next=3,hI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(VI(e),t)}function cS(e,t,n){var r=n.docs.get(t._key),i=new tS(e);return new TE(e,i,t._key,r,new SE(n.hasPendingWrites,n.fromCache),t.converter)}var lS=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r))._firestore=e,i}return ie(n,[{key:"get",value:function(e){var t=this,r=ZE(e,this._firestore),i=new tS(this._firestore);return Fn(ce(n.prototype),"get",this).call(this,e).then((function(e){return new TE(t._firestore,i,r._key,e._document,new SE(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){ne(this,e),this._firestore=t,this._transaction=n,this._dataReader=rE(t)}return ie(e,[{key:"get",value:function(e){var t=this,n=ZE(e,this._firestore),r=new JE(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return bp();var i=e[0];if(i.isFoundDocument())return new xE(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new xE(t._firestore,r,n._key,null,n.converter);throw bp()}))}},{key:"set",value:function(e,t,n){var r=ZE(e,this._firestore),i=YE(r.converter,t,n),a=iE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=ZE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=it(t))||t instanceof HI?hE(this._dataReader,"Transaction.update",i._key,t,n,o):fE(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=ZE(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function fS(e,t,n){e=xI(e,jI);var r=Object.assign(Object.assign({},QE),n);return function(e){if(e.maxAttempts<1)throw new Ip(xp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Ep;return e.asyncQueue.enqueueAndForget(ee(X().mark((function i(){var a;return X().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return uI(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new Zx(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(VI(e),(function(n){return t(new lS(e,n))}),r)}function hS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sE("arrayUnion",t)}function dS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cE("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){dp=e}(nn),$t(new ut("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new jI(i,new Np(e.getProvider("auth-internal")),new Rp(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),cn(fp,"3.4.13",e),cn(fp,"3.4.13","esm2017")}();function pS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ip("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function vS(){if("undefined"===typeof Uint8Array)throw new Ip("unimplemented","Uint8Arrays are not available in this environment.")}function yS(){if("undefined"==typeof atob)throw new Ip("unimplemented","Blobs are unavailable in Firestore in this environment.")}var mS=function(){function e(t){ne(this,e),this._delegate=t}return ie(e,[{key:"toBase64",value:function(){return yS(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return vS(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return yS(),new e(QI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return vS(),new e(QI.fromUint8Array(t))}}]),e}();function gS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ae(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var kS=function(){function e(){ne(this,e)}return ie(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){GI(e=xI(e,jI));var n=VI(e),r=e._freezeSettings(),i=new Qx;return qI(n,i,new Gx(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){GI(e=xI(e,jI));var t=VI(e),n=e._freezeSettings(),r=new Qx;return qI(t,r,new Hx(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Ip(xp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Ep;return e._queue.enqueueAndForgetEvenWhileRestricted(ee(X().mark((function n(){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(uv.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,uv.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Bb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),bS=function(){function e(t,n,r){var i=this;ne(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Mv||(this._appCompat=t)}return ie(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||gp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};TI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return zI(this._delegate)}},{key:"disableNetwork",value:function(){return BI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&kI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Ep;return e.asyncQueue.enqueueAndForget(ee(X().mark((function n(){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=hx,n.next=3,hI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(VI(e=xI(e,jI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return uS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Ip("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new OS(this,DI(this._delegate,e))}catch(t){throw SS(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new ES(this,PI(this._delegate,e))}catch(t){throw SS(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new DS(this,function(e,t){if(e=xI(e,SI),gI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ip(xp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new NI(e,null,function(e){return new Ry(zp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw SS(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return fS(this._delegate,(function(n){return e(new _S(t,n))}))}},{key:"batch",value:function(){var e=this;return VI(this._delegate),new xS(new XE(this._delegate,(function(t){return sS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return WI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return KI(this._delegate,e).then((function(e){return e?new DS(t,e):null}))}}]),e}(),wS=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this)).firestore=e,r}return ie(n,[{key:"convertBytes",value:function(e){return new mS(new QI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return ES.forKey(t,this.firestore,null)}}]),n}($E);var _S=function(){function e(t,n){ne(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new wS(t)}return ie(e,[{key:"get",value:function(e){var t=this,n=FS(e);return this._delegate.get(n).then((function(e){return new NS(t._firestore,new TE(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=FS(e);return n?(pS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=FS(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=FS(e);return this._delegate.delete(t),this}}]),e}(),xS=function(){function e(t){ne(this,e),this._delegate=t}return ie(e,[{key:"set",value:function(e,t,n){var r=FS(e);return n?(pS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=FS(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=FS(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),IS=function(){function e(t,n,r){ne(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ie(e,[{key:"fromFirestore",value:function(e,t){var n=new CE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new AS(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new wS(t),n),i.set(n,a)),a}}]),e}();IS.INSTANCES=new WeakMap;var ES=function(){function e(t,n){ne(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new wS(t)}return ie(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new OS(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new OS(this.firestore,DI(this._delegate,e))}catch(t){throw SS(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=it(e))instanceof CI&&RI(this._delegate,e)}},{key:"set",value:function(e,t){t=pS("DocumentReference.set",t);try{return t?iS(this._delegate,e,t):iS(this._delegate,e)}catch(n){throw SS(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?aS(this._delegate,e):aS.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw SS(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return sS(xI(e.firestore,jI),[new Tm(e._key,hm.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=TS(n),a=CS(n,(function(t){return new NS(e.firestore,new TE(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return oS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?nS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=xI(e,CI);var t=xI(e.firestore,jI);return vI(VI(t),e._key,{source:"server"}).then((function(n){return cS(t,e,n)}))}(this._delegate):eS(this._delegate),t.then((function(e){return new NS(n.firestore,new TE(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(IS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Ip("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new CI(n._delegate,r,new Kp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new CI(n._delegate,r,t))}}]),e}();function SS(e,t,n){return e.message=e.message.replace(t,n),e}function TS(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!gS(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function CS(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=gS(e[0])?e[0]:gS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var NS=function(){function e(t,n){ne(this,e),this._firestore=t,this._delegate=n}return ie(e,[{key:"ref",get:function(){return new ES(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return DE(this._delegate,e._delegate)}}]),e}(),AS=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||bp()}(void 0!==t),t}}]),n}(NS),DS=function(){function e(t,n){ne(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new wS(t)}return ie(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,OE(this._delegate,function(e,t,n){var r=t,i=EE("where",e);return new FE(i,r,n)}(t,n,r)))}catch(i){throw SS(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,OE(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=EE("orderBy",e);return new LE(n,t)}(t,n)))}catch(r){throw SS(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,OE(this._delegate,function(e){return II("limit",e),new ME("limit",e,"F")}(t)))}catch(n){throw SS(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,OE(this._delegate,function(e){return II("limitToLast",e),new ME("limitToLast",e,"L")}(t)))}catch(n){throw SS(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,OE(this._delegate,VE.apply(void 0,arguments)))}catch(t){throw SS(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,OE(this._delegate,UE.apply(void 0,arguments)))}catch(t){throw SS(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,OE(this._delegate,zE.apply(void 0,arguments)))}catch(t){throw SS(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,OE(this._delegate,BE.apply(void 0,arguments)))}catch(t){throw SS(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return OI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?rS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=xI(e,NI);var t=xI(e.firestore,jI),n=VI(t),r=new tS(t);return yI(n,e._query,{source:"server"}).then((function(n){return new NE(t,r,e,n)}))}(this._delegate):function(e){e=xI(e,NI);var t=xI(e.firestore,jI),n=VI(t),r=new tS(t);return PE(e._query),yI(n,e._query).then((function(n){return new NE(t,r,e,n)}))}(this._delegate),t.then((function(e){return new RS(n.firestore,new NE(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=TS(n),a=CS(n,(function(t){return new RS(e.firestore,new NE(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return oS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(IS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),PS=function(){function e(t,n){ne(this,e),this._firestore=t,this._delegate=n}return ie(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new AS(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),RS=function(){function e(t,n){ne(this,e),this._firestore=t,this._delegate=n}return ie(e,[{key:"query",get:function(){return new DS(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new AS(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new PS(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new AS(n._firestore,r))}))}},{key:"isEqual",value:function(e){return DE(this._delegate,e._delegate)}}]),e}(),OS=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ie(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new ES(this.firestore,e):null}},{key:"doc",value:function(e){try{return new ES(this.firestore,void 0===e?PI(this._delegate):PI(this._delegate,e))}catch(t){throw SS(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=xI(e.firestore,jI),r=PI(e),i=YE(e.converter,t);return sS(n,[iE(rE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,hm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new ES(t.firestore,e)}))}},{key:"isEqual",value:function(e){return RI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(IS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(DS);function FS(e){return xI(e,CI)}var LS=function(){function e(){ne(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=de(HI,n)}return ie(e,[{key:"isEqual",value:function(e){return(e=it(e))instanceof HI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Wp.keyField().canonicalString())}}]),e}(),MS=function(){function e(t){ne(this,e),this._delegate=t}return ie(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new uE("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new aE("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=hS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=dS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new lE("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),jS={Firestore:bS,GeoPoint:YI,Timestamp:Vp,Blob:mS,Transaction:_S,WriteBatch:xS,DocumentReference:ES,DocumentSnapshot:NS,Query:DS,QueryDocumentSnapshot:AS,QuerySnapshot:RS,CollectionReference:OS,FieldPath:LS,FieldValue:MS,setLogLevel:function(e){!function(e){pp.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ut("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},jS)))}(e,(function(e,t){return new bS(e,t,new kS)})),e.registerVersion("@firebase/firestore-compat","0.1.22")}(Rn);var VS="firebasestorage.googleapis.com",US=function(e){se(n,e);var t=he(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,qS(e),"Firebase Storage: ".concat(r," (").concat(qS(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(oe(i),n.prototype),i}return ie(n,[{key:"_codeEquals",value:function(e){return qS(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Le);function qS(e){return"storage/"+e}function zS(){return new US("unknown","An unknown error occurred, please check the error payload for server response.")}function BS(){return new US("canceled","User canceled the upload/download.")}function WS(e){return new US("invalid-argument",e)}function KS(){return new US("app-deleted","The Firebase app was deleted.")}var GS,HS=function(){function e(t,n){ne(this,e),this.bucket=t,this.path_=n}return ie(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new US("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===VS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new US("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),QS=function(){function e(t){ne(this,e),this.promise_=Promise.reject(t)}return ie(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function $S(e,t,n,r){if(r<t)throw WS("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw WS("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function YS(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(GS||(GS={}));var JS=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;ne(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return ie(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=zS();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?KS():BS());else i(new US("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new XS(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new XS(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===GS.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new XS(o,r))}else{var u=r.getErrorCode()===GS.ABORT;t(!1,new XS(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),XS=ie((function e(t,n,r){ne(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function ZS(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}var eT=function(){function e(t,n){ne(this,e),this._service=t,this._location=n instanceof HS?n:HS.makeFromUrl(n,t.host)}return ie(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new HS(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return ZS(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new HS(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new US("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function tT(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:HS.makeFromBucketSpec(n,e)}var nT=function(){function e(t,n,r,i,a){ne(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=VS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?HS.makeFromBucketSpec(i,this._host):tT(this._host,this.app.options)}return ie(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=HS.makeFromBucketSpec(this._url,e):this._bucket=tT(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){$S("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){$S("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=ee(X().mark((function e(){var t,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ee(X().mark((function e(){var t,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new eT(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new QS(KS());var a=function(e,t,n,r,i,a){var o=YS(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new JS(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),rT="@firebase/storage",iT="0.9.9",aT="storage";function oT(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new nT(r,i,a,n,nn)}$t(new ut(aT,oT,"PUBLIC").setMultipleInstances(!0)),cn(rT,iT,""),cn(rT,iT,"esm2017");var uT=Rn.initializeApp({apiKey:"AIzaSyAIOALSrr7KLm3eF6loiutcNZEi1xxX2_Y",authDomain:"quizio-422c4.firebaseapp.com",projectId:"quizio-422c4",storageBucket:"quizio-422c4.appspot.com",messagingSenderId:"1053908330872",appId:"1:1053908330872:web:ff8bcba2f02c45ec05408d",measurementId:"G-TGDQ4SSW6S",databaseURL:"https://quizio-422c4-default-rtdb.europe-west1.firebasedatabase.app/"}),sT=uT.auth(),cT=uT.firestore(),lT=new Rn.auth.GoogleAuthProvider,fT=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an(),t=arguments.length>1?arguments[1]:void 0,n=Yt(e=it(e),aT),r=n.getImmediate({identifier:t})}(uT),function(){var e=ee(X().mark((function e(){var t,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sT.signInWithPopup(lT);case 3:return t=e.sent,n=t.user,localStorage.localUID=n.uid,e.next=8,cT.collection("users").where("uid","==",n.uid).get();case 8:if(0!==e.sent.docs.length){e.next=12;break}return e.next=12,cT.collection("users/").doc(n.uid).set({uid:n.uid,name:n.displayName,authProvider:"google",email:n.email});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert(e.t0.message.replace("Firebase: ",""));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}()),hT=function(){var e=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sT.createUserWithEmailAndPassword(n,r);case 3:return i=e.sent,a=i.user,localStorage.localUID=a.uid,e.next=8,cT.collection("users/").doc(a.uid).set({uid:a.uid,name:t,authProvider:"local",email:n});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),alert(e.t0.message.replace("Firebase: ",""));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),dT=function(){var e=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sT.signInWithEmailAndPassword(t,n);case 3:r=e.sent,i=r.user,localStorage.localUID=i.uid,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.message.replace("Firebase: ",""));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),pT=function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sT.sendPasswordResetEmail(t);case 3:alert("Password reset link sent!"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message.replace("Firebase: ",""));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),vT=function(){sT.signOut()};function yT(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function mT(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var gT=function(){return gT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gT.apply(this,arguments)},kT=function(e){return{loading:void 0===e||null===e,value:e}},bT=function(e){var t=e?e():void 0,n=(0,r.useReducer)((function(e,t){switch(t.type){case"error":return gT(gT({},e),{error:t.error,loading:!1,value:void 0});case"reset":return kT(t.defaultValue);case"value":return gT(gT({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),kT(t)),i=n[0],a=n[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,r.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},wT=function(e,t){var n=bT((function(){return e.currentUser})),i=n.error,a=n.loading,o=n.setError,u=n.setValue,s=n.value;(0,r.useEffect)((function(){var n=function(e,t,n,r){return it(e).onAuthStateChanged(t,n,r)}(e,(function(e){return yT(void 0,void 0,void 0,(function(){var n;return mT(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o(n),[3,4];case 4:return u(e),[2]}}))}))}),o);return function(){n()}}),[e]);var c=[s,a,i];return(0,r.useMemo)((function(){return c}),c)},_T=n(184),xT=function(){var e=c(wT(sT),1)[0],t=c((0,r.useState)(),2),n=(t[0],t[1]),i=c((0,r.useState)(null),2),a=(i[0],i[1],localStorage.getItem("localUID")),o=function(){var e=ee(X().mark((function e(){var t,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=PI(cT,"users",a),e.prev=1,e.next=4,eS(t);case 4:r=e.sent,i=r.data(),n(i.name),localStorage.userName=i.name,localStorage.userRole=i.role,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("Error getting cached document:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){o()}),[]),(0,_T.jsxs)("div",{className:"navbar_container",children:[(0,_T.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css",integrity:"sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==",crossOrigin:"anonymous"}),(0,_T.jsxs)("div",{className:"logo",children:[(0,_T.jsx)("img",{className:"logo-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABkCAYAAAAR+rcWAAAACXBIWXMAAAsSAAALEgHS3X78AAAGeUlEQVR4nO2dy3HjRhCG20pAykByBFAVA1gqAtMRiI7AvPK03BOOpiIwlQEZgcUAUEVEYDEDMQK5BvpBD0CAQHcPHoPFX8WDtpZ4fOye7nn1/PL5+UldKwyiOyJ6JKIHfKp0IKKPZTx56/rZOwEYBpGBNSOiKcDdKi53BFADc7uMJ+8OH7VSrQEMg2gGaDMlsCoZoFsiWrcBs1GAcM0FEc2J6L6xG5VrT0SbZTzZNHWDRgBa4BYNW1tdGatcNQHSOcAwiFY9ApeXscjFMp4cXF3QGcAwiExA2HTkqlz9WMaTlYsLOQEIq/vu4oFaVGwCmjbQqACirTMR71t3HFQ6AaI4nxQDRC63bcBljWV84JO2VeZed/gEju9n9Ic0wIgAAp751VwEih2u9Va3ccf9p/j85uAZSAqRDdARvCStQM/hQ3Ed1ykTGyILoAN4R6QRW+H3r8pRCsWCWBsgfumDos1zljpcE55zo3BtE1imdZsTDsA3YbQ9ItI5S17rKAwiY4l/Cb9unvmxTvNyU/NhVkJ4MR6kVXhGy3iyJqInWBRX97DiSlVaIHoY/wgeIoYrqIKEVsp2+/eq9voqQEW71wt4qRQQjfU+XHuPKhde+A6Pvtz5gHfh6hbpVqlKLTAMIjO0/i/zhqwI1rbCIDLt4p+C2/5a1me+ZoGSlGPVV3j0ZYkLeAhXpSwKAcL6npk32SPy9V1zwfM9g8mFyixQYn2SB2td8JAXwX0LmVwAFFrfS9uzYUqtBPnhDFlJRkUWyI1WJ6HFdiZkCNzm5hYzihkVAeS64qZPKQtDa4EVXhhXBiDmbrnJpg+B40L40bmjQkE+mOQt8MJEK7TzrO3LS/LjZxhpATYyrteWEJG5eeHU/uMMEIMGLPdtcsa/RXHfITPOaFsg2327fnNHYnsRjC2RDfCReR2v3TcV2vAj82uFALkDpp2vzXMo7rucjS0BaJtkTR09j7556QAK3Le3Iy5CcQGex0hTgHWW1doaFECJN2GUW2yBQ2r/Uu2Z/z8ZWJBaoI993ypxrTBjgax5jz6POivEBZixwFFCr7oRpDDctsIXcb0qafZGC5RrBOhCI0ClRoBKjQCVGgHKlaQ9I0C5krRnBPi/LibN60gCUHQjD8QdUEl0I+gDNrHRxUd9ufDARpY14nZp5UFE0H/2QdymKRNEuAME3PFDH8RqmtL1QClA7lCOqMHtqzQjUilA7lDOoAAK3uccN6QAfd0fXCauBZ7nhG7y/1BXWAo3FHEBng0uAYgGUby8wWdhepKzqOpkzwnZaQzXCodigdwVuZk1QRqA9wPJB7mGkOFkA5SstvJia0OZ0I5zt7IVWyDaQe6av+eipf8eiWsAu/yC+nxXTmKFkk18nQuLxbm72i9WsxYBZC/999QKuXtbjkV7hzMAhUv/b32zQuFurMK11EWjMZJdR9/LNuP1VNyF5aeyLREXADE++Cp4by9W7CPycrui67LdWC53a35DpYzeyiqJwlGp9ZUCVFjhKl252VNtBVvZVtKaCQtBRDYPt+1jVMZ2f67rxlWbyEsBgrrElU1m/9YniGEQzYW1EioT7atzIqAvWQ8Y9AUi4P0t+OqPOitx60wqzYXVfzqHiIpLEni7unW+KgEioEgHDQzE97ZHbcyPFgbRVliWNOa8L6f4mKaYF6HQw9WI5kLKYrgn1PqqPVfOrR+4EXSBbDVWzxk9oY1ivkZUNEhSwVILkQBy7aLeAnoWC+VEl7jikrSGqguIqfZIcA91qukiUU9rqLqoy6+q9aWp4ttU7ehTyTTrQwMVg19RklTsBdo60nO4Yh/Lvl/TCeDUbbG6kjlcauPRsjczbTF3lQ24rKXf93Lwe2QATneaOj3NAanE2mFxbBfaYTyvkS26TZ0nMsVARJdraJwcNlClpk+0eUSO1vQxQNe0t0rNO7fCVs5UwoBCep5S1+4dp0ABVRVMujrVa2odJqA91UurI2AeOAcipOrbuXKUW/X1gL/bPiVnD6Ap1NJ2tBcAq4ToPsMwUxf55sk6u+4d3c7EUr0AaAuBaQ6gXZ/f9OQdQFsdwzQLLe+8BmjLOuWmLTd/XcaT+WAA2mqpzUwOKhgkQFu5HJRdZLJEifuSj0FEK4xgT5XtZuK+9DMCtGW1m9wFR09pt/CnBmgLrj61XL3MOs1Cy/NSvhFgiaxAlD+77gWnQiQaAdaU1X83M4lfXTsi+g9XW8wfnSXrdwAAAABJRU5ErkJggg=="}),(0,_T.jsxs)("div",{className:"logo-text",children:[(0,_T.jsx)("span",{children:"uiz"}),(0,_T.jsx)("span",{children:"io"})]})]}),(0,_T.jsxs)("div",{className:"page_list",children:[(0,_T.jsx)("div",{className:"nav_element_div",children:(0,_T.jsxs)(Y,{className:"nav_element",to:"/",children:[(0,_T.jsx)("i",{className:"fas fa-home nav_element_icon"}),"Home"]})}),(0,_T.jsx)("div",{className:"nav_element_div",children:(0,_T.jsxs)(Y,{className:"nav_element",to:"/about",children:[(0,_T.jsx)("i",{className:"fas fa-info-circle nav_element_icon"}),"About"]})}),e?(0,_T.jsx)("div",{className:"nav_element_div",children:(0,_T.jsxs)(Y,{className:"nav_element",to:"/dashboard",children:[(0,_T.jsx)("i",{className:"fas fa-user nav_element_icon"}),"Dashboard"]})}):null,e?null:(0,_T.jsx)("div",{className:"nav_element_div",children:(0,_T.jsxs)(Y,{className:"nav_element",to:"/dashboard",children:[(0,_T.jsx)("i",{className:"fas fa-sign-in-alt nav_element_icon"}),"Log In"]})})]}),(0,_T.jsx)("div",{className:"footer",children:e?(0,_T.jsxs)("div",{className:"container_profile",children:[(0,_T.jsx)("img",{src:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80",alt:"user"}),(0,_T.jsxs)("div",{children:[(0,_T.jsx)("h2",{className:"capital",children:localStorage.getItem("userName")}),(0,_T.jsx)("p",{children:(0,_T.jsx)("b",{className:"capital",children:localStorage.getItem("userRole")})})]}),(0,_T.jsx)("div",{children:(0,_T.jsx)("button",{className:"sign_out_button",onClick:vT,children:(0,_T.jsx)("i",{className:"fas fa-sign-out-alt sign_out"})})})]}):(0,_T.jsxs)("div",{className:"container_profile",children:[(0,_T.jsx)("img",{src:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80",alt:"author"}),(0,_T.jsxs)("div",{children:[(0,_T.jsx)("h2",{className:"capital",children:"Guest"}),(0,_T.jsx)("p",{children:(0,_T.jsx)("b",{className:"capital",children:"guest"})})]}),(0,_T.jsx)("div",{children:(0,_T.jsx)(Y,{className:"nav_element",to:"/login",children:(0,_T.jsx)("button",{className:"sign_in_button",onClick:vT,children:(0,_T.jsx)("i",{className:"fas fa-sign-in-alt sign_out"})})})})]})})]})};var IT=function(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c((0,r.useState)(""),2),a=i[0],o=i[1],u=c(wT(sT),3),s=u[0],l=(u[1],u[2],V());return(0,r.useEffect)((function(){s&&l("/dashboard")}),[s]),(0,_T.jsx)(_T.Fragment,{children:s?(0,_T.jsx)("div",{className:""}):(0,_T.jsxs)("div",{className:"homepage",children:[(0,_T.jsx)(xT,{}),(0,_T.jsx)("div",{className:"main_container",children:(0,_T.jsx)("div",{className:"form_container",children:(0,_T.jsxs)("form",{children:[(0,_T.jsx)("h1",{children:"Welcome"}),(0,_T.jsx)("input",{type:"email",placeholder:"Email",value:t,onChange:function(e){return n(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&dT(t,a)}}),(0,_T.jsx)("br",{}),(0,_T.jsx)("input",{type:"password",placeholder:"Password",value:a,onChange:function(e){return o(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&dT(t,a)}}),(0,_T.jsx)("br",{}),(0,_T.jsx)("input",{type:"button",value:"Sign in",onClick:function(){return dT(t,a)}}),(0,_T.jsx)("br",{}),(0,_T.jsx)("h2",{children:"OR"}),(0,_T.jsx)("input",{type:"button",value:"Sign with Google",onClick:fT}),(0,_T.jsx)("br",{}),(0,_T.jsxs)("p",{children:["Forgot Password? ",(0,_T.jsx)("a",{className:"underline",href:"/reset",children:"Reset here"})]})," ",(0,_T.jsx)("br",{}),(0,_T.jsxs)("p",{children:["Don't have an account?  ",(0,_T.jsx)("a",{className:"underline",href:"/register",children:"Register"})]})]})})})]})})};n(4164);function ET(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var ST=["name"],TT=["_f"],CT=["_f"],NT=function(e){return"checkbox"===e.type},AT=function(e){return e instanceof Date},DT=function(e){return null==e},PT=function(e){return"object"===typeof e},RT=function(e){return!DT(e)&&!Array.isArray(e)&&PT(e)&&!AT(e)},OT=function(e){return RT(e)&&e.target?NT(e.target)?e.target.checked:e.target.value:e},FT=function(e,t){return e.has(function(e){return e.substring(0,e.search(/\.\d+(\.|$)/))||e}(t))},LT=function(e){return Array.isArray(e)?e.filter(Boolean):[]},MT=function(e){return void 0===e},jT=function(e,t,n){if(!t||!RT(e))return n;var r=LT(t.split(/[,[\].]+?/)).reduce((function(e,t){return DT(e)?e:e[t]}),e);return MT(r)||r===e?MT(e[t])?n:e[t]:r},VT="blur",UT="focusout",qT="onBlur",zT="onChange",BT="onSubmit",WT="onTouched",KT="all",GT="max",HT="min",QT="maxLength",$T="minLength",YT="pattern",JT="required",XT="validate",ZT=r.createContext(null),eC=function(){return r.useContext(ZT)},tC=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i={},a=function(a){Object.defineProperty(i,a,{get:function(){var i=a;return t[i]!==KT&&(t[i]=!r||KT),n&&(n[i]=!0),e[i]}})};for(var o in e)a(o);return i},nC=function(e){return RT(e)&&!Object.keys(e).length},rC=function(e,t,n){e.name;var r=ET(e,ST);return nC(r)||Object.keys(r).length>=Object.keys(t).length||Object.keys(r).find((function(e){return t[e]===(!n||KT)}))},iC=function(e){return Array.isArray(e)?e:[e]};function aC(e){var t=r.useRef(e);t.current=e,r.useEffect((function(){var n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return function(){return function(e){e&&e.unsubscribe()}(n)}}),[e.disabled])}var oC=function(e){return"string"===typeof e},uC=function(e,t,n,r){var i=Array.isArray(e);return oC(e)?(r&&t.watch.add(e),jT(n,e)):i?e.map((function(e){return r&&t.watch.add(e),jT(n,e)})):(r&&(t.watchAll=!0),n)},sC=function(e){return"function"===typeof e},cC=function(e){for(var t in e)if(sC(e[t]))return!0;return!1};var lC=function(e,t,n,r,i){return t?bt(bt({},n[e]),{},{types:bt(bt({},n[e]&&n[e].types?n[e].types:{}),{},te({},r,i||!0))}):{}},fC=function(e){return/^\w*$/.test(e)},hC=function(e){return LT(e.replace(/["|']|\]/g,"").split(/\.|\[/))};function dC(e,t,n){for(var r=-1,i=fC(t)?[t]:hC(t),a=i.length,o=a-1;++r<a;){var u=i[r],s=n;if(r!==o){var c=e[u];s=RT(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}e[u]=s,e=e[u]}return e}var pC=function e(t,n,r){var i,a=ae(r||Object.keys(t));try{for(a.s();!(i=a.n()).done;){var o=i.value,u=jT(t,o);if(u){var s=u._f,c=ET(u,TT);if(s&&n(s.name)){if(s.ref.focus&&MT(s.ref.focus()))break;if(s.refs){s.refs[0].focus();break}}else RT(c)&&e(c,n)}}}catch(l){a.e(l)}finally{a.f()}},vC=function(){var e="undefined"===typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(16*Math.random()+e)%16|0;return("x"==t?n:3&n|8).toString(16)}))},yC=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.shouldFocus||MT(n.shouldFocus)?n.focusName||"".concat(e,".").concat(MT(n.focusIndex)?t:n.focusIndex,"."):""},mC=function(e,t,n){return!n&&(t.watchAll||t.watch.has(e)||ot(t.watch).some((function(t){return e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))})))};function gC(e,t){return[].concat(ot(e),ot(iC(t)))}var kC="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function bC(e){var t,n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(kC&&(e instanceof Blob||e instanceof FileList)||!n&&!RT(e))return e;for(var r in t=n?[]:{},e){if(sC(e[r])){t=e;break}t[r]=bC(e[r])}}return t}var wC=function(e){return Array.isArray(e)?e.map((function(){})):void 0};function _C(e,t,n){return[].concat(ot(e.slice(0,t)),ot(iC(n)),ot(e.slice(t)))}var xC=function(e,t,n){return Array.isArray(e)?(MT(e[n])&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]),e):[]};function IC(e,t){return[].concat(ot(iC(t)),ot(iC(e)))}var EC=function(e,t){return MT(t)?[]:function(e,t){var n,r=0,i=ot(e),a=ae(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;i.splice(o-r,1),r++}}catch(u){a.e(u)}finally{a.f()}return LT(i).length?i:[]}(e,iC(t).sort((function(e,t){return e-t})))},SC=function(e,t,n){e[t]=[e[n],e[n]=e[t]][0]};function TC(e,t){var n,r=fC(t)?[t]:hC(t),i=1==r.length?e:function(e,t){for(var n=t.slice(0,-1).length,r=0;r<n;)e=MT(e)?r++:e[t[r++]];return e}(e,r),a=r[r.length-1];i&&delete i[a];for(var o=0;o<r.slice(0,-1).length;o++){var u=-1,s=void 0,c=r.slice(0,-(o+1)),l=c.length-1;for(o>0&&(n=e);++u<c.length;){var f=c[u];s=s?s[f]:e[f],l===u&&(RT(s)&&nC(s)||Array.isArray(s)&&!s.filter((function(e){return!MT(e)})).length)&&(n?delete n[f]:delete e[f]),n=s}}return e}var CC=function(e,t,n){return e[t]=n,e};function NC(e){var t=eC(),n=e.control,i=void 0===n?t.control:n,a=e.name,o=e.keyName,u=void 0===o?"id":o,s=e.shouldUnregister,l=c(r.useState(i._getFieldArray(a)),2),f=l[0],h=l[1],d=r.useRef(i._getFieldArray(a).map(vC)),p=r.useRef(f),v=r.useRef(a),y=r.useRef(!1);v.current=a,p.current=f,i._names.array.add(a),aC({callback:r.useCallback((function(e){var t=e.values,n=e.name;if(n===v.current||!n){var r=jT(t,v.current,[]);h(r),d.current=r.map(vC)}}),[]),subject:i._subjects.array});var m=r.useCallback((function(e){y.current=!0,i._updateFieldArray(a,e)}),[i,a]);return r.useEffect((function(){i._stateFlags.action=!1,mC(a,i._names)&&i._subjects.state.next({}),y.current&&i._executeSchema([a]).then((function(e){var t=jT(e.errors,a),n=jT(i._formState.errors,a);(n?!t&&n.type:t&&t.type)&&(t?dC(i._formState.errors,a,t):TC(i._formState.errors,a),i._subjects.state.next({errors:i._formState.errors}))})),i._subjects.watch.next({name:a,values:i._formValues}),i._names.focus&&pC(i._fields,(function(e){return e.startsWith(i._names.focus)})),i._names.focus="",i._proxyFormState.isValid&&i._updateValid()}),[f,a,i]),r.useEffect((function(){return!jT(i._formValues,a)&&i._updateFieldArray(a),function(){(i._options.shouldUnregister||s)&&i.unregister(a)}}),[a,i,u,s]),{swap:r.useCallback((function(e,t){var n=i._getFieldArray(a);SC(n,e,t),SC(d.current,e,t),m(n),h(n),i._updateFieldArray(a,n,SC,{argA:e,argB:t},!1)}),[m,a,i]),move:r.useCallback((function(e,t){var n=i._getFieldArray(a);xC(n,e,t),xC(d.current,e,t),m(n),h(n),i._updateFieldArray(a,n,xC,{argA:e,argB:t},!1)}),[m,a,i]),prepend:r.useCallback((function(e,t){var n=iC(bC(e)),r=IC(i._getFieldArray(a),n);i._names.focus=yC(a,0,t),d.current=IC(d.current,n.map(vC)),m(r),h(r),i._updateFieldArray(a,r,IC,{argA:wC(e)})}),[m,a,i]),append:r.useCallback((function(e,t){var n=iC(bC(e)),r=gC(i._getFieldArray(a),n);i._names.focus=yC(a,r.length-1,t),d.current=gC(d.current,n.map(vC)),m(r),h(r),i._updateFieldArray(a,r,gC,{argA:wC(e)})}),[m,a,i]),remove:r.useCallback((function(e){var t=EC(i._getFieldArray(a),e);d.current=EC(d.current,e),m(t),h(t),i._updateFieldArray(a,t,EC,{argA:e})}),[m,a,i]),insert:r.useCallback((function(e,t,n){var r=iC(bC(t)),o=_C(i._getFieldArray(a),e,r);i._names.focus=yC(a,e,n),d.current=_C(d.current,e,r.map(vC)),m(o),h(o),i._updateFieldArray(a,o,_C,{argA:e,argB:wC(t)})}),[m,a,i]),update:r.useCallback((function(e,t){var n=bC(t),r=CC(i._getFieldArray(a),e,n);d.current=ot(r).map((function(t,n){return t&&n!==e?d.current[n]:vC()})),m(r),h(ot(r)),i._updateFieldArray(a,r,CC,{argA:e,argB:n},!0,!1)}),[m,a,i]),replace:r.useCallback((function(e){var t=iC(bC(e));d.current=t.map(vC),m(ot(t)),h(ot(t)),i._updateFieldArray(a,ot(t),(function(e){return e}),{},!0,!1)}),[m,a,i]),fields:r.useMemo((function(){return f.map((function(e,t){return bt(bt({},e),{},te({},u,d.current[t]||vC()))}))}),[f,u])}}function AC(){var e=[];return{get observers(){return e},next:function(t){var n,r=ae(e);try{for(r.s();!(n=r.n()).done;){n.value.next(t)}}catch(i){r.e(i)}finally{r.f()}},subscribe:function(t){return e.push(t),{unsubscribe:function(){e=e.filter((function(e){return e!==t}))}}},unsubscribe:function(){e=[]}}}var DC=function(e){return DT(e)||!PT(e)};function PC(e,t){if(DC(e)||DC(t))return e===t;if(AT(e)&&AT(t))return e.getTime()===t.getTime();var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0,a=n;i<a.length;i++){var o=a[i],u=e[o];if(!r.includes(o))return!1;if("ref"!==o){var s=t[o];if(AT(u)&&AT(s)||RT(u)&&RT(s)||Array.isArray(u)&&Array.isArray(s)?!PC(u,s):u!==s)return!1}}return!0}var RC=function(e){return{isOnSubmit:!e||e===BT,isOnBlur:e===qT,isOnChange:e===zT,isOnAll:e===KT,isOnTouch:e===WT}},OC=function(e){return"boolean"===typeof e},FC=function(e){return"file"===e.type},LC=function(e){var t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},MC=function(e){return"select-multiple"===e.type},jC=function(e){return"radio"===e.type},VC=function(e){return jC(e)||NT(e)},UC=function(e){return LC(e)&&e.isConnected};function qC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e);if(RT(e)||n)for(var r in e)Array.isArray(e[r])||RT(e[r])&&!cC(e[r])?(t[r]=Array.isArray(e[r])?[]:{},qC(e[r],t[r])):DT(e[r])||(t[r]=!0);return t}function zC(e,t,n){var r=Array.isArray(e);if(RT(e)||r)for(var i in e)Array.isArray(e[i])||RT(e[i])&&!cC(e[i])?MT(t)||DC(n[i])?n[i]=Array.isArray(e[i])?qC(e[i],[]):bt({},qC(e[i])):zC(e[i],DT(t)?{}:t[i],n[i]):n[i]=!PC(e[i],t[i]);return n}var BC=function(e,t){return zC(e,t,qC(t))},WC={value:!1,isValid:!1},KC={value:!0,isValid:!0},GC=function(e){if(Array.isArray(e)){if(e.length>1){var t=e.filter((function(e){return e&&e.checked&&!e.disabled})).map((function(e){return e.value}));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!MT(e[0].attributes.value)?MT(e[0].value)||""===e[0].value?KC:{value:e[0].value,isValid:!0}:KC:WC}return WC},HC=function(e,t){var n=t.valueAsNumber,r=t.valueAsDate,i=t.setValueAs;return MT(e)?e:n?""===e||DT(e)?NaN:+e:r&&oC(e)?new Date(e):i?i(e):e},QC={isValid:!1,value:null},$C=function(e){return Array.isArray(e)?e.reduce((function(e,t){return t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e}),QC):QC};function YC(e){var t=e.ref;if(!(e.refs?e.refs.every((function(e){return e.disabled})):t.disabled))return FC(t)?t.files:jC(t)?$C(e.refs).value:MC(t)?ot(t.selectedOptions).map((function(e){return e.value})):NT(t)?GC(e.refs).value:HC(MT(t.value)?e.ref.value:t.value,e)}var JC=function(e,t,n,r){var i,a={},o=ae(e);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=jT(t,u);s&&dC(a,u,s._f)}}catch(c){o.e(c)}finally{o.f()}return{criteriaMode:n,names:ot(e),fields:a,shouldUseNativeValidation:r}},XC=function(e){return e instanceof RegExp},ZC=function(e){return MT(e)?void 0:XC(e)?e.source:RT(e)?XC(e.value)?e.value.source:e.value:e},eN=function(e){return e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate)};function tN(e,t,n){var r=jT(e,n);if(r||fC(n))return{error:r,name:n};for(var i=n.split(".");i.length;){var a=i.join("."),o=jT(t,a),u=jT(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(u&&u.type)return{name:a,error:u};i.pop()}return{name:n}}var nN=function(e,t,n,r,i){return!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e)},rN=function(e,t){return!LT(jT(e,t)).length&&TC(e,t)},iN=function(e){return oC(e)||r.isValidElement(e)};function aN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(iN(e)||Array.isArray(e)&&e.every(iN)||OC(e)&&!e)return{type:n,message:iN(e)?e:"",ref:t}}var oN,uN,sN=function(e){return RT(e)&&!XC(e)?e:{value:e,message:""}},cN=function(){var e=ee(X().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p,v,y,m,g,k,b,w,_,x,I,E,S,T,C,N,A,D,P,R,O,F,L,M,j,V,U,q,z,B,W,K,G,H,Q;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t._f,o=a.ref,u=a.refs,s=a.required,c=a.maxLength,l=a.minLength,f=a.min,h=a.max,d=a.pattern,p=a.validate,v=a.name,y=a.valueAsNumber,m=a.mount,g=a.disabled,m&&!g){e.next=3;break}return e.abrupt("return",{});case 3:if(k=u?u[0]:o,b=function(e){i&&k.reportValidity&&(k.setCustomValidity(OC(e)?"":e||" "),k.reportValidity())},w={},_=jC(o),x=NT(o),I=_||x,E=(y||FC(o))&&!o.value||""===n||Array.isArray(n)&&!n.length,S=lC.bind(null,v,r,w),T=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:QT,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$T,a=e?t:n;w[v]=bt({type:e?r:i,message:a,ref:o},S(e?r:i,a))},!s||!(!I&&(E||DT(n))||OC(n)&&!n||x&&!GC(u).isValid||_&&!$C(u).isValid)){e.next=19;break}if(C=iN(s)?{value:!!s,message:s}:sN(s),N=C.value,A=C.message,!N){e.next=19;break}if(w[v]=bt({type:JT,message:A,ref:k},S(JT,A)),r){e.next=19;break}return b(A),e.abrupt("return",w);case 19:if(E||DT(f)&&DT(h)){e.next=28;break}if(R=sN(h),O=sN(f),DT(n)||isNaN(n)?(L=o.valueAsDate||new Date(n),oC(R.value)&&(D=L>new Date(R.value)),oC(O.value)&&(P=L<new Date(O.value))):(F=o.valueAsNumber||+n,DT(R.value)||(D=F>R.value),DT(O.value)||(P=F<O.value)),!D&&!P){e.next=28;break}if(T(!!D,R.message,O.message,GT,HT),r){e.next=28;break}return b(w[v].message),e.abrupt("return",w);case 28:if(!c&&!l||E||!oC(n)){e.next=38;break}if(M=sN(c),j=sN(l),V=!DT(M.value)&&n.length>M.value,U=!DT(j.value)&&n.length<j.value,!V&&!U){e.next=38;break}if(T(V,M.message,j.message),r){e.next=38;break}return b(w[v].message),e.abrupt("return",w);case 38:if(!d||E||!oC(n)){e.next=45;break}if(q=sN(d),z=q.value,B=q.message,!XC(z)||n.match(z)){e.next=45;break}if(w[v]=bt({type:YT,message:B,ref:o},S(YT,B)),r){e.next=45;break}return b(B),e.abrupt("return",w);case 45:if(!p){e.next=79;break}if(!sC(p)){e.next=58;break}return e.next=49,p(n);case 49:if(W=e.sent,!(K=aN(W,k))){e.next=56;break}if(w[v]=bt(bt({},K),S(XT,K.message)),r){e.next=56;break}return b(K.message),e.abrupt("return",w);case 56:e.next=79;break;case 58:if(!RT(p)){e.next=79;break}G={},e.t0=X().keys(p);case 61:if((e.t1=e.t0()).done){e.next=75;break}if(H=e.t1.value,nC(G)||r){e.next=65;break}return e.abrupt("break",75);case 65:return e.t2=aN,e.next=68,p[H](n);case 68:e.t3=e.sent,e.t4=k,e.t5=H,(Q=(0,e.t2)(e.t3,e.t4,e.t5))&&(G=bt(bt({},Q),S(H,Q.message)),b(Q.message),r&&(w[v]=G)),e.next=61;break;case 75:if(nC(G)){e.next=79;break}if(w[v]=bt({ref:k},G),r){e.next=79;break}return e.abrupt("return",w);case 79:return b(!0),e.abrupt("return",w);case 81:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),lN={mode:BT,reValidateMode:zT,shouldFocusError:!0};function fN(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=bt(bt({},lN),t),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},i={},a=bC(n.defaultValues)||{},o=n.shouldUnregister?{}:bC(a),u={action:!1,mount:!1,watch:!1},s={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c=0,l={},f={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={watch:AC(),array:AC(),state:AC()},d=RC(n.mode),p=RC(n.reValidateMode),v=n.criteriaMode===KT,y=function(e){return function(t){clearTimeout(c),c=window.setTimeout(e,t)}},m=function(){var e=ee(X().mark((function e(t){var a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,!f.isValid){e.next=15;break}if(!n.resolver){e.next=10;break}return e.t1=nC,e.next=6,x();case 6:e.t2=e.sent.errors,e.t0=(0,e.t1)(e.t2),e.next=13;break;case 10:return e.next=12,E(i,!0);case 12:e.t0=e.sent;case 13:a=e.t0,t||a===r.isValid||(r.isValid=a,h.state.next({isValid:a}));case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(s&&n){if(u.action=!0,l&&Array.isArray(jT(i,e))){var d=n(jT(i,e),s.argA,s.argB);c&&dC(i,e,d)}if(f.errors&&l&&Array.isArray(jT(r.errors,e))){var p=n(jT(r.errors,e),s.argA,s.argB);c&&dC(r.errors,e,p),rN(r.errors,e)}if(f.touchedFields&&l&&Array.isArray(jT(r.touchedFields,e))){var v=n(jT(r.touchedFields,e),s.argA,s.argB);c&&dC(r.touchedFields,e,v)}f.dirtyFields&&(r.dirtyFields=BC(a,o)),h.state.next({isDirty:T(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else dC(o,e,t)},k=function(e,t){dC(r.errors,e,t),h.state.next({errors:r.errors})},b=function(e,t,n,r){var s=jT(i,e);if(s){var c=jT(o,e,MT(n)?jT(a,e):n);MT(c)||r&&r.defaultChecked||t?dC(o,e,t?c:YC(s._f)):A(e,c),u.mount&&m()}},w=function(e,t,n,i,o){var u=!1,s={name:e},c=jT(r.touchedFields,e);if(f.isDirty){var l=r.isDirty;r.isDirty=s.isDirty=T(),u=l!==s.isDirty}if(f.dirtyFields&&(!n||i)){var d=jT(r.dirtyFields,e);PC(jT(a,e),t)?TC(r.dirtyFields,e):dC(r.dirtyFields,e,!0),s.dirtyFields=r.dirtyFields,u=u||d!==jT(r.dirtyFields,e)}return n&&!c&&(dC(r.touchedFields,e,n),s.touchedFields=r.touchedFields,u=u||f.touchedFields&&c!==n),u&&o&&h.state.next(s),u?s:{}},_=function(){var n=ee(X().mark((function n(i,a,o,u){var s,d,p;return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=jT(r.errors,i),d=f.isValid&&r.isValid!==a,t.delayError&&o?(e=y((function(){return k(i,o)})))(t.delayError):(clearTimeout(c),e=null,o?dC(r.errors,i,o):TC(r.errors,i)),(o?PC(s,o):!s)&&nC(u)&&!d||(p=bt(bt(bt({},u),d?{isValid:a}:{}),{},{errors:r.errors,name:i}),r=bt(bt({},r),p),h.state.next(p)),l[i]--,f.isValidating&&!Object.values(l).some((function(e){return e}))&&(h.state.next({isValidating:!1}),l={});case 6:case"end":return n.stop()}}),n)})));return function(e,t,r,i){return n.apply(this,arguments)}}(),x=function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.resolver){e.next=6;break}return e.next=3,n.resolver(bt({},o),n.context,JC(t||s.mount,i,n.criteriaMode,n.shouldUseNativeValidation));case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0={};case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=ee(X().mark((function e(t){var n,i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:if(n=e.sent,i=n.errors,t){a=ae(t);try{for(a.s();!(o=a.n()).done;)u=o.value,(s=jT(i,u))?dC(r.errors,u,s):TC(r.errors,u)}catch(c){a.e(c)}finally{a.f()}}else r.errors=i;return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=ee(X().mark((function e(t,i){var a,u,s,c,l,f,h=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=h.length>2&&void 0!==h[2]?h[2]:{valid:!0},e.t0=X().keys(t);case 2:if((e.t1=e.t0()).done){e.next=22;break}if(u=e.t1.value,!(s=t[u])){e.next=20;break}if(c=s._f,l=ET(s,CT),!c){e.next=16;break}return e.next=10,cN(s,jT(o,c.name),v,n.shouldUseNativeValidation);case 10:if(!(f=e.sent)[c.name]){e.next=15;break}if(a.valid=!1,!i){e.next=15;break}return e.abrupt("break",22);case 15:i||(f[c.name]?dC(r.errors,c.name,f[c.name]):TC(r.errors,c.name));case 16:if(e.t2=l,!e.t2){e.next=20;break}return e.next=20,E(l,i,a);case 20:e.next=2;break;case 22:return e.abrupt("return",a.valid);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e,t=ae(s.unMount);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=jT(i,n);r&&(r._f.refs?r._f.refs.every((function(e){return!UC(e)})):!UC(r._f.ref))&&U(n)}}catch(a){t.e(a)}finally{t.f()}s.unMount=new Set},T=function(e,t){return e&&t&&dC(o,e,t),!PC(F(),a)},C=function(e,t,n){var r=bt({},u.mount?o:MT(t)?a:oC(e)?te({},e,t):t);return uC(e,s,r,n)},N=function(e){return LT(jT(u.mount?o:a,e,t.shouldUnregister?jT(a,e,[]):[]))},A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=jT(i,e),a=t;if(r){var u=r._f;u&&(!u.disabled&&dC(o,e,HC(t,u)),a=kC&&LC(u.ref)&&DT(t)?"":t,MC(u.ref)?ot(u.ref.options).forEach((function(e){return e.selected=a.includes(e.value)})):u.refs?NT(u.ref)?u.refs.length>1?u.refs.forEach((function(e){return!e.disabled&&(e.checked=Array.isArray(a)?!!a.find((function(t){return t===e.value})):a===e.value)})):u.refs[0]&&(u.refs[0].checked=!!a):u.refs.forEach((function(e){return e.checked=e.value===a})):FC(u.ref)?u.ref.value="":(u.ref.value=a,u.ref.type||h.watch.next({name:e})))}(n.shouldDirty||n.shouldTouch)&&w(e,a,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&O(e)},D=function e(t,n,r){for(var a in n){var o=n[a],u="".concat(t,".").concat(a),c=jT(i,u);!s.array.has(t)&&DC(o)&&(!c||c._f)||AT(o)?A(u,o,r):e(u,o,r)}},P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=jT(i,e),c=s.array.has(e),l=bC(t);dC(o,e,l),c?(h.array.next({name:e,values:o}),(f.isDirty||f.dirtyFields)&&n.shouldDirty&&(r.dirtyFields=BC(a,o),h.state.next({name:e,dirtyFields:r.dirtyFields,isDirty:T(e,l)}))):!u||u._f||DT(l)?A(e,l,n):D(e,l,n),mC(e,s)&&h.state.next({}),h.watch.next({name:e})},R=function(){var t=ee(X().mark((function t(a){var u,c,f,y,g,k,b,I,E,S,T,C,N,A,D;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=a.target,c=u.name,!(f=jT(i,c))){t.next=39;break}if(k=u.type?YC(f._f):OT(a),b=a.type===VT||a.type===UT,I=!eN(f._f)&&!n.resolver&&!jT(r.errors,c)&&!f._f.deps||nN(b,jT(r.touchedFields,c),r.isSubmitted,p,d),E=mC(c,s,b),dC(o,c,k),b?(f._f.onBlur&&f._f.onBlur(a),e&&e(0)):f._f.onChange&&f._f.onChange(a),S=w(c,k,b,!1),T=!nC(S)||E,!b&&h.watch.next({name:c,type:a.type}),!I){t.next=15;break}return t.abrupt("return",T&&h.state.next(bt({name:c},E?{}:S)));case 15:if(!b&&E&&h.state.next({}),l[c]=(l[c],1),h.state.next({isValidating:!0}),!n.resolver){t.next=30;break}return t.next=21,x([c]);case 21:C=t.sent,N=C.errors,A=tN(r.errors,i,c),D=tN(N,i,A.name||c),y=D.error,c=D.name,g=nC(N),t.next=37;break;case 30:return t.next=32,cN(f,jT(o,c),v,n.shouldUseNativeValidation);case 32:return t.t0=c,y=t.sent[t.t0],t.next=36,m(!0);case 36:g=t.sent;case 37:f._f.deps&&O(f._f.deps),_(c,g,y,S);case 39:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var e=ee(X().mark((function e(t){var a,o,u,c,l,d=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.length>1&&void 0!==d[1]?d[1]:{},c=iC(t),h.state.next({isValidating:!0}),!n.resolver){e.next=11;break}return e.next=6,I(MT(t)?t:c);case 6:l=e.sent,o=nC(l),u=t?!c.some((function(e){return jT(l,e)})):o,e.next=21;break;case 11:if(!t){e.next=18;break}return e.next=14,Promise.all(c.map(function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=jT(i,t),e.next=3,E(n&&n._f?te({},t,n):n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:((u=e.sent.every(Boolean))||r.isValid)&&m(),e.next=21;break;case 18:return e.next=20,E(i);case 20:u=o=e.sent;case 21:return h.state.next(bt(bt(bt({},!oC(t)||f.isValid&&o!==r.isValid?{}:{name:t}),n.resolver?{isValid:o}:{}),{},{errors:r.errors,isValidating:!1})),a.shouldFocus&&!u&&pC(i,(function(e){return jT(r.errors,e)}),t?c:s.mount),e.abrupt("return",u);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){var t=bt(bt({},a),u.mount?o:{});return MT(e)?t:oC(e)?jT(t,e):e.map((function(e){return jT(t,e)}))},L=function(e,t){return{invalid:!!jT((t||r).errors,e),isDirty:!!jT((t||r).dirtyFields,e),isTouched:!!jT((t||r).touchedFields,e),error:jT((t||r).errors,e)}},M=function(e){e?iC(e).forEach((function(e){return TC(r.errors,e)})):r.errors={},h.state.next({errors:r.errors})},j=function(e,t,n){var a=(jT(i,e,{_f:{}})._f||{}).ref;dC(r.errors,e,bt(bt({},t),{},{ref:a})),h.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&a&&a.focus&&a.focus()},V=function(e,t){return sC(e)?h.watch.subscribe({next:function(n){return e(C(void 0,t),n)}}):C(e,t,!0)},U=function(e){var t,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=ae(e?iC(e):s.mount);try{for(c.s();!(t=c.n()).done;){var l=t.value;s.mount.delete(l),s.array.delete(l),jT(i,l)&&(u.keepValue||(TC(i,l),TC(o,l)),!u.keepError&&TC(r.errors,l),!u.keepDirty&&TC(r.dirtyFields,l),!u.keepTouched&&TC(r.touchedFields,l),!n.shouldUnregister&&!u.keepDefaultValue&&TC(a,l))}}catch(f){c.e(f)}finally{c.f()}h.watch.next({}),h.state.next(bt(bt({},r),u.keepDirty?{isDirty:T()}:{})),!u.keepIsValid&&m()},q=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=jT(i,t),l=OC(r.disabled);return dC(i,t,{_f:bt(bt({},c&&c._f?c._f:{ref:{name:t}}),{},{name:t,mount:!0},r)}),s.mount.add(t),c?l&&dC(o,t,r.disabled?void 0:jT(o,t,YC(c._f))):b(t,!0,r.value),bt(bt(bt({},l?{disabled:r.disabled}:{}),n.shouldUseNativeValidation?{required:!!r.required,min:ZC(r.min),max:ZC(r.max),minLength:ZC(r.minLength),maxLength:ZC(r.maxLength),pattern:ZC(r.pattern)}:{}),{},{name:t,onChange:R,onBlur:R,ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(o){if(o){e(t,r),c=jT(i,t);var l=MT(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,f=VC(l),h=c._f.refs||[];if(f?h.find((function(e){return e===l})):l===c._f.ref)return;dC(i,t,{_f:bt(bt({},c._f),f?{refs:[].concat(ot(h.filter(UC)),[l],ot(Array.isArray(jT(a,t))?[{}]:[])),ref:{type:l.type,name:t}}:{ref:l})}),b(t,!1,void 0,l)}else(c=jT(i,t,{}))._f&&(c._f.mount=!1),(n.shouldUnregister||r.shouldUnregister)&&(!FT(s.array,t)||!u.action)&&s.unMount.add(t)}))})},z=function(e,t){return function(){var a=ee(X().mark((function a(u){var c,l,f,d,p;return X().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist()),c=!0,l=bC(o),h.state.next({isSubmitting:!0}),a.prev=4,!n.resolver){a.next=15;break}return a.next=8,x();case 8:f=a.sent,d=f.errors,p=f.values,r.errors=d,l=p,a.next=17;break;case 15:return a.next=17,E(i);case 17:if(!nC(r.errors)){a.next=23;break}return h.state.next({errors:{},isSubmitting:!0}),a.next=21,e(l,u);case 21:a.next=27;break;case 23:if(!t){a.next=26;break}return a.next=26,t(bt({},r.errors),u);case 26:n.shouldFocusError&&pC(i,(function(e){return jT(r.errors,e)}),s.mount);case 27:a.next=33;break;case 29:throw a.prev=29,a.t0=a.catch(4),c=!1,a.t0;case 33:return a.prev=33,r.isSubmitted=!0,h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:nC(r.errors)&&c,submitCount:r.submitCount+1,errors:r.errors}),a.finish(33);case 37:case"end":return a.stop()}}),a,null,[[4,29,33,37]])})));return function(e){return a.apply(this,arguments)}}()},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jT(i,e)&&(MT(t.defaultValue)?P(e,jT(a,e)):(P(e,t.defaultValue),dC(a,e,t.defaultValue)),t.keepTouched||TC(r.touchedFields,e),t.keepDirty||(TC(r.dirtyFields,e),r.isDirty=t.defaultValue?T(e,jT(a,e)):T()),t.keepError||(TC(r.errors,e),f.isValid&&m()),h.state.next(bt({},r)))},W=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=e||a,l=bC(c),d=e&&!nC(e)?l:a;if(n.keepDefaultValues||(a=c),!n.keepValues){if(n.keepDirtyValues){var p,v=ae(s.mount);try{for(v.s();!(p=v.n()).done;){var y=p.value;jT(r.dirtyFields,y)?dC(d,y,jT(o,y)):P(y,jT(d,y))}}catch(_){v.e(_)}finally{v.f()}}else{if(kC&&MT(e)){var m,g=ae(s.mount);try{for(g.s();!(m=g.n()).done;){var k=m.value,b=jT(i,k);if(b&&b._f){var w=Array.isArray(b._f.refs)?b._f.refs[0]:b._f.ref;try{LC(w)&&w.closest("form").reset();break}catch(mI){}}}}catch(_){g.e(_)}finally{g.f()}}i={}}o=t.shouldUnregister?n.keepDefaultValues?bC(a):{}:l,h.array.next({values:d}),h.watch.next({values:d})}s={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!f.isValid||!!n.keepIsValid,u.watch=!!t.shouldUnregister,h.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?r.isDirty:!(!n.keepDefaultValues||PC(e,a)),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:n.keepDirty||n.keepDirtyValues?r.dirtyFields:n.keepDefaultValues&&e?BC(a,e):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=jT(i,e)._f,r=n.refs?n.refs[0]:n.ref;r.focus(),t.shouldSelect&&r.select()};return{control:{register:q,unregister:U,getFieldState:L,_executeSchema:x,_getWatch:C,_getDirty:T,_updateValid:m,_removeUnmounted:S,_updateFieldArray:g,_getFieldArray:N,_subjects:h,_proxyFormState:f,get _fields(){return i},get _formValues(){return o},get _stateFlags(){return u},set _stateFlags(e){u=e},get _defaultValues(){return a},get _names(){return s},set _names(e){s=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n=bt(bt({},n),e)}},trigger:O,register:q,handleSubmit:z,watch:V,setValue:P,getValues:F,reset:W,resetField:B,clearErrors:M,unregister:U,setError:j,setFocus:K,getFieldState:L}}try{oN=Map}catch(CL){}try{uN=Set}catch(CL){}function hN(e,t,n){if(!e||"object"!==typeof e||"function"===typeof e)return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map(dN);if(oN&&e instanceof oN)return new Map(Array.from(e.entries()));if(uN&&e instanceof uN)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var r=Object.create(e);for(var i in n.push(r),e){var a=t.findIndex((function(t){return t===e[i]}));r[i]=a>-1?n[a]:hN(e[i],t,n)}return r}return e}function dN(e){return hN(e,[],[])}var pN=Object.prototype.toString,vN=Error.prototype.toString,yN=RegExp.prototype.toString,mN="undefined"!==typeof Symbol?Symbol.prototype.toString:function(){return""},gN=/^Symbol\((.*)\)(.*)$/;function kN(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}function bN(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;var n=typeof e;if("number"===n)return kN(e);if("string"===n)return t?'"'.concat(e,'"'):e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return mN.call(e).replace(gN,"Symbol($1)");var r=pN.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+vN.call(e)+"]":"RegExp"===r?yN.call(e):null}function wN(e,t){var n=bN(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){var r=bN(this[e],t);return null!==r?r:n}),2)}var _N={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:function(e){var t=e.path,n=e.type,r=e.value,i=e.originalValue,a=null!=i&&i!==r,o="".concat(t," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(wN(r,!0),"`")+(a?" (cast from the value `".concat(wN(i,!0),"`)."):".");return null===r&&(o+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),o},defined:"${path} must be defined"},xN={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},IN={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},EN={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},SN={isValue:"${path} field must be ${value}"},TN={noUnknown:"${path} field has unspecified keys: ${unknown}"},CN={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},NN=(Object.assign(Object.create(null),{mixed:_N,string:xN,number:IN,date:EN,object:TN,array:CN,boolean:SN}),n(7805)),AN=n.n(NN),DN=function(e){return e&&e.__isYupSchema__},PN=function(){function e(t,n){if(ne(this,e),this.fn=void 0,this.refs=t,this.refs=t,"function"!==typeof n){if(!AN()(n,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");var r=n.is,i=n.then,a=n.otherwise,o="function"===typeof r?r:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e===r}))};this.fn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.pop(),u=t.pop(),s=o.apply(void 0,t)?i:a;if(s)return"function"===typeof s?s(u):u.concat(s.resolve(r))}}else this.fn=n}return ie(e,[{key:"resolve",value:function(e,t){var n=this.refs.map((function(e){return e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)})),r=this.fn.apply(e,n.concat(e,t));if(void 0===r||r===e)return e;if(!DN(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}]),e}(),RN=PN;function ON(e){return null==e?[]:[].concat(e)}function FN(){return FN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FN.apply(this,arguments)}var LN=/\$\{\s*(\w+)\s*\}/g,MN=function(e){se(n,e);var t=he(n);function n(e,r,i,a){var o;return ne(this,n),(o=t.call(this)).value=void 0,o.path=void 0,o.type=void 0,o.errors=void 0,o.params=void 0,o.inner=void 0,o.name="ValidationError",o.value=r,o.path=i,o.type=a,o.errors=[],o.inner=[],ON(e).forEach((function(e){var t;n.isError(e)?((t=o.errors).push.apply(t,ot(e.errors)),o.inner=o.inner.concat(e.inner.length?e.inner:e)):o.errors.push(e)})),o.message=o.errors.length>1?"".concat(o.errors.length," errors occurred"):o.errors[0],Error.captureStackTrace&&Error.captureStackTrace(oe(o),n),o}return ie(n,null,[{key:"formatError",value:function(e,t){var n=t.label||t.path||"this";return n!==t.path&&(t=FN({},t,{path:n})),"string"===typeof e?e.replace(LN,(function(e,n){return wN(t[n])})):"function"===typeof e?e(t):e}},{key:"isError",value:function(e){return e&&"ValidationError"===e.name}}]),n}(pe(Error));function jN(e,t){var n=e.endEarly,r=e.tests,i=e.args,a=e.value,o=e.errors,u=e.sort,s=e.path,c=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(t),l=r.length,f=[];if(o=o||[],!l)return o.length?c(new MN(o,a,s)):c(null,a);for(var h=0;h<r.length;h++){(0,r[h])(i,(function(e){if(e){if(!MN.isError(e))return c(e,a);if(n)return e.value=a,c(e,a);f.push(e)}if(--l<=0){if(f.length&&(u&&f.sort(u),o.length&&f.push.apply(f,ot(o)),o=f),o.length)return void c(new MN(o,a,s),a);c(null,a)}}))}}var VN=n(7702),UN=n.n(VN),qN=n(2758),zN="$",BN=".";var WN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ne(this,e),this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof t)throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),""===t)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===zN,this.isValue=this.key[0]===BN,this.isSibling=!this.isContext&&!this.isValue;var r=this.isContext?zN:this.isValue?BN:"";this.path=this.key.slice(r.length),this.getter=this.path&&(0,qN.getter)(this.path,!0),this.map=n.map}return ie(e,[{key:"getValue",value:function(e,t,n){var r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}},{key:"cast",value:function(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}},{key:"resolve",value:function(){return this}},{key:"describe",value:function(){return{type:"ref",key:this.key}}},{key:"toString",value:function(){return"Ref(".concat(this.key,")")}}],[{key:"isRef",value:function(e){return e&&e.__isYupRef}}]),e}();function KN(){return KN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KN.apply(this,arguments)}function GN(e){function t(t,n){var r=t.value,i=t.path,a=void 0===i?"":i,o=t.label,u=t.options,s=t.originalValue,c=t.sync,l=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["value","path","label","options","originalValue","sync"]),f=e.name,h=e.test,d=e.params,p=e.message,v=u.parent,y=u.context;function m(e){return WN.isRef(e)?e.getValue(r,v,y):e}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=UN()(KN({value:r,originalValue:s,label:o,path:e.path||a},d,e.params),m),n=new MN(MN.formatError(e.message||p,t),r,t.path,e.type||f);return n.params=t,n}var k=KN({path:a,parent:v,type:f,createError:g,resolve:m,options:u,originalValue:s},l);if(c){var b;try{var w;if("function"===typeof(null==(w=b=h.call(k,r,k))?void 0:w.then))throw new Error('Validation test of type: "'.concat(k.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned")}catch(_){return void n(_)}MN.isError(b)?n(b):b?n(null,b):n(g())}else try{Promise.resolve(h.call(k,r,k)).then((function(e){MN.isError(e)?n(e):e?n(null,e):n(g())})).catch(n)}catch(_){n(_)}}return t.OPTIONS=e,t}WN.prototype.__isYupRef=!0;var HN=function(e){return e.substr(0,e.length-1).substr(1)};function QN(e,t,n){var r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,qN.forEach)(t,(function(u,s,c){var l=s?HN(u):u;if((e=e.resolve({context:o,parent:r,value:n})).innerType){var f=c?parseInt(l,10):0;if(n&&f>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(u,", in the path: ").concat(t,". ")+"because there is no value at that index. ");r=n,n=n&&n[f],e=e.innerType}if(!c){if(!e.fields||!e.fields[l])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(a,' which is a type: "').concat(e._type,'")'));r=n,n=n&&n[l],e=e.fields[l]}i=l,a=s?"["+u+"]":"."+u})),{schema:e,parent:r,parentPath:i}):{parent:r,parentPath:t,schema:e}}var $N=function(){function e(){ne(this,e),this.list=void 0,this.refs=void 0,this.list=new Set,this.refs=new Map}return ie(e,[{key:"size",get:function(){return this.list.size+this.refs.size}},{key:"describe",value:function(){var e,t=[],n=ae(this.list);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r)}}catch(u){n.e(u)}finally{n.f()}var i,a=ae(this.refs);try{for(a.s();!(i=a.n()).done;){var o=c(i.value,2)[1];t.push(o.describe())}}catch(u){a.e(u)}finally{a.f()}return t}},{key:"toArray",value:function(){return Array.from(this.list).concat(Array.from(this.refs.values()))}},{key:"resolveAll",value:function(e){return this.toArray().reduce((function(t,n){return t.concat(WN.isRef(n)?e(n):n)}),[])}},{key:"add",value:function(e){WN.isRef(e)?this.refs.set(e.key,e):this.list.add(e)}},{key:"delete",value:function(e){WN.isRef(e)?this.refs.delete(e.key):this.list.delete(e)}},{key:"clone",value:function(){var t=new e;return t.list=new Set(this.list),t.refs=new Map(this.refs),t}},{key:"merge",value:function(e,t){var n=this.clone();return e.list.forEach((function(e){return n.add(e)})),e.refs.forEach((function(e){return n.add(e)})),t.list.forEach((function(e){return n.delete(e)})),t.refs.forEach((function(e){return n.delete(e)})),n}}]),e}();function YN(){return YN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YN.apply(this,arguments)}var JN=function(){function e(t){var n=this;ne(this,e),this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this._typeError=void 0,this._whitelist=new $N,this._blacklist=new $N,this.exclusiveTests=Object.create(null),this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((function(){n.typeError(_N.notType)})),this.type=(null==t?void 0:t.type)||"mixed",this.spec=YN({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},null==t?void 0:t.spec)}return ie(e,[{key:"_type",get:function(){return this.type}},{key:"_typeCheck",value:function(e){return!0}},{key:"clone",value:function(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;var t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeError=this._typeError,t._whitelistError=this._whitelistError,t._blacklistError=this._blacklistError,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.exclusiveTests=YN({},this.exclusiveTests),t.deps=ot(this.deps),t.conditions=ot(this.conditions),t.tests=ot(this.tests),t.transforms=ot(this.transforms),t.spec=dN(YN({},this.spec,e)),t}},{key:"label",value:function(e){var t=this.clone();return t.spec.label=e,t}},{key:"meta",value:function(){if(0===arguments.length)return this.spec.meta;var e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}},{key:"withMutation",value:function(e){var t=this._mutate;this._mutate=!0;var n=e(this);return this._mutate=t,n}},{key:"concat",value:function(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));var t=this,n=e.clone(),r=YN({},t.spec,n.spec);return n.spec=r,n._typeError||(n._typeError=t._typeError),n._whitelistError||(n._whitelistError=t._whitelistError),n._blacklistError||(n._blacklistError=t._blacklistError),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((function(t){e.tests.forEach((function(e){t.test(e.OPTIONS)}))})),n.transforms=[].concat(ot(t.transforms),ot(n.transforms)),n}},{key:"isType",value:function(e){return!(!this.spec.nullable||null!==e)||this._typeCheck(e)}},{key:"resolve",value:function(e){var t=this;if(t.conditions.length){var n=t.conditions;(t=t.clone()).conditions=[],t=(t=n.reduce((function(t,n){return n.resolve(t,e)}),t)).resolve(e)}return t}},{key:"cast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(YN({value:e},t)),r=n._cast(e,t);if(void 0!==e&&!1!==t.assert&&!0!==n.isType(r)){var i=wN(e),a=wN(r);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n._type,'". \n\n')+"attempted value: ".concat(i," \n")+(a!==i?"result of cast: ".concat(a):""))}return r}},{key:"_cast",value:function(e,t){var n=this,r=void 0===e?e:this.transforms.reduce((function(t,r){return r.call(n,t,e,n)}),e);return void 0===r&&(r=this.getDefault()),r}},{key:"_validate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=n.sync,a=n.path,o=n.from,u=void 0===o?[]:o,s=n.originalValue,c=void 0===s?e:s,l=n.strict,f=void 0===l?this.spec.strict:l,h=n.abortEarly,d=void 0===h?this.spec.abortEarly:h,p=e;f||(p=this._cast(p,YN({assert:!1},n)));var v={value:p,path:a,options:n,originalValue:c,schema:this,label:this.spec.label,sync:i,from:u},y=[];this._typeError&&y.push(this._typeError);var m=[];this._whitelistError&&m.push(this._whitelistError),this._blacklistError&&m.push(this._blacklistError),jN({args:v,value:p,path:a,sync:i,tests:y,endEarly:d},(function(e){e?r(e,p):jN({tests:t.tests.concat(m),args:v,path:a,sync:i,value:p,endEarly:d},r)}))}},{key:"validate",value:function(e,t,n){var r=this.resolve(YN({},t,{value:e}));return"function"===typeof n?r._validate(e,t,n):new Promise((function(n,i){return r._validate(e,t,(function(e,t){e?i(e):n(t)}))}))}},{key:"validateSync",value:function(e,t){var n;return this.resolve(YN({},t,{value:e}))._validate(e,YN({},t,{sync:!0}),(function(e,t){if(e)throw e;n=t})),n}},{key:"isValid",value:function(e,t){return this.validate(e,t).then((function(){return!0}),(function(e){if(MN.isError(e))return!1;throw e}))}},{key:"isValidSync",value:function(e,t){try{return this.validateSync(e,t),!0}catch(n){if(MN.isError(n))return!1;throw n}}},{key:"_getDefault",value:function(){var e=this.spec.default;return null==e?e:"function"===typeof e?e.call(this):dN(e)}},{key:"getDefault",value:function(e){return this.resolve(e||{})._getDefault()}},{key:"default",value:function(e){if(0===arguments.length)return this._getDefault();var t=this.clone({default:e});return t}},{key:"strict",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strict=e,t}},{key:"_isPresent",value:function(e){return null!=e}},{key:"defined",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_N.defined;return this.test({message:e,name:"defined",exclusive:!0,test:function(e){return void 0!==e}})}},{key:"required",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_N.required;return this.clone({presence:"required"}).withMutation((function(t){return t.test({message:e,name:"required",exclusive:!0,test:function(e){return this.schema._isPresent(e)}})}))}},{key:"notRequired",value:function(){var e=this.clone({presence:"optional"});return e.tests=e.tests.filter((function(e){return"required"!==e.OPTIONS.name})),e}},{key:"nullable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone({nullable:!1!==e});return t}},{key:"transform",value:function(e){var t=this.clone();return t.transforms.push(e),t}},{key:"test",value:function(){var e;if(void 0===(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]}).message&&(e.message=_N.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");var t=this.clone(),n=GN(e),r=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter((function(t){if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),t.tests.push(n),t}},{key:"when",value:function(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");var n=this.clone(),r=ON(e).map((function(e){return new WN(e)}));return r.forEach((function(e){e.isSibling&&n.deps.push(e.key)})),n.conditions.push(new RN(r,t)),n}},{key:"typeError",value:function(e){var t=this.clone();return t._typeError=GN({message:e,name:"typeError",test:function(e){return!(void 0!==e&&!this.schema.isType(e))||this.createError({params:{type:this.schema._type}})}}),t}},{key:"oneOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_N.oneOf,n=this.clone();return e.forEach((function(e){n._whitelist.add(e),n._blacklist.delete(e)})),n._whitelistError=GN({message:t,name:"oneOf",test:function(e){if(void 0===e)return!0;var t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:t.toArray().join(", "),resolved:n}})}}),n}},{key:"notOneOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_N.notOneOf,n=this.clone();return e.forEach((function(e){n._blacklist.add(e),n._whitelist.delete(e)})),n._blacklistError=GN({message:t,name:"notOneOf",test:function(e){var t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:t.toArray().join(", "),resolved:n}})}}),n}},{key:"strip",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}},{key:"describe",value:function(){var e=this.clone(),t=e.spec,n=t.label,r={meta:t.meta,label:n,type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.map((function(e){return{name:e.OPTIONS.name,params:e.OPTIONS.params}})).filter((function(e,t,n){return n.findIndex((function(t){return t.name===e.name}))===t}))};return r}}]),e}();JN.prototype.__isYupSchema__=!0;for(var XN=function(){var e=eA[ZN];JN.prototype["".concat(e,"At")]=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=QN(this,t,n,r.context),a=i.parent,o=i.parentPath,u=i.schema;return u[e](a&&a[o],YN({},r,{parent:a,path:t}))}},ZN=0,eA=["validate","validateSync"];ZN<eA.length;ZN++)XN();for(var tA=0,nA=["equals","is"];tA<nA.length;tA++){var rA=nA[tA];JN.prototype[rA]=JN.prototype.oneOf}for(var iA=0,aA=["not","nope"];iA<aA.length;iA++){var oA=aA[iA];JN.prototype[oA]=JN.prototype.notOneOf}JN.prototype.optional=JN.prototype.notRequired;var uA=JN;uA.prototype;var sA=function(e){return null==e};var cA=function(e){se(n,e);var t=he(n);function n(){var e;return ne(this,n),(e=t.call(this,{type:"boolean"})).withMutation((function(){e.transform((function(e){if(!this.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e}))})),e}return ie(n,[{key:"_typeCheck",value:function(e){return e instanceof Boolean&&(e=e.valueOf()),"boolean"===typeof e}},{key:"isTrue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SN.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test:function(e){return sA(e)||!0===e}})}},{key:"isFalse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SN.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test:function(e){return sA(e)||!1===e}})}}]),n}(JN);cA.prototype;var lA=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,fA=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,hA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,dA=function(e){return sA(e)||e===e.trim()},pA={}.toString();var vA=function(e){se(n,e);var t=he(n);function n(){var e;return ne(this,n),(e=t.call(this,{type:"string"})).withMutation((function(){e.transform((function(e){if(this.isType(e))return e;if(Array.isArray(e))return e;var t=null!=e&&e.toString?e.toString():e;return t===pA?e:t}))})),e}return ie(n,[{key:"_typeCheck",value:function(e){return e instanceof String&&(e=e.valueOf()),"string"===typeof e}},{key:"_isPresent",value:function(e){return Fn(ce(n.prototype),"_isPresent",this).call(this,e)&&!!e.length}},{key:"length",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xN.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test:function(t){return sA(t)||t.length===this.resolve(e)}})}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xN.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test:function(t){return sA(t)||t.length>=this.resolve(e)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xN.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},test:function(t){return sA(t)||t.length<=this.resolve(e)}})}},{key:"matches",value:function(e,t){var n,r,i=!1;if(t)if("object"===typeof t){var a=t.excludeEmptyString;i=void 0!==a&&a,n=t.message,r=t.name}else n=t;return this.test({name:r||"matches",message:n||xN.matches,params:{regex:e},test:function(t){return sA(t)||""===t&&i||-1!==t.search(e)}})}},{key:"email",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xN.email;return this.matches(lA,{name:"email",message:e,excludeEmptyString:!0})}},{key:"url",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xN.url;return this.matches(fA,{name:"url",message:e,excludeEmptyString:!0})}},{key:"uuid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xN.uuid;return this.matches(hA,{name:"uuid",message:e,excludeEmptyString:!1})}},{key:"ensure",value:function(){return this.default("").transform((function(e){return null===e?"":e}))}},{key:"trim",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xN.trim;return this.transform((function(e){return null!=e?e.trim():e})).test({message:e,name:"trim",test:dA})}},{key:"lowercase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xN.lowercase;return this.transform((function(e){return sA(e)?e:e.toLowerCase()})).test({message:e,name:"string_case",exclusive:!0,test:function(e){return sA(e)||e===e.toLowerCase()}})}},{key:"uppercase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xN.uppercase;return this.transform((function(e){return sA(e)?e:e.toUpperCase()})).test({message:e,name:"string_case",exclusive:!0,test:function(e){return sA(e)||e===e.toUpperCase()}})}}]),n}(JN);vA.prototype;var yA=function(e){se(n,e);var t=he(n);function n(){var e;return ne(this,n),(e=t.call(this,{type:"number"})).withMutation((function(){e.transform((function(e){var t=e;if("string"===typeof t){if(""===(t=t.replace(/\s/g,"")))return NaN;t=+t}return this.isType(t)?t:parseFloat(t)}))})),e}return ie(n,[{key:"_typeCheck",value:function(e){return e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!function(e){return e!=+e}(e)}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:IN.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test:function(t){return sA(t)||t>=this.resolve(e)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:IN.max;return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test:function(t){return sA(t)||t<=this.resolve(e)}})}},{key:"lessThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:IN.lessThan;return this.test({message:t,name:"max",exclusive:!0,params:{less:e},test:function(t){return sA(t)||t<this.resolve(e)}})}},{key:"moreThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:IN.moreThan;return this.test({message:t,name:"min",exclusive:!0,params:{more:e},test:function(t){return sA(t)||t>this.resolve(e)}})}},{key:"positive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:IN.positive;return this.moreThan(0,e)}},{key:"negative",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:IN.negative;return this.lessThan(0,e)}},{key:"integer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:IN.integer;return this.test({name:"integer",message:e,test:function(e){return sA(e)||Number.isInteger(e)}})}},{key:"truncate",value:function(){return this.transform((function(e){return sA(e)?e:0|e}))}},{key:"round",value:function(e){var t,n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((function(t){return sA(t)?t:Math[e](t)}))}}]),n}(JN);yA.prototype;var mA=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;var gA=new Date("");function kA(){return new bA}var bA=function(e){se(n,e);var t=he(n);function n(){var e;return ne(this,n),(e=t.call(this,{type:"date"})).withMutation((function(){e.transform((function(e){return this.isType(e)?e:(e=function(e){var t,n,r=[1,4,5,6,7,10,11],i=0;if(n=mA.exec(e)){for(var a,o=0;a=r[o];++o)n[a]=+n[a]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])):t=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?gA:new Date(e))}))})),e}return ie(n,[{key:"_typeCheck",value:function(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}},{key:"prepareParam",value:function(e,t){var n;if(WN.isRef(e))n=e;else{var r=this.cast(e);if(!this._typeCheck(r))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));n=r}return n}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:EN.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test:function(e){return sA(e)||e>=this.resolve(n)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:EN.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test:function(e){return sA(e)||e<=this.resolve(n)}})}}]),n}(JN);bA.INVALID_DATE=gA,kA.prototype=bA.prototype,kA.INVALID_DATE=gA;var wA=n(7499),_A=n.n(wA),xA=n(567),IA=n.n(xA),EA=n(9029),SA=n.n(EA),TA=n(6514),CA=n.n(TA);function NA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,i=new Set(t.map((function(e){var t=c(e,2),n=t[0],r=t[1];return"".concat(n,"-").concat(r)})));function a(e,t){var a=(0,qN.split)(e)[0];r.add(a),i.has("".concat(t,"-").concat(a))||n.push([t,a])}var o=function(t){if(AN()(e,t)){var n=e[t];r.add(t),WN.isRef(n)&&n.isSibling?a(n.path,t):DN(n)&&"deps"in n&&n.deps.forEach((function(e){return a(e,t)}))}};for(var u in e)o(u);return CA().array(Array.from(r),n).reverse()}function AA(e,t){var n=1/0;return e.some((function(e,r){var i;if(-1!==(null==(i=t.path)?void 0:i.indexOf(e)))return n=r,!0})),n}function DA(e){return function(t,n){return AA(e,t)-AA(e,n)}}function PA(){return PA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PA.apply(this,arguments)}var RA=function(e){return"[object Object]"===Object.prototype.toString.call(e)};function OA(e,t){var n=Object.keys(e.fields);return Object.keys(t).filter((function(e){return-1===n.indexOf(e)}))}var FA=DA([]),LA=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this,{type:"object"})).fields=Object.create(null),r._sortErrors=FA,r._nodes=[],r._excludedEdges=[],r.withMutation((function(){r.transform((function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){e=null}return this.isType(e)?e:null})),e&&r.shape(e)})),r}return ie(n,[{key:"_typeCheck",value:function(e){return RA(e)||"function"===typeof e}},{key:"_cast",value:function(e){var t,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Fn(ce(n.prototype),"_cast",this).call(this,e,i);if(void 0===a)return this.getDefault();if(!this._typeCheck(a))return a;var o,u=this.fields,s=null!=(t=i.stripUnknown)?t:this.spec.noUnknown,c=this._nodes.concat(Object.keys(a).filter((function(e){return-1===r._nodes.indexOf(e)}))),l={},f=PA({},i,{parent:l,__validating:i.__validating||!1}),h=!1,d=ae(c);try{for(d.s();!(o=d.n()).done;){var p=o.value,v=u[p],y=AN()(a,p);if(v){var m=void 0,g=a[p];f.path=(i.path?"".concat(i.path,"."):"")+p;var k="spec"in(v=v.resolve({value:g,context:i.context,parent:l}))?v.spec:void 0,b=null==k?void 0:k.strict;if(null==k?void 0:k.strip){h=h||p in a;continue}void 0!==(m=i.__validating&&b?a[p]:v.cast(a[p],f))&&(l[p]=m)}else y&&!s&&(l[p]=a[p]);l[p]!==a[p]&&(h=!0)}}catch(w){d.e(w)}finally{d.f()}return h?l:a}},{key:"_validate",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=[],o=r.sync,u=r.from,s=void 0===u?[]:u,c=r.originalValue,l=void 0===c?e:c,f=r.abortEarly,h=void 0===f?this.spec.abortEarly:f,d=r.recursive,p=void 0===d?this.spec.recursive:d;s=[{schema:this,value:l}].concat(ot(s)),r.__validating=!0,r.originalValue=l,r.from=s,Fn(ce(n.prototype),"_validate",this).call(this,e,r,(function(e,n){if(e){if(!MN.isError(e)||h)return void i(e,n);a.push(e)}if(p&&RA(n)){l=l||n;var u=t._nodes.map((function(e){return function(i,a){var o=-1===e.indexOf(".")?(r.path?"".concat(r.path,"."):"")+e:"".concat(r.path||"",'["').concat(e,'"]'),u=t.fields[e];u&&"validate"in u?u.validate(n[e],PA({},r,{path:o,from:s,strict:!0,parent:n,originalValue:l[e]}),a):a(null)}}));jN({sync:o,tests:u,value:n,errors:a,endEarly:h,sort:t._sortErrors,path:r.path},i)}else i(a[0]||null,n)}))}},{key:"clone",value:function(e){var t=Fn(ce(n.prototype),"clone",this).call(this,e);return t.fields=PA({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}},{key:"concat",value:function(e){for(var t=this,r=Fn(ce(n.prototype),"concat",this).call(this,e),i=r.fields,a=0,o=Object.entries(this.fields);a<o.length;a++){var u=c(o[a],2),s=u[0],l=u[1],f=i[s];void 0===f?i[s]=l:f instanceof JN&&l instanceof JN&&(i[s]=l.concat(f))}return r.withMutation((function(){return r.shape(i,t._excludedEdges)}))}},{key:"getDefaultFromShape",value:function(){var e=this,t={};return this._nodes.forEach((function(n){var r=e.fields[n];t[n]="default"in r?r.getDefault():void 0})),t}},{key:"_getDefault",value:function(){return"default"in this.spec?Fn(ce(n.prototype),"_getDefault",this).call(this):this._nodes.length?this.getDefaultFromShape():void 0}},{key:"shape",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.clone(),r=Object.assign(n.fields,e);return n.fields=r,n._sortErrors=DA(Object.keys(r)),t.length&&(Array.isArray(t[0])||(t=[t]),n._excludedEdges=[].concat(ot(n._excludedEdges),ot(t))),n._nodes=NA(r,n._excludedEdges),n}},{key:"pick",value:function(e){var t,n={},r=ae(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.fields[i]&&(n[i]=this.fields[i])}}catch(a){r.e(a)}finally{r.f()}return this.clone().withMutation((function(e){return e.fields={},e.shape(n)}))}},{key:"omit",value:function(e){var t=this.clone(),n=t.fields;t.fields={};var r,i=ae(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete n[a]}}catch(o){i.e(o)}finally{i.f()}return t.withMutation((function(){return t.shape(n)}))}},{key:"from",value:function(e,t,n){var r=(0,qN.getter)(e,!0);return this.transform((function(i){if(null==i)return i;var a=i;return AN()(i,e)&&(a=PA({},i),n||delete a[e],a[t]=r(i)),a}))}},{key:"noUnknown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TN.noUnknown;"string"===typeof e&&(t=e,e=!0);var n=this.test({name:"noUnknown",exclusive:!0,message:t,test:function(t){if(null==t)return!0;var n=OA(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}},{key:"unknown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TN.noUnknown;return this.noUnknown(!e,t)}},{key:"transformKeys",value:function(e){return this.transform((function(t){return t&&SA()(t,(function(t,n){return e(n)}))}))}},{key:"camelCase",value:function(){return this.transformKeys(IA())}},{key:"snakeCase",value:function(){return this.transformKeys(_A())}},{key:"constantCase",value:function(){return this.transformKeys((function(e){return _A()(e).toUpperCase()}))}},{key:"describe",value:function(){var e=Fn(ce(n.prototype),"describe",this).call(this);return e.fields=UN()(this.fields,(function(e){return e.describe()})),e}}]),n}(JN);function MA(e){return new LA(e)}function jA(){return jA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jA.apply(this,arguments)}MA.prototype=LA.prototype;var VA=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this,{type:"array"})).innerType=void 0,r.innerType=e,r.withMutation((function(){r.transform((function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){e=null}return this.isType(e)?e:null}))})),r}return ie(n,[{key:"_typeCheck",value:function(e){return Array.isArray(e)}},{key:"_subType",get:function(){return this.innerType}},{key:"_cast",value:function(e,t){var r=this,i=Fn(ce(n.prototype),"_cast",this).call(this,e,t);if(!this._typeCheck(i)||!this.innerType)return i;var a=!1,o=i.map((function(e,n){var i=r.innerType.cast(e,jA({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return i!==e&&(a=!0),i}));return a?o:i}},{key:"_validate",value:function(e){var t,r,i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,u=[],s=a.sync,c=a.path,l=this.innerType,f=null!=(t=a.abortEarly)?t:this.spec.abortEarly,h=null!=(r=a.recursive)?r:this.spec.recursive,d=null!=a.originalValue?a.originalValue:e;Fn(ce(n.prototype),"_validate",this).call(this,e,a,(function(e,t){if(e){if(!MN.isError(e)||f)return void o(e,t);u.push(e)}if(h&&l&&i._typeCheck(t)){d=d||t;for(var n=new Array(t.length),r=function(e){var r=t[e],i="".concat(a.path||"","[").concat(e,"]"),o=jA({},a,{path:i,strict:!0,parent:t,index:e,originalValue:d[e]});n[e]=function(e,t){return l.validate(r,o,t)}},p=0;p<t.length;p++)r(p);jN({sync:s,path:c,value:t,errors:u,endEarly:f,tests:n},o)}else o(u[0]||null,t)}))}},{key:"clone",value:function(e){var t=Fn(ce(n.prototype),"clone",this).call(this,e);return t.innerType=this.innerType,t}},{key:"concat",value:function(e){var t=Fn(ce(n.prototype),"concat",this).call(this,e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}},{key:"of",value:function(e){var t=this.clone();if(!DN(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+wN(e));return t.innerType=e,t}},{key:"length",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CN.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test:function(t){return sA(t)||t.length===this.resolve(e)}})}},{key:"min",value:function(e,t){return t=t||CN.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},test:function(t){return sA(t)||t.length>=this.resolve(e)}})}},{key:"max",value:function(e,t){return t=t||CN.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},test:function(t){return sA(t)||t.length<=this.resolve(e)}})}},{key:"ensure",value:function(){var e=this;return this.default((function(){return[]})).transform((function(t,n){return e._typeCheck(t)?t:null==n?[]:[].concat(n)}))}},{key:"compact",value:function(e){var t=e?function(t,n,r){return!e(t,n,r)}:function(e){return!!e};return this.transform((function(e){return null!=e?e.filter(t):e}))}},{key:"describe",value:function(){var e=Fn(ce(n.prototype),"describe",this).call(this);return this.innerType&&(e.innerType=this.innerType.describe()),e}},{key:"nullable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Fn(ce(n.prototype),"nullable",this).call(this,e)}},{key:"defined",value:function(){return Fn(ce(n.prototype),"defined",this).call(this)}},{key:"required",value:function(e){return Fn(ce(n.prototype),"required",this).call(this,e)}}]),n}(JN);VA.prototype;var UA="@firebase/database",qA="0.13.3",zA="";var BA=function(){function e(t){ne(this,e),this.domStorage_=t,this.prefix_="firebase:"}return ie(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),qe(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ue(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),WA=function(){function e(){ne(this,e),this.cache_={},this.isInMemoryStorage=!0}return ie(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Be(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),KA=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new BA(t)}}catch(n){}return new WA},GA=KA("localStorage"),HA=KA("sessionStorage"),QA=new gt("@firebase/database"),$A=function(){var e=1;return function(){return e++}}(),YA=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,ge(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Xe;n.update(t);var r=n.digest();return we.encodeByteArray(r)},JA=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?qe(r):r,t+=" "}return t},XA=null,ZA=!0,eD=function(e,t){ge(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(QA.logLevel=ft.VERBOSE,XA=QA.log.bind(QA),t&&HA.set("logging_enabled",!0)):"function"===typeof e?XA=e:(XA=null,HA.remove("logging_enabled"))},tD=function(){if(!0===ZA&&(ZA=!1,null===XA&&!0===HA.get("logging_enabled")&&eD(!0)),XA){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=JA.apply(null,t);XA(r)}},nD=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];tD.apply(void 0,[e].concat(n))}},rD=function(){var e="FIREBASE INTERNAL ERROR: "+JA.apply(void 0,arguments);QA.error(e)},iD=function(){var e="FIREBASE FATAL ERROR: ".concat(JA.apply(void 0,arguments));throw QA.error(e),new Error(e)},aD=function(){var e="FIREBASE WARNING: "+JA.apply(void 0,arguments);QA.warn(e)},oD=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},uD="[MIN_NAME]",sD="[MAX_NAME]",cD=function(e,t){if(e===t)return 0;if(e===uD||t===sD)return-1;if(t===uD||e===sD)return 1;var n=kD(e),r=kD(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},lD=function(e,t){return e===t?0:e<t?-1:1},fD=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+qe(t))},hD=function e(t){if("object"!==typeof t||null===t)return qe(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=qe(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},dD=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function pD(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var vD=function(e){ge(!oD(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var yD=new RegExp("^-?(0*)\\d{1,10}$"),mD=-2147483648,gD=2147483647,kD=function(e){if(yD.test(e)){var t=Number(e);if(t>=mD&&t<=gD)return t}return null},bD=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw aD("Exception was thrown by user callback.",e),t}),Math.floor(0))}},wD=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},_D=function(){function e(t,n){var r=this;ne(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return ie(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){aD('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),xD=function(){function e(t,n,r){var i=this;ne(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return ie(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(tD("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',aD(e)}}]),e}(),ID=function(){function e(t){ne(this,e),this.accessToken=t}return ie(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();ID.OWNER="owner";var ED="5",SD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,TD="websocket",CD="long_polling",ND=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];ne(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=GA.get("host:"+t)||this._host}return ie(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&GA.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function AD(e,t,n){var r;if(ge("string"===typeof t,"typeof type must == string"),ge("object"===typeof n,"typeof params must == object"),t===TD)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==CD)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return pD(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var DD=function(){function e(){ne(this,e),this.counters_={}}return ie(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Be(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Ee(void 0,this.counters_)}}]),e}(),PD={},RD={};function OD(e){var t=e.toString();return PD[t]||(PD[t]=new DD),PD[t]}var FD=function(){function e(t){ne(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return ie(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&bD((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),LD="start",MD="close",jD=function(){function e(t,n,r,i,a,o,u){var s=this;ne(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nD(t),this.stats_=OD(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),AD(n,CD,e)}}return ie(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new FD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Oe()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new VD((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===LD)n.id=a,n.password=o;else{if(i!==MD)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=ED,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&SD.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=qe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=_e(t),r=dD(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Oe()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=qe(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Oe()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),VD=function(){function e(t,n,r,i){if(ne(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Oe())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=$A(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){tD("frame writing exception"),u.stack&&tD(u.stack),tD(u)}}}return ie(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Oe()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){tD("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||tD("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),UD=null;"undefined"!==typeof MozWebSocket?UD=MozWebSocket:"undefined"!==typeof WebSocket&&(UD=WebSocket);var qD=function(){function e(t,n,r,i,a,o,u){ne(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nD(this.connId),this.stats_=OD(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return ie(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,GA.set("previous_websocket_failure",!0);try{var r;if(Oe()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(ED,"/").concat(zA,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new UD(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){GA.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Ue(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(ge(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=qe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=dD(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=ED,!Oe()&&"undefined"!==typeof location&&location.hostname&&SD.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),AD(e,TD,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==UD&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return GA.isInMemoryStorage||!0===GA.get("previous_websocket_failure")}}]),e}();qD.responsesRequiredToBeHealthy=2,qD.healthyTimeout=3e4;var zD=function(){function e(t){ne(this,e),this.initTransports_(t)}return ie(e,[{key:"initTransports_",value:function(t){var n=qD&&qD.isAvailable(),r=n&&!qD.previouslyFailed();if(t.webSocketOnly&&(n||aD("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[qD];else{var i,a=this.transports_=[],o=ae(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[jD,qD]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();zD.globalTransportInitialized_=!1;var BD=function(){function e(t,n,r,i,a,o,u,s,c,l){ne(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nD("c:"+this.id+":"),this.transportManager_=new zD(n),this.log_("Connection created"),this.start_()}return ie(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=wD((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=fD("t",e),n=fD("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=fD("t",e),n=fD("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=fD("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?rD("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rD("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ED!==n&&aD("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),wD((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):wD((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(GA.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),WD=function(){function e(){ne(this,e)}return ie(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),KD=function(){function e(t){ne(this,e),this.allowedEvents_=t,this.listeners_={},ge(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return ie(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=ot(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){ge(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),GD=function(e){se(n,e);var t=he(n);function n(){var e;return ne(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ne()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return ie(n,[{key:"getInitialEvent",value:function(e){return ge("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(KD),HD=function(){function e(t,n){if(ne(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return ie(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function QD(){return new HD("")}function $D(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function YD(e){return e.pieces_.length-e.pieceNum_}function JD(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new HD(e.pieces_,t)}function XD(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ZD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function eP(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new HD(t,0)}function tP(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof HD)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new HD(n,0)}function nP(e){return e.pieceNum_>=e.pieces_.length}function rP(e,t){var n=$D(e),r=$D(t);if(null===n)return t;if(n===r)return rP(JD(e),JD(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function iP(e,t){if(YD(e)!==YD(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function aP(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(YD(e)>YD(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var oP=ie((function e(t,n){ne(this,e),this.errorPrefix_=n,this.parts_=ZD(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=rt(this.parts_[r]);uP(this)}));function uP(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+sP(e))}function sP(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var cP=function(e){se(n,e);var t=he(n);function n(){var e,r,i;return ne(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return ie(n,[{key:"getInitialEvent",value:function(e){return ge("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(KD),lP=1e3,fP=function(e){se(n,e);var t=he(n);function n(e,r,i,a,o,u,s,c){var l;if(ne(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=nD("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=lP,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Oe())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return cP.getInstance().on("visible",l.onVisible_,oe(l)),-1===e.host.indexOf("fblocal")&&GD.getInstance().on("online",l.onOnline_,oe(l)),l}return ie(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(qe(i)),ge(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Se,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ge(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ze(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ze(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+qe(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):rD("Unrecognized action received from server: "+qe(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;ge(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lP,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=lP,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=lP),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=ee(X().mark((function e(){var t,r,i,a,o,u,s,l,f,h,d,p,v,y,m=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,l=function(){s?s.close():(u=!0,i())},f=function(e){ge(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=c(d,2),v=p[0],y=p[1],u?tD("getToken() completed but was canceled"):(tD("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,s=new BD(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){aD(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&aD(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){tD("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){tD("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ke(this.interruptReasons_)&&(this.reconnectDelay_=lP,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return hD(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new HD(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){tD("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){tD("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=ae(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=ae(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Oe()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+zA.replace(/\./g,"-")]=1,Ne()?e["framework.cordova"]=1:Pe()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=GD.getInstance().currentlyOnline();return Ke(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Be(e,"w")){var n=We(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();aD("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(WD);fP.nextPersistentConnectionId_=0,fP.nextConnectionId_=0;var hP,dP=function(){function e(t,n){ne(this,e),this.name=t,this.node=n}return ie(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),pP=function(){function e(){ne(this,e)}return ie(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new dP(uD,e),r=new dP(uD,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return dP.MIN}}]),e}(),vP=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"compare",value:function(e,t){return cD(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw ke("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return dP.MIN}},{key:"maxPost",value:function(){return new dP(sD,hP)}},{key:"makePost",value:function(e,t){return ge("string"===typeof e,"KeyIndex indexValue must always be a string."),new dP(e,hP)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return hP},set:function(e){hP=e}}]),n}(pP),yP=new vP,mP=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;ne(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return ie(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),gP=function(){function e(t,n,r,i,a){ne(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:wP.EMPTY_NODE,this.right=null!=a?a:wP.EMPTY_NODE}return ie(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return wP.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return wP.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();gP.RED=!0,gP.BLACK=!1;var kP,bP=function(){function e(){ne(this,e)}return ie(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new gP(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),wP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;ne(this,e),this.comparator_=t,this.root_=n}return ie(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,gP.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,gP.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new mP(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new mP(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new mP(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new mP(this.root_,null,this.comparator_,!0,e)}}]),e}();function _P(e,t){return cD(e.name,t.name)}function xP(e,t){return cD(e,t)}wP.EMPTY_NODE=new bP;var IP,EP,SP,TP=function(e){return"number"===typeof e?"number:"+vD(e):"string:"+e},CP=function(e){if(e.isLeafNode()){var t=e.val();ge("string"===typeof t||"number"===typeof t||"object"===typeof t&&Be(t,".sv"),"Priority must be a string or number.")}else ge(e===kP||e.isEmpty(),"priority of unexpected type.");ge(e===kP||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},NP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;ne(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,ge(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),CP(this.priorityNode_)}return ie(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return nP(t)?this:".priority"===$D(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=$D(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(ge(".priority"!==r||1===YD(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(JD(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+TP(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?vD(this.value_):this.value_,this.lazyHash_=YA(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(ge(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return ge(i>=0,"Unknown leaf type: "+n),ge(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return IP},set:function(e){IP=e}}]),e}();NP.VALUE_TYPE_ORDER=["object","boolean","number","string"];var AP,DP,PP=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?cD(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return dP.MIN}},{key:"maxPost",value:function(){return new dP(sD,new NP("[PRIORITY-POST]",SP))}},{key:"makePost",value:function(e,t){var n=EP(e);return new dP(t,new NP("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(pP),RP=new PP,OP=Math.log(2),FP=function(){function e(t){ne(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/OP,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return ie(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),LP=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new gP(o,a.node,gP.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new gP(o,a.node,gP.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new gP(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,gP.BLACK):(u(f,gP.BLACK),u(f,gP.RED))}return a}(new FP(e.length));return new wP(r||t,a)},MP={},jP=function(){function e(t,n){ne(this,e),this.indexes_=t,this.indexSet_=n}return ie(e,[{key:"get",value:function(e){var t=We(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof wP?t:null}},{key:"hasIndex",value:function(e){return Be(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){ge(t!==yP,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(dP.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?LP(i,t.getCompare()):MP;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Ge(this.indexes_,(function(e,i){var a=We(r.indexSet_,i);if(ge(a,"Missing index implementation for "+i),e===MP){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(dP.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),LP(o,a.getCompare())}return MP}var c=n.get(t.name),l=e;return c&&(l=l.remove(new dP(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Ge(this.indexes_,(function(e){if(e===MP)return e;var r=n.get(t.name);return r?e.remove(new dP(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return ge(MP&&RP,"ChildrenNode.ts has not been loaded"),AP=AP||new e({".priority":MP},{".priority":RP})}}]),e}(),VP=function(){function e(t,n,r){ne(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&CP(this.priorityNode_),this.children_.isEmpty()&&ge(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return ie(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||DP}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?DP:t}},{key:"getChild",value:function(e){var t=$D(e);return null===t?this:this.getImmediateChild(t).getChild(JD(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(ge(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new dP(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?DP:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=$D(e);if(null===n)return t;ge(".priority"!==$D(e)||1===YD(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(JD(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(RP,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+TP(this.getPriority().val())+":"),this.forEachChild(RP,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":YA(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new dP(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new dP(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new dP(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,dP.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,dP.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===UP?-1:0}},{key:"withIndex",value:function(t){if(t===yP||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===yP||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(RP),r=t.getIterator(RP),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===yP?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return DP||(DP=new e(new wP(xP),null,jP.Default))}}]),e}();VP.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var UP=new(function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.call(this,new wP(xP),VP.EMPTY_NODE,jP.Default)}return ie(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return VP.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(VP));Object.defineProperties(dP,{MIN:{value:new dP(uD,VP.EMPTY_NODE)},MAX:{value:new dP(sD,UP)}}),vP.__EMPTY_NODE=VP.EMPTY_NODE,NP.__childrenNodeConstructor=VP,kP=UP,function(e){SP=e}(UP);function qP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return VP.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),ge(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new NP(n,qP(t))}if(e instanceof Array){var r=VP.EMPTY_NODE;return pD(e,(function(t,n){if(Be(e,t)&&"."!==t.substring(0,1)){var i=qP(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(qP(t))}var i=[],a=!1,o=e;if(pD(o,(function(e,t){if("."!==e.substring(0,1)){var n=qP(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new dP(e,n)))}})),0===i.length)return VP.EMPTY_NODE;var u=LP(i,_P,(function(e){return e.name}),xP);if(a){var s=LP(i,RP.getCompare());return new VP(u,qP(t),new jP({".priority":s},{".priority":RP}))}return new VP(u,qP(t),jP.Default)}!function(e){EP=e}(qP);var zP=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this)).indexPath_=e,ge(!nP(e)&&".priority"!==$D(e),"Can't create PathIndex with empty path or .priority key"),r}return ie(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?cD(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=qP(e),r=VP.EMPTY_NODE.updateChild(this.indexPath_,n);return new dP(t,r)}},{key:"maxPost",value:function(){var e=VP.EMPTY_NODE.updateChild(this.indexPath_,UP);return new dP(sD,e)}},{key:"toString",value:function(){return ZD(this.indexPath_,0).join("/")}}]),n}(pP),BP=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?cD(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return dP.MIN}},{key:"maxPost",value:function(){return dP.MAX}},{key:"makePost",value:function(e,t){var n=qP(e);return new dP(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(pP),WP=new BP,KP="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function GP(e){return{type:"value",snapshotNode:e}}function HP(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function QP(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function $P(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var YP=function(){function e(t){ne(this,e),this.index_=t}return ie(e,[{key:"updateChild",value:function(e,t,n,r,i,a){ge(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(QP(t,o)):ge(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(HP(t,n)):a.trackChildChange($P(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(RP,(function(e,r){t.hasChild(e)||n.trackChildChange(QP(e,r))})),t.isLeafNode()||t.forEachChild(RP,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange($P(t,r,i))}else n.trackChildChange(HP(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?VP.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),JP=function(){function e(t){ne(this,e),this.indexedFilter_=new YP(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return ie(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new dP(t,n))||(n=VP.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=VP.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(VP.EMPTY_NODE);var i=this;return t.forEachChild(RP,(function(e,t){i.matches(new dP(e,t))||(r=r.updateImmediateChild(e,VP.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),XP=function(){function e(t){ne(this,e),this.rangedFilter_=new JP(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return ie(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new dP(t,n))||(n=VP.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=VP.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=VP.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(VP.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var f=this.index_.getCompare();c=function(e,t){return f(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var h=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&h<this.limit_&&c(p,s)<=0?h++:r=r.updateImmediateChild(p.name,VP.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;ge(u.numChildren()===this.limit_,"");var s=new dP(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||u.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange($P(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(QP(t,f));var p=u.updateImmediateChild(t,VP.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(HP(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(QP(c.name,c.node)),i.trackChildChange(HP(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,VP.EMPTY_NODE)):e}}]),e}(),ZP=function(){function e(){ne(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=RP}return ie(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return ge(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return ge(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:uD}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return ge(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return ge(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:sD}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return ge(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===RP}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function eR(e){var t,n={};return e.isDefault()||(e.index_===RP?t="$priority":e.index_===WP?t="$value":e.index_===yP?t="$key":(ge(e.index_ instanceof zP,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=qe(t),e.startSet_&&(n.startAt=qe(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+qe(e.indexStartName_))),e.endSet_&&(n.endAt=qe(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+qe(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function tR(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==RP&&(t.i=e.index_.toString()),t}var nR=function(e){se(n,e);var t=he(n);function n(e,r,i,a){var o;return ne(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=nD("p:rest:"),o.listens_={},o}return ie(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=eR(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),We(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=eR(e._queryParams),r=e._path.toString(),i=new Se;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=c(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+$e(n);t.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=Ue(l.responseText)}catch(n){aD("Failed to parse JSON response for "+s+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&aD("Got unsuccessful REST response for "+s+" Status: "+l.status),r(l.status);r=null}},l.open("GET",s,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(ge(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(WD),rR=function(){function e(){ne(this,e),this.rootNode_=VP.EMPTY_NODE}return ie(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function iR(){return{value:null,children:new Map}}function aR(e,t,n){if(nP(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=$D(t);e.children.has(r)||e.children.set(r,iR()),aR(e.children.get(r),t=JD(t),n)}}function oR(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){oR(r,new HD(t.toString()+"/"+e),n)}))}var uR,sR=function(){function e(t){ne(this,e),this.collection_=t,this.last_=null}return ie(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&pD(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),cR=function(){function e(t,n){ne(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new sR(t);var r=1e4+2e4*Math.random();wD(this.reportStats_.bind(this),Math.floor(r))}return ie(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;pD(t,(function(t,i){i>0&&Be(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),wD(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function lR(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(uR||(uR={}));var fR,hR=function(){function e(t,n,r){ne(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=uR.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return ie(e,[{key:"operationForChild",value:function(t){if(nP(this.path)){if(null!=this.affectedTree.value)return ge(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new HD(t));return new e(QD(),n,this.revert)}return ge($D(this.path)===t,"operationForChild called for unrelated child."),new e(JD(this.path),this.affectedTree,this.revert)}}]),e}(),dR=function(){function e(t,n){ne(this,e),this.source=t,this.path=n,this.type=uR.LISTEN_COMPLETE}return ie(e,[{key:"operationForChild",value:function(t){return nP(this.path)?new e(this.source,QD()):new e(this.source,JD(this.path))}}]),e}(),pR=function(){function e(t,n,r){ne(this,e),this.source=t,this.path=n,this.snap=r,this.type=uR.OVERWRITE}return ie(e,[{key:"operationForChild",value:function(t){return nP(this.path)?new e(this.source,QD(),this.snap.getImmediateChild(t)):new e(this.source,JD(this.path),this.snap)}}]),e}(),vR=function(){function e(t,n,r){ne(this,e),this.source=t,this.path=n,this.children=r,this.type=uR.MERGE}return ie(e,[{key:"operationForChild",value:function(t){if(nP(this.path)){var n=this.children.subtree(new HD(t));return n.isEmpty()?null:n.value?new pR(this.source,QD(),n.value):new e(this.source,QD(),n)}return ge($D(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,JD(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),yR=function(){function e(t,n,r){ne(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return ie(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(nP(e))return this.isFullyInitialized()&&!this.filtered_;var t=$D(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),mR=ie((function e(t){ne(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function gR(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw ke("Should only compare child_ events.");var r=new dP(t.childName,t.snapshotNode),i=new dP(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function kR(e,t){return{eventCache:e,serverCache:t}}function bR(e,t,n,r){return kR(new yR(t,n,r),e.serverCache)}function wR(e,t,n,r){return kR(e.eventCache,new yR(t,n,r))}function _R(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function xR(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var IR=function(){return fR||(fR=new wP(lD)),fR},ER=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:IR();ne(this,e),this.value=t,this.children=n}return ie(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:QD(),value:this.value};if(nP(e))return null;var n=$D(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(JD(e),t);return null!=i?{path:tP(new HD(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(nP(t))return this;var n=$D(t),r=this.children.get(n);return null!==r?r.subtree(JD(t)):new e(null)}},{key:"set",value:function(t,n){if(nP(t))return new e(n,this.children);var r=$D(t),i=(this.children.get(r)||new e(null)).set(JD(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(nP(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=$D(t),r=this.children.get(n);if(r){var i,a=r.remove(JD(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(nP(e))return this.value;var t=$D(e),n=this.children.get(t);return n?n.get(JD(e)):null}},{key:"setTree",value:function(t,n){if(nP(t))return n;var r,i=$D(t),a=(this.children.get(i)||new e(null)).setTree(JD(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(QD(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(tP(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,QD(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(nP(e))return null;var i=$D(e),a=this.children.get(i);return a?a.findOnPath_(JD(e),tP(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,QD(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(nP(t))return this;this.value&&r(n,this.value);var i=$D(t),a=this.children.get(i);return a?a.foreachOnPath_(JD(t),tP(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(QD(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(tP(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return pD(t,(function(e,t){n=n.set(new HD(e),t)})),n}}]),e}(),SR=function(){function e(t){ne(this,e),this.writeTree_=t}return ie(e,null,[{key:"empty",value:function(){return new e(new ER(null))}}]),e}();function TR(e,t,n){if(nP(t))return new SR(new ER(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=rP(i,t);return a=a.updateChild(o,n),new SR(e.writeTree_.set(i,a))}var u=new ER(n),s=e.writeTree_.setTree(t,u);return new SR(s)}function CR(e,t,n){var r=e;return pD(n,(function(e,n){r=TR(r,tP(t,e),n)})),r}function NR(e,t){if(nP(t))return SR.empty();var n=e.writeTree_.setTree(t,new ER(null));return new SR(n)}function AR(e,t){return null!=DR(e,t)}function DR(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(rP(n.path,t)):null}function PR(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(RP,(function(e,n){t.push(new dP(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new dP(e,n.value))})),t}function RR(e,t){if(nP(t))return e;var n=DR(e,t);return new SR(null!=n?new ER(n):e.writeTree_.subtree(t))}function OR(e){return e.writeTree_.isEmpty()}function FR(e,t){return LR(QD(),e.writeTree_,t)}function LR(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(ge(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=LR(tP(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(tP(e,".priority"),r)),n}function MR(e,t){return JR(t,e)}function jR(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function VR(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));ge(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&UR(u,r.path)?i=!1:aP(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=zR(e.allWrites,qR,QD()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=NR(e.visibleWrites,r.path):pD(r.children,(function(t){e.visibleWrites=NR(e.visibleWrites,tP(r.path,t))}));return!0}return!1}function UR(e,t){if(e.snap)return aP(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&aP(tP(e.path,n),t))return!0;return!1}function qR(e){return e.visible}function zR(e,t,n){for(var r=SR.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)aP(n,o)?r=TR(r,u=rP(n,o),a.snap):aP(o,n)&&(u=rP(o,n),r=TR(r,QD(),a.snap.getChild(u)));else{if(!a.children)throw ke("WriteRecord should have .snap or .children");if(aP(n,o))r=CR(r,u=rP(n,o),a.children);else if(aP(o,n))if(nP(u=rP(o,n)))r=CR(r,QD(),a.children);else{var s=We(a.children,$D(u));if(s){var c=s.getChild(JD(u));r=TR(r,QD(),c)}}}}}return r}function BR(e,t,n,r,i){if(r||i){var a=RR(e.visibleWrites,t);if(!i&&OR(a))return n;if(i||null!=n||AR(a,QD())){return FR(zR(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(aP(e.path,t)||aP(t,e.path))}),t),n||VP.EMPTY_NODE)}return null}var o=DR(e.visibleWrites,t);if(null!=o)return o;var u=RR(e.visibleWrites,t);return OR(u)?n:null!=n||AR(u,QD())?FR(u,n||VP.EMPTY_NODE):null}function WR(e,t,n,r){return BR(e.writeTree,e.treePath,t,n,r)}function KR(e,t){return function(e,t,n){var r=VP.EMPTY_NODE,i=DR(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(RP,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=RR(e.visibleWrites,t);return n.forEachChild(RP,(function(e,t){var n=FR(RR(a,new HD(e)),t);r=r.updateImmediateChild(e,n)})),PR(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return PR(RR(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function GR(e,t,n,r){return function(e,t,n,r,i){ge(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=tP(t,n);if(AR(e.visibleWrites,a))return null;var o=RR(e.visibleWrites,a);return OR(o)?i.getChild(n):FR(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function HR(e,t){return function(e,t){return DR(e.visibleWrites,t)}(e.writeTree,tP(e.treePath,t))}function QR(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=RR(e.visibleWrites,t),c=DR(s,QD());if(null!=c)u=c;else{if(null==n)return[];u=FR(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function $R(e,t,n){return function(e,t,n,r){var i=tP(t,n),a=DR(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?FR(RR(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function YR(e,t){return JR(tP(e.treePath,t),e.writeTree)}function JR(e,t){return{treePath:e,writeTree:t}}var XR=function(){function e(){ne(this,e),this.changeMap=new Map}return ie(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;ge("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ge(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,$P(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,QP(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,HP(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ke("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,$P(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),ZR=new(function(){function e(){ne(this,e)}return ie(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),eO=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;ne(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return ie(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new yR(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $R(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:xR(this.viewCache_),i=QR(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function tO(e,t,n,r,i){var a,o,u=new XR;if(n.type===uR.OVERWRITE){var s=n;s.source.fromUser?a=iO(e,t,s.path,s.snap,r,i,u):(ge(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!nP(s.path),a=rO(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===uR.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=tP(n,r);aO(t,$D(c))&&(u=iO(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=tP(n,r);aO(t,$D(c))||(u=iO(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(ge(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=uO(e,t,c.path,c.children,r,i,o,u))}else if(n.type===uR.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=HR(r,n))return t;var u,s=new eO(r,t,i),c=t.eventCache.getNode();if(nP(n)||".priority"===$D(n)){var l;if(t.serverCache.isFullyInitialized())l=WR(r,xR(t));else{var f=t.serverCache.getNode();ge(f instanceof VP,"serverChildren would be complete if leaf node"),l=KR(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=$D(n),d=$R(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,JD(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,VP.EMPTY_NODE,JD(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=WR(r,xR(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=HR(r,QD()),bR(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=HR(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(nP(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return rO(e,t,n,s.getNode().getChild(n),i,a,u,o);if(nP(n)){var c=new ER(null);return s.getNode().forEachChild(yP,(function(e,t){c=c.set(new HD(e),t)})),uO(e,t,n,c,i,a,u,o)}return t}var l=new ER(null);return r.foreach((function(e,t){var r=tP(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),uO(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==uR.LISTEN_COMPLETE)throw ke("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=wR(t,a.getNode(),a.isFullyInitialized()||nP(n),a.isFiltered());return nO(e,o,n,r,ZR,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=_R(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(GP(_R(t)))}}(t,a,f),{viewCache:a,changes:f}}function nO(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=HR(r,n))return t;if(nP(n))if(ge(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=xR(t),l=KR(r,c instanceof VP?c:VP.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=WR(r,xR(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=$D(n);if(".priority"===h){ge(1===YD(n),"Can't have a priority with additional path components");var d=s.getNode(),p=GR(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=JD(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var m=GR(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(h).updateChild(y,m):s.getNode().getImmediateChild(h)}else v=$R(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,y,i,a):s.getNode()}}return bR(t,o,s.isFullyInitialized()||nP(n),e.filter.filtersNodes())}function rO(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(nP(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=$D(n);if(!c.isCompleteForPath(n)&&YD(n)>1)return t;var d=JD(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,ZR,null)}var v=wR(t,s,c.isFullyInitialized()||nP(n),l.filtersNodes());return nO(e,v,n,i,new eO(i,v,a),u)}function iO(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new eO(i,t,a);if(nP(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=bR(t,s,!0,e.filter.filtersNodes());else{var f=$D(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=bR(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=JD(n),p=c.getNode().getImmediateChild(f);if(nP(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===XD(d)&&v.getChild(eP(d)).isEmpty()?v:v.updateChild(d,r):VP.EMPTY_NODE}if(p.equals(h))u=t;else u=bR(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function aO(e,t){return e.eventCache.isCompleteForChild(t)}function oO(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function uO(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=nP(n)?r:new ER(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=oO(0,t.serverCache.getNode().getImmediateChild(n),r);c=rO(e,c,new HD(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!s){var f=oO(0,t.serverCache.getNode().getImmediateChild(n),r);c=rO(e,c,new HD(n),f,i,a,o,u)}})),c}var sO,cO=function(){function e(t,n){ne(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new YP(i.getIndex()),o=(r=i).loadsAllData()?new YP(r.getIndex()):r.hasLimit()?new XP(r):new JP(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(VP.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(VP.EMPTY_NODE,s.getNode(),null),f=new yR(c,u.isFullyInitialized(),a.filtersNodes()),h=new yR(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=kR(h,f),this.eventGenerator_=new mR(this.query_)}return ie(e,[{key:"query",get:function(){return this.query_}}]),e}();function lO(e,t){var n=xR(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!nP(t)&&!n.getImmediateChild($D(t)).isEmpty())?n.getChild(t):null}function fO(e){return 0===e.eventRegistrations_.length}function hO(e,t,n){var r=[];if(n){ge(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function dO(e,t,n,r){t.type===uR.MERGE&&null!==t.source.queryId&&(ge(xR(e.viewCache_),"We should always have a full cache before handling merges"),ge(_R(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=tO(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,ge(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),ge(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),ge(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,pO(e,u.changes,u.viewCache.eventCache.getNode(),null)}function pO(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),gR(e,i,"child_removed",t,r,n),gR(e,i,"child_added",t,r,n),gR(e,i,"child_moved",a,r,n),gR(e,i,"child_changed",t,r,n),gR(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var vO,yO=ie((function e(){ne(this,e),this.views=new Map}));function mO(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return ge(null!=a,"SyncTree gave us an op for an invalid query."),dO(a,t,n,r)}var o,u=[],s=ae(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(dO(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function gO(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=WR(n,i?r:null),s=!1;u?s=!0:r instanceof VP?(u=KR(n,r),s=!1):(u=VP.EMPTY_NODE,s=!1);var c=kR(new yR(u,s,!1),new yR(r,i,!1));return new cO(t,c)}return o}function kO(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=IO(e);if("default"===i){var s,l=ae(e.views.entries());try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];o=o.concat(hO(d,n,r)),fO(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(o=o.concat(hO(p,n,r)),fO(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!IO(e)&&a.push(new(ge(sO,"Reference.ts has not been loaded"),sO)(t._repo,t._path)),{removed:a,events:o}}function bO(e){var t,n=[],r=ae(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function wO(e,t){var n,r=null,i=ae(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||lO(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function _O(e,t){if(t._queryParams.loadsAllData())return EO(e);var n=t._queryIdentifier;return e.views.get(n)}function xO(e,t){return null!=_O(e,t)}function IO(e){return null!=EO(e)}function EO(e){var t,n=ae(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var SO=1,TO=ie((function e(t){ne(this,e),this.listenProvider_=t,this.syncPointTree_=new ER(null),this.pendingWriteTree_={visibleWrites:SR.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function CO(e,t,n,r,i){return function(e,t,n,r,i){ge(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=TR(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?LO(e,new pR({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function NO(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=jR(e.pendingWriteTree_,t),i=VR(e.pendingWriteTree_,t);if(i){var a=new ER(null);return null!=r.snap?a=a.set(QD(),!0):pD(r.children,(function(e){a=a.set(new HD(e),!0)})),LO(e,new hR(r.path,a,n))}return[]}function AO(e,t,n){return LO(e,new pR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function DO(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||xO(a,t))){var u=kO(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var s=u.removed;o=u.events;var c=-1!==s.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return IO(t)}));if(c&&!l){var f=e.syncPointTree_.subtree(i);if(!f.isEmpty())for(var h=function(e){return e.fold((function(e,t,n){if(t&&IO(t))return[EO(t)];var r=[];return t&&(r=bO(t)),pD(n,(function(e,t){r=r.concat(t)})),r}))}(f),d=0;d<h.length;++d){var p=h[d],v=p.query,y=VO(e,p);e.listenProvider_.startListening(KO(v),UO(e,v),y.hashFn,y.onComplete)}}if(!l&&s.length>0&&!r)if(c){e.listenProvider_.stopListening(KO(t),null)}else s.forEach((function(t){var n=e.queryToTagMap.get(qO(t));e.listenProvider_.stopListening(KO(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=qO(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,s)}return o}function PO(e,t,n,r){var i=zO(e,r);if(null!=i){var a=BO(i),o=a.path,u=a.queryId,s=rP(o,t);return WO(e,o,new pR(lR(u),s,n))}return[]}function RO(e,t){var n=e._path,r=null,i=!1;t.syncPointTree_.foreachOnPath(n,(function(e,t){var a=rP(e,n);r=r||wO(t,a),i=i||IO(t)}));var a,o=t.syncPointTree_.get(n);(o?(i=i||IO(o),r=r||wO(o,QD())):(o=new yO,t.syncPointTree_=t.syncPointTree_.set(n,o)),null!=r)?a=!0:(a=!1,r=VP.EMPTY_NODE,t.syncPointTree_.subtree(n).foreachChild((function(e,t){var n=wO(t,QD());n&&(r=r.updateImmediateChild(e,n))})));var u=xO(o,e);if(!u&&!e._queryParams.loadsAllData()){var s=qO(e);ge(!t.queryToTagMap.has(s),"View does not exist, but we have a tag");var c=SO++;t.queryToTagMap.set(s,c),t.tagToQueryMap.set(c,s)}return{syncPoint:o,writesCache:MR(t.pendingWriteTree_,n),serverCache:r,serverCacheComplete:a,foundAncestorDefaultView:i,viewAlreadyExists:u}}function OO(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=wO(n,rP(e,t));if(r)return r}));return BR(r,t,i,n,!0)}function FO(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=rP(e,n);r=r||wO(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||wO(i,QD()):(i=new yO,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new yR(r,!0,!1):null;return function(e){return _R(e.viewCache_)}(gO(i,t,MR(e.pendingWriteTree_,t._path),a?o.getNode():VP.EMPTY_NODE,a))}function LO(e,t){return MO(t,e.syncPointTree_,null,MR(e.pendingWriteTree_,QD()))}function MO(e,t,n,r){if(nP(e.path))return jO(e,t,n,r);var i=t.get(QD());null==n&&null!=i&&(n=wO(i,QD()));var a=[],o=$D(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=YR(r,o);a=a.concat(MO(u,s,c,l))}return i&&(a=a.concat(mO(i,e,r,n))),a}function jO(e,t,n,r){var i=t.get(QD());null==n&&null!=i&&(n=wO(i,QD()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=YR(r,t),s=e.operationForChild(t);s&&(a=a.concat(jO(s,i,o,u)))})),i&&(a=a.concat(mO(i,e,r,n))),a}function VO(e,t){var n=t.query,r=UO(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||VP.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=zO(e,n);if(r){var i=BO(r),a=i.path,o=i.queryId,u=rP(a,t);return WO(e,a,new dR(lR(o),u))}return[]}(e,n._path,r):function(e,t){return LO(e,new dR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return DO(e,n,null,i)}}}function UO(e,t){var n=qO(t);return e.queryToTagMap.get(n)}function qO(e){return e._path.toString()+"$"+e._queryIdentifier}function zO(e,t){return e.tagToQueryMap.get(t)}function BO(e){var t=e.indexOf("$");return ge(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new HD(e.substr(0,t))}}function WO(e,t,n){var r=e.syncPointTree_.get(t);return ge(r,"Missing sync point for query tag that we're tracking"),mO(r,n,MR(e.pendingWriteTree_,t),null)}function KO(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(ge(vO,"Reference.ts has not been loaded"),vO)(e._repo,e._path):e}var GO=function(){function e(t){ne(this,e),this.node_=t}return ie(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),HO=function(){function e(t,n){ne(this,e),this.syncTree_=t,this.path_=n}return ie(e,[{key:"getImmediateChild",value:function(t){var n=tP(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return OO(this.syncTree_,this.path_)}}]),e}(),QO=function(e,t,n){return e&&"object"===typeof e?(ge(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?$O(e[".sv"],t,n):"object"===typeof e[".sv"]?YO(e[".sv"],t):void ge(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},$O=function(e,t,n){if("timestamp"===e)return n.timestamp;ge(!1,"Unexpected server value: "+e)},YO=function(e,t,n){e.hasOwnProperty("increment")||ge(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&ge(!1,"Unexpected increment value: "+r);var i=t.node();if(ge(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},JO=function(e,t,n,r){return ZO(t,new HO(n,e),r)},XO=function(e,t,n){return ZO(e,new GO(t),n)};function ZO(e,t,n){var r,i=e.getPriority().val(),a=QO(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=QO(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new NP(u,qP(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new NP(a))),s.forEachChild(RP,(function(e,i){var a=ZO(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var eF=ie((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};ne(this,e),this.name=t,this.parent=n,this.node=r}));function tF(e,t){for(var n=t instanceof HD?t:new HD(t),r=e,i=$D(n);null!==i;){var a=We(r.node.children,i)||{children:{},childCount:0};r=new eF(i,r,a),i=$D(n=JD(n))}return r}function nF(e){return e.node.value}function rF(e,t){e.node.value=t,sF(e)}function iF(e){return e.node.childCount>0}function aF(e,t){pD(e.node.children,(function(n,r){t(new eF(n,e,r))}))}function oF(e,t,n,r){n&&!r&&t(e),aF(e,(function(e){oF(e,t,!0,r)})),n&&r&&t(e)}function uF(e){return new HD(null===e.parent?e.name:uF(e.parent)+"/"+e.name)}function sF(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===nF(e)&&!iF(e)}(n),i=Be(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,sF(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,sF(e))}(e.parent,e.name,e)}var cF=/[\[\].#$\/\u0000-\u001F\u007F]/,lF=/[\[\].#$\u0000-\u001F\u007F]/,fF=10485760,hF=function(e){return"string"===typeof e&&0!==e.length&&!cF.test(e)},dF=function(e){return"string"===typeof e&&0!==e.length&&!lF.test(e)},pF=function(e,t,n,r){r&&void 0===t||vF(nt(e,"value"),t,n)},vF=function e(t,n,r){var i=r instanceof HD?new oP(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+sP(i));if("function"===typeof n)throw new Error(t+"contains a function "+sP(i)+" with contents = "+n.toString());if(oD(n))throw new Error(t+"contains "+n.toString()+" "+sP(i));if("string"===typeof n&&n.length>fF/3&&rt(n)>fF)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+sP(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(pD(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!hF(n)))throw new Error(t+" contains an invalid key ("+n+") "+sP(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=rt(t),uP(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=rt(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+sP(i)+" in addition to actual children.")}},yF=function(e,t,n,r){if((!r||void 0!==n)&&!dF(n))throw new Error(nt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},mF=function(e,t){if(".info"===$D(t))throw new Error(e+" failed = Can't modify data under /.info/")},gF=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!hF(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),dF(e)}(n))throw new Error(nt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},kF=ie((function e(){ne(this,e),this.eventLists_=[],this.recursionDepth_=0}));function bF(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||iP(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function wF(e,t,n){bF(e,n),_F(e,(function(e){return aP(e,t)||aP(t,e)}))}function _F(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(xF(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function xF(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();XA&&tD("event: "+n.toString()),bD(r)}}}var IF="repo_interrupt",EF=function(){function e(t,n,r,i){ne(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new kF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=iR(),this.transactionQueueTree_=new eF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return ie(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function SF(e,t,n){if(e.stats_=OD(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new nR(e.repoInfo_,(function(t,n,r,i){NF(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return AF(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{qe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new fP(e.repoInfo_,t,(function(t,n,r,i){NF(e,t,n,r,i)}),(function(t){AF(e,t)}),(function(t){!function(e,t){pD(t,(function(t,n){DF(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return RD[n]||(RD[n]=t()),RD[n]}(e.repoInfo_,(function(){return new cR(e.stats_,e.server_)})),e.infoData_=new rR,e.infoSyncTree_=new TO({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=AO(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),DF(e,"connected",!1),e.serverSyncTree_=new TO({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);wF(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function TF(e){var t=e.infoData_.getNode(new HD(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function CF(e){return(t=(t={timestamp:TF(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function NF(e,t,n,r,i){e.dataUpdateCount++;var a=new HD(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=Ge(n,(function(e){return qP(e)}));o=function(e,t,n,r){var i=zO(e,r);if(i){var a=BO(i),o=a.path,u=a.queryId,s=rP(o,t),c=ER.fromObject(n);return WO(e,o,new vR(lR(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=qP(n);o=PO(e.serverSyncTree_,a,s,i)}else if(r){var c=Ge(n,(function(e){return qP(e)}));o=function(e,t,n){var r=ER.fromObject(n);return LO(e,new vR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=qP(n);o=AO(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=qF(e,a)),wF(e.eventQueue_,f,o)}function AF(e,t){DF(e,"connected",t),!1===t&&function(e){LF(e,"onDisconnectEvents");var t=CF(e),n=iR();oR(e.onDisconnect_,QD(),(function(r,i){var a=JO(r,i,e.serverSyncTree_,t);aR(n,r,a)}));var r=[];oR(n,QD(),(function(t,n){r=r.concat(AO(e.serverSyncTree_,t,n));var i=GF(e,t);qF(e,i)})),e.onDisconnect_=iR(),wF(e.eventQueue_,QD(),r)}(e)}function DF(e,t,n){var r=new HD("/.info/"+t),i=qP(n);e.infoData_.updateSnapshot(r,i);var a=AO(e.infoSyncTree_,r,i);wF(e.eventQueue_,r,a)}function PF(e){return e.nextWriteId_++}function RF(e,t){var n=FO(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=qP(n).withIndex(t._queryParams.getIndex());if(t._queryParams.loadsAllData())AO(e.serverSyncTree_,t._path,r);else{var i=function(e,t){var n=RO(t,e),r=n.syncPoint,i=n.serverCache,a=gO(r,t,n.writesCache,i,n.serverCacheComplete);return r.views.has(t._queryIdentifier)||r.views.set(t._queryIdentifier,a),t._queryParams.loadsAllData()?null:UO(e,t)}(e.serverSyncTree_,t);PO(e.serverSyncTree_,t._path,r,i)}return DO(e.serverSyncTree_,t,null).length>0&&LF(e,"unexpected cancel events in repoGetValue"),r}),(function(n){return LF(e,"get for query "+qe(t)+" failed: "+n),Promise.reject(new Error(n))}))}function OF(e,t,n,r,i){LF(e,"set",{path:t.toString(),value:n,priority:r});var a=CF(e),o=qP(n,r),u=OO(e.serverSyncTree_,t),s=XO(o,u,a),c=PF(e),l=CO(e.serverSyncTree_,t,s,c,!0);bF(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||aD("set at "+t+" failed: "+n);var o=NO(e.serverSyncTree_,c,!a);wF(e.eventQueue_,t,o),MF(e,i,n,r)}));var f=GF(e,t);qF(e,f),wF(e.eventQueue_,f,[])}function FF(e){e.persistentConnection_&&e.persistentConnection_.interrupt(IF)}function LF(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];tD.apply(void 0,[t].concat(r))}function MF(e,t,n,r){t&&bD((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function jF(e,t,n){return OO(e.serverSyncTree_,t,n)||VP.EMPTY_NODE}function VF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||KF(e,t),nF(t)){var n=BF(e,t);ge(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&UF(e,uF(t),n)}else iF(t)&&aF(t,(function(t){VF(e,t)}))}function UF(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=jF(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];ge(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=rP(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){LF(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(NO(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);KF(e,tF(e.transactionQueueTree_,t)),VF(e,e.transactionQueueTree_),wF(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)bD(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{aD("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}qF(e,t)}}),o)}function qF(e,t){var n=zF(e,t),r=uF(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=rP(n,s.path),l=!1,f=void 0;if(ge(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,f=s.abortReason,i=i.concat(NO(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,f="maxretry",i=i.concat(NO(e.serverSyncTree_,s.currentWriteId,!0));else{var h=jF(e,s.path,o);s.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){vF("transaction failed: Data returned ",d,s.path);var p=qP(d);"object"===typeof d&&null!=d&&Be(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=s.currentWriteId,y=CF(e),m=XO(p,h,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=PF(e),o.splice(o.indexOf(v),1),i=(i=i.concat(CO(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(NO(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(NO(e.serverSyncTree_,s.currentWriteId,!0))}wF(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},s=0;s<t.length;s++)u(s);KF(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)bD(r[c]);VF(e,e.transactionQueueTree_)}(e,BF(e,n),r),r}function zF(e,t){var n,r=e.transactionQueueTree_;for(n=$D(t);null!==n&&void 0===nF(r);)r=tF(r,n),n=$D(t=JD(t));return r}function BF(e,t){var n=[];return WF(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function WF(e,t,n){var r=nF(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);aF(t,(function(t){WF(e,t,n)}))}function KF(e,t){var n=nF(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,rF(t,n.length>0?n:void 0)}aF(t,(function(t){KF(e,t)}))}function GF(e,t){var n=uF(zF(e,t)),r=tF(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){HF(e,t)})),HF(e,r),oF(r,(function(t){HF(e,t)})),n}function HF(e,t){var n=nF(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(ge(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(ge(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(NO(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?rF(t,void 0):n.length=a+1,wF(e.eventQueue_,uF(t),i);for(var u=0;u<r.length;u++)bD(r[u])}}var QF=function(e,t){var n=$F(e),r=n.namespace;"firebase.com"===n.domain&&iD(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||iD("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&aD("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ND(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new HD(n.pathString)}},$F=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=ae(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):aD("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},YF=function(){function e(t,n,r,i){ne(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return ie(e,[{key:"key",get:function(){return nP(this._path)?null:XD(this._path)}},{key:"ref",get:function(){return new JF(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=tR(this._queryParams),t=hD(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return tR(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=it(t))instanceof e))return!1;var n=this._repo===t._repo,r=iP(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var JF=function(e){se(n,e);var t=he(n);function n(e,r){return ne(this,n),t.call(this,e,r,new ZP,!1)}return ie(n,[{key:"parent",get:function(){var e=eP(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(YF),XF=function(){function e(t,n,r){ne(this,e),this._node=t,this.ref=n,this._index=r}return ie(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new HD(t),r=eL(this.ref,t);return new e(this._node.getChild(n),r,RP)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,eL(n.ref,r),RP))}))}},{key:"hasChild",value:function(e){var t=new HD(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function ZF(e,t){return(e=it(e))._checkNotDeleted("ref"),void 0!==t?eL(e._root,t):e._root}function eL(e,t){var n,r,i,a;return null===$D((e=it(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),yF(n,r,i,a)):yF("child","path",t,!1),new JF(e._repo,tP(e._path,t))}function tL(e,t){e=it(e),mF("set",e._path),pF("set",t,e._path,!1);var n=new Se;return OF(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function nL(e){return RF((e=it(e))._repo,e).then((function(t){return new XF(t,new JF(e._repo,e._path),e._queryParams.getIndex())}))}!function(e){ge(!sO,"__referenceConstructor has already been defined"),sO=e}(JF),function(e){ge(!vO,"__referenceConstructor has already been defined"),vO=e}(JF);var rL={},iL=!1;function aL(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||iD("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tD("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=QF(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=QF(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new ID(ID.OWNER):new xD(e.name,e.options,t);gF("Invalid Firebase Database URL",u),nP(u.path)||iD("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=rL[t.name];i||(i={},rL[t.name]=i);var a=i[e.toURLString()];a&&iD("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new EF(e,iL,n,r),i[e.toURLString()]=a,a}(s,e,l,new _D(e.name,n));return new oL(f,e)}var oL=function(){function e(t,n){ne(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return ie(e,[{key:"_repo",get:function(){return this._instanceStarted||(SF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new JF(this._repo,QD())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=rL[t];n&&n[e.key]===e||iD("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),FF(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&iD("Cannot call "+e+" on a deleted database.")}}]),e}();function uL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an(),t=arguments.length>1?arguments[1]:void 0;return Yt(e,"database").getImmediate({identifier:t})}fP.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},fP.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};function sL(e){if(!Array.isArray(e))throw new TypeError("Expected an array, got ".concat(typeof e));for(var t=(e=ot(e)).length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e}!function(e){!function(e){zA=e}(nn),$t(new ut("database",(function(e,t){var n=t.instanceIdentifier;return aL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),cn(UA,qA,e),cn(UA,qA,"esm2017")}();var cL=function(e){var t=e.nestIndex,n=e.control,r=e.register,i=NC({control:n,name:"test[".concat(t,"].answers")}),a=i.fields,o=(i.remove,i.append);return(0,_T.jsxs)("div",{children:[a.map((function(e,n){return(0,_T.jsx)("div",{style:{marginLeft:20},children:(0,_T.jsx)("input",bt(bt({},r("test[".concat(t,"].answers[").concat(n,"].field"),{point:1})),{},{style:{marginRight:"25px"}}))},e.id)})),(0,_T.jsx)("a",{class:"green",type:"button",onClick:function(){return o({field:"Answer",point:0})},children:"Add answer"}),(0,_T.jsx)("hr",{})]})};function lL(e){var t=e.control,n=e.register,r=e.setValue,i=e.getValues,a=NC({control:t,name:"test"}),o=a.fields,u=(a.append,a.remove);a.prepend;return(0,_T.jsxs)(_T.Fragment,{children:[(0,_T.jsx)("h1",{children:"Add New Quiz"}),(0,_T.jsxs)("p",{children:["Please fill all the fields bellow in order to add new quiz",(0,_T.jsx)("br",{}),(0,_T.jsx)("b",{className:"",children:"Note that regardless the order of answers you input, they will be showed in random order"})]}),(0,_T.jsx)("br",{}),(0,_T.jsx)("label",{children:(0,_T.jsx)("h4",{children:"Give the quiz a title"})}),(0,_T.jsx)("input",bt({},n("title",{required:!0,maxLength:30}))),(0,_T.jsx)("br",{}),(0,_T.jsx)("label",{children:(0,_T.jsx)("h4",{children:"Add some description"})}),(0,_T.jsx)("input",bt({},n("description",{required:!0,maxLength:150}))),(0,_T.jsx)("label",{children:(0,_T.jsx)("h4",{children:"Select a category for it"})}),(0,_T.jsxs)("select",bt(bt({},n("category",{required:"select one option"})),{},{children:[(0,_T.jsx)("option",{value:"",children:"Select"}),(0,_T.jsx)("option",{value:"art and literature",children:"Art and Literature"}),(0,_T.jsx)("option",{value:"general knowledge",children:"General Knowledge"}),(0,_T.jsx)("option",{value:"geography",children:"Geography"}),(0,_T.jsx)("option",{value:"history",children:"History"}),(0,_T.jsx)("option",{value:"music",children:"Music"}),(0,_T.jsx)("option",{value:"science and nature",children:"Science and Nature"}),(0,_T.jsx)("option",{value:"sport",children:"Sport"}),(0,_T.jsx)("option",{value:"tv and films",children:"TV and Films"}),(0,_T.jsx)("option",{value:"art and literature",children:"Art and Literature"}),(0,_T.jsx)("option",{value:"trivia",children:"Trivia"}),(0,_T.jsx)("option",{value:"other",children:"Other"})]})),(0,_T.jsxs)("h4",{children:["Difficulty",(0,_T.jsxs)("div",{className:"",children:["   \u2139",(0,_T.jsxs)("span",{className:"",children:["One difficulty point is added for each 10 questions ",(0,_T.jsx)("br",{}),"E.g. Quiz with 21 questions will have 2 difficulty points, 29 questions will still have 2 difficulty points, but 30- 3 difficulty points"]})]})]}),(0,_T.jsx)("input",bt({label:"difficulty",type:"number"},n("difficulty",{min:0,max:10}))),(0,_T.jsx)("h4",{children:"Enter quiz questions and answers"}),(0,_T.jsx)("br",{}),o.map((function(e,r){return(0,_T.jsxs)("div",{children:[(0,_T.jsx)("input",bt(bt({name:"test[".concat(r,"].name")},n("test[".concat(r,"].name"),{required:!0,maxLength:150})),{},{defaultValue:e.name})),(0,_T.jsx)("button",{className:"",type:"button",onClick:function(){return u(r)},children:"Delete question"}),(0,_T.jsx)(cL,{nestIndex:r,control:t,register:n})]},e.id)})),(0,_T.jsx)("section",{children:(0,_T.jsx)("a",{class:"",type:"button",onClick:function(){r("test",[].concat(ot(i().test),[{name:"Question",answers:[{field:"Answer(correct one)",point:1}]}]))},children:"Add questions"})})]})}var fL=[];MA({}).required();var hL=function(){var e=uL(),t=ZF(uL()),n=c((0,r.useState)([{questions:[fL]}]),2),i=(n[0],n[1],c((0,r.useState)(0),2)),a=i[0],o=i[1],u=c((0,r.useState)(""),2),s=u[0],l=u[1],f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.useRef(),n=c(r.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}}),2),i=n[0],a=n[1];t.current?t.current.control._options=e:t.current=bt(bt({},fN(e)),{},{formState:i});var o=t.current.control,u=r.useCallback((function(e){rC(e,o._proxyFormState,!0)&&(o._formState=bt(bt({},o._formState),e),a(bt({},o._formState)))}),[o]);return aC({subject:o._subjects.state,callback:u}),r.useEffect((function(){o._stateFlags.mount||(o._proxyFormState.isValid&&o._updateValid(),o._stateFlags.mount=!0),o._stateFlags.watch&&(o._stateFlags.watch=!1,o._subjects.state.next({})),o._removeUnmounted()})),t.current.formState=tC(i,o._proxyFormState),t.current}({}),h=f.control,d=f.register,p=f.handleSubmit,v=f.getValues,y=f.reset,m=f.setValue;return(0,_T.jsxs)("div",{children:[(0,_T.jsx)("div",{className:"",children:(0,_T.jsx)("div",{className:"",children:(0,_T.jsx)("button",{className:"",onClick:function(){return o(!0),void nL(eL(t,"quizes/")).then((function(e){e.exists()?(e.size,l(e.size)):console.log("No data available")})).catch((function(e){console.error(e)}))},children:"+"})})}),a?(0,_T.jsx)("div",{className:"",children:(0,_T.jsx)("div",{id:"demo-modal",className:"",children:(0,_T.jsx)("form",{onSubmit:p((function(t){for(var n=0;n<t.test.length;n++){var r=t.test[n].answers;sL(r);t.test[n].answers=sL(r)}tL(ZF(e,"quizes/".concat(s+1)),{display:!0,title:t.title,description:t.description,category:t.category,difficulty:t.difficulty,questions:t.test}),alert("submited!")})),children:(0,_T.jsxs)("div",{className:"",children:[(0,_T.jsx)(lL,{control:h,register:d,getValues:v,setValue:m}),(0,_T.jsx)("button",{type:"button",onClick:function(){return y()},children:"Reset"}),(0,_T.jsx)("input",{type:"submit"}),(0,_T.jsx)("button",{className:"",onClick:function(){return o(!1)},children:"\xd7"})]})})})}):null]})};var dL=function(){var e=c(wT(sT),3),t=e[0],n=(e[1],e[2],V());return(0,r.useEffect)((function(){if(!t)return n("/login")}),[t]),(0,_T.jsx)("div",{children:t?(0,_T.jsxs)("div",{className:"homepage",children:[(0,_T.jsx)(xT,{}),(0,_T.jsx)("div",{className:"main_container special",children:(0,_T.jsx)("div",{className:"",children:(0,_T.jsx)(hL,{})})})]}):null})},pL=n.p+"static/media/image.83414fe2611745975648.jpg",vL=function(e){var t=e.question,n=(e.answers,e.index),r=e.onAnswerSelected,i=e.onSubmit;return(0,_T.jsxs)("div",{children:[(0,_T.jsx)("h2",{className:"question-name",children:t.name}),(0,_T.jsx)("div",{className:"main-quiz-ul",children:t.answers.map((function(e,t){return(0,_T.jsx)("div",{children:(0,_T.jsxs)("li",{className:"option-li",children:[(0,_T.jsx)("input",{required:!0,className:"radio-input",type:"radio",name:"question_".concat(n),id:"question_".concat(n,"_answer_").concat(t),defaultChecked:!1,value:t,onChange:r})," ",(0,_T.jsx)("label",{htmlFor:"question_".concat(n,"_answer_").concat(t),children:e.field}),(0,_T.jsx)("div",{className:"check",children:(0,_T.jsx)("div",{className:"inside"})})]})},"".concat(n,"-").concat(t))}))}),(0,_T.jsx)("button",{className:"start-quiz",onClick:i,children:"Submit"})]})},yL=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this,e)).state={quiz:{},index:0,answers:[],shuffledA:[],id:r.props.id,count:0},r}return ie(n,[{key:"componentDidMount",value:function(){var e=this;nL(eL(ZF(uL()),"quizes/"+this.state.id)).then((function(t){if(t.exists()){var n=t.val();e.setState({quiz:n})}else console.log("No data available")})).catch((function(e){console.log(e)}))}},{key:"handleSubmit",value:function(){var e=this;if(this.state.index<this.state.quiz.questions.length)this.setState({index:this.state.index+1});else{var t=this.state.score||0;this.state.answers.map((function(n,r){return t+=e.state.quiz.questions[r].answers[n].point})),this.setState({score:t})}}},{key:"handleAnswerSelected",value:function(e){var t=[].concat(ot(this.state.answers.slice(0,this.state.index)),[parseInt(e.target.value)],ot(this.state.answers.slice(this.state.index+1)));this.setState({answers:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.quiz,r=t.index,i=!(!n.questions||r!==n.questions.length),a=n.questions?n.questions.length:0,o=0;return i&&this.state.answers.map((function(t,n){return o+=e.state.quiz.questions[n].answers[t].point})),(0,_T.jsx)("div",{children:i?(0,_T.jsxs)("div",{children:[(0,_T.jsx)("br",{}),(0,_T.jsx)("h1",{children:this.state.quiz.title}),(0,_T.jsx)("br",{}),(0,_T.jsx)("br",{}),(0,_T.jsx)("h2",{children:"Quiz is finished!"}),(0,_T.jsx)("br",{}),"Your score is ",o," out of ",this.state.quiz.questions.length]}):(0,_T.jsxs)("div",{children:[(0,_T.jsxs)("h2",{children:["Question ",r+1," of ",a]}),n.questions&&r<a?(0,_T.jsx)(vL,{question:n.questions[r],index:r,onAnswerSelected:function(t){return e.handleAnswerSelected(t)},onSubmit:function(){return e.handleSubmit()}}):""]})})}}]),n}(r.Component),mL=yL;var gL=function(e){var t=c((0,r.useState)(!1),2),n=t[0],i=t[1],a=c((0,r.useState)(!1),2),o=a[0],u=a[1],s=function(){return i(!1)};return(0,_T.jsxs)(_T.Fragment,{children:[(0,_T.jsx)("button",{className:"fas fa-play play",onClick:function(){return i(!0)}}),n?(0,_T.jsx)("div",{className:"modal_background",children:(0,_T.jsxs)("div",{className:"modal",children:[(0,_T.jsx)("button",{class:"close_modal",onClick:s,children:"\xd7"}),(0,_T.jsx)("h2",{className:"quiz_title",children:"props.title"}),(0,_T.jsx)("p",{className:"quiz_description",children:"props.description"}),(0,_T.jsx)("b",{className:"warning",children:"Please note that if you don't select any answer, your final score will be 0 by default"}),(0,_T.jsx)("div",{className:"modal_footer",children:(0,_T.jsx)("button",{className:"classic_button ",onClick:function(){s(),u(!0)},children:"Start Quiz"})})]})}):null,o?(0,_T.jsx)("div",{className:"modal_background",children:(0,_T.jsxs)("div",{className:"modal",children:[(0,_T.jsx)(mL,{id:e.id}),(0,_T.jsx)("button",{class:"close_modal",onClick:function(){s(),u(!1)},children:"\xd7"})]})}):null]})},kL=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this,e)).getData=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=ZF(uL()),e.next=4,nL(eL(t,"quizes/"+r.state.id+"/questions")).then((function(e){if(e.exists()){var t=e.size;r.setState({numberOfQuestions:t})}})).catch((function(e){console.log(e)}));case 4:return e.next=6,nL(eL(t,"quizes/"+r.state.id)).then((function(e){if(e.exists()){var t=e.val();r.setState({quiz:t,title:r.state.quiz.title})}else console.log("No data available")})).catch((function(e){console.log(e)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:r.setState({title:r.state.quiz.title,description:r.state.quiz.description,display:r.state.quiz.display,done:!0,com_num:r.state.quiz.comments_num,views:r.state.quiz.views});case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),r.componentDidMount=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.getData();case 1:case"end":return e.stop()}}),e)}))),r.state={quiz:[],id:r.props.id,title:"",description:"",dificulty:0,numberOfQuestions:0,display:!1,done:!1,views:0,com_num:0,quiz_photo:pL,author_photo:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80"},r}return ie(n,[{key:"render",value:function(){return(0,_T.jsx)(_T.Fragment,{children:this.state.done&&this.state.display?(0,_T.jsxs)("div",{className:"container",children:[(0,_T.jsx)("img",{src:pL,className:"card_quiz_photo"}),(0,_T.jsxs)("div",{className:"container_info",children:[(0,_T.jsxs)("span",{children:[(0,_T.jsx)("i",{className:"fas fa-eye"}),this.state.views]}),(0,_T.jsxs)("span",{children:[(0,_T.jsx)("i",{className:"fas fa-comment-alt"}),this.state.com_num]}),(0,_T.jsxs)("span",{children:[(0,_T.jsx)("i",{className:"fas fa-clock"}),"21m"]}),(0,_T.jsxs)("span",{children:[(0,_T.jsx)("i",{className:"fas fa-question"}),this.state.numberOfQuestions]})]}),(0,_T.jsxs)("div",{className:"container_profile",children:[(0,_T.jsx)("img",{src:this.state.author_photo,alt:"author"}),(0,_T.jsxs)("div",{children:[(0,_T.jsx)("h2",{className:"capital",children:this.state.title}),(0,_T.jsxs)("p",{children:["by ",(0,_T.jsx)("b",{className:"capital",children:"this.author"})]})]}),(0,_T.jsx)("div",{children:(0,_T.jsx)(gL,{id:this.state.id,quiz:this.state.quiz,length:this.state.numberOfQuestions,title:this.state.quiz.title,description:this.state.description})})]})]}):null})}}]),n}(r.Component),bL=kL,wL=function(e){se(n,e);var t=he(n);function n(e){var r;return ne(this,n),(r=t.call(this,e)).getNumOfQuizes=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ZF(uL()),e.next=3,nL(eL(t,"quizes/")).then((function(e){if(e.exists()){var t=e.size;r.setState({num:t,dataw:e.val()})}else console.log("No data available")})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)}))),r.componentDidMount=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getNumOfQuizes();case 2:case"end":return e.stop()}}),e)}))),r.state={id:0,num:0,dataw:[]},r}return ie(n,[{key:"render",value:function(){for(var e=[],t=1;t<=this.state.num;t++)e.push((0,_T.jsx)(bL,{id:t}));return(0,_T.jsxs)("div",{className:"homepage",children:[(0,_T.jsx)(xT,{}),(0,_T.jsx)("div",{className:"main_container",children:(0,_T.jsx)("div",{className:"card-wrapper",children:e})})]})}}]),n}(r.Component),_L=function(e){se(n,e);var t=he(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"render",value:function(){return(0,_T.jsxs)("div",{className:"homepage",children:[(0,_T.jsx)(xT,{}),(0,_T.jsx)("div",{className:"main_container"})]})}}]),n}(r.Component),xL=_L;var IL=function(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c((0,r.useState)(""),2),a=i[0],o=i[1],u=c((0,r.useState)(""),2),s=u[0],l=u[1],f=c((0,r.useState)(!1),2),h=f[0],d=(f[1],c(wT(sT),3)),p=d[0],v=d[1],y=(d[2],V());(0,r.useEffect)((function(){v||p&&y("/dashboard")}),[p,v]);var m=c((0,r.useState)(null),2),g=m[0],k=(m[1],c((0,r.useState)(0),2)),b=k[0];return k[1],(0,_T.jsx)(_T.Fragment,{children:p?(0,_T.jsx)(_T.Fragment,{}):(0,_T.jsxs)("div",{className:"homepage",children:[(0,_T.jsx)(xT,{}),(0,_T.jsx)("div",{className:"main_container",children:(0,_T.jsx)("div",{className:"form_container",children:(0,_T.jsxs)("form",{children:[(0,_T.jsx)("h1",{children:"Register"}),(0,_T.jsx)("input",{type:"text",placeholder:"Full Name",value:s,onChange:function(e){return l(e.target.value)}}),(0,_T.jsx)("br",{}),(0,_T.jsx)("input",{type:"email",placeholder:"Email",value:t,onChange:function(e){return n(e.target.value)}}),(0,_T.jsx)("br",{}),(0,_T.jsx)("input",{type:h?"text":"password",placeholder:"Password",value:a,onChange:function(e){return o(e.target.value)}}),(0,_T.jsx)("br",{}),(0,_T.jsx)("label",{htmlFor:"profile_photo",children:" Select a profile photo"}),(0,_T.jsx)("br",{}),(0,_T.jsxs)("form",{className:"form",children:[(0,_T.jsx)("input",{type:"file"}),(0,_T.jsx)("button",{type:"submit",children:"Upload"})]}),!g&&(0,_T.jsx)("div",{className:"outerbar",children:(0,_T.jsxs)("div",{className:"innerbar",style:{width:"".concat(b,"%")},children:[b,"%"]})}),g&&(0,_T.jsx)("img",{src:g,alt:"uploaded file",height:200}),(0,_T.jsx)("input",{type:"button",value:"Register",onClick:function(){return hT(s,t,a)}}),(0,_T.jsx)("br",{}),(0,_T.jsx)("h2",{children:"OR"}),(0,_T.jsx)("input",{type:"button",value:"Sign with Google",onClick:fT}),(0,_T.jsx)("br",{}),(0,_T.jsxs)("p",{children:["Already have an account?  ",(0,_T.jsx)("a",{className:"underline",href:"/login",children:"Log In"})]})]})})})]})})};var EL=function(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c(wT(sT),3),a=i[0],o=i[1];return i[2],(0,r.useEffect)((function(){}),[a,o]),(0,_T.jsx)(_T.Fragment,{children:(0,_T.jsxs)("div",{className:"homepage",children:[(0,_T.jsx)(xT,{}),(0,_T.jsx)("div",{className:"main_container",children:(0,_T.jsx)("div",{className:"form_container",children:(0,_T.jsxs)("form",{children:[(0,_T.jsx)("h1",{children:"Reset password"}),(0,_T.jsx)("input",{type:"email",placeholder:"Email",value:t,onChange:function(e){return n(e.target.value)}}),(0,_T.jsx)("br",{}),(0,_T.jsx)("br",{}),(0,_T.jsx)("input",{type:"button",value:"Reset",onClick:function(){return pT(t)}}),(0,_T.jsx)("br",{}),(0,_T.jsxs)("p",{children:["Or ",(0,_T.jsx)("a",{className:"underline",href:"/login",children:"Log in"})]})]})})})]})})};var SL=function(){return(0,_T.jsx)(_T.Fragment,{children:(0,_T.jsx)($,{children:(0,_T.jsxs)(W,{children:[(0,_T.jsx)(z,{path:"/",element:(0,_T.jsx)(wL,{})}),(0,_T.jsx)(z,{path:"/login",element:(0,_T.jsx)(IT,{})}),(0,_T.jsx)(z,{path:"/register",element:(0,_T.jsx)(IL,{})}),(0,_T.jsx)(z,{path:"/reset",element:(0,_T.jsx)(EL,{})}),(0,_T.jsx)(z,{path:"/about",element:(0,_T.jsx)(xL,{})}),(0,_T.jsx)(z,{path:"/dashboard",element:(0,_T.jsx)(dL,{})})]})})})},TL=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,_T.jsx)(r.StrictMode,{children:(0,_T.jsx)(SL,{})})),TL()}()}();
//# sourceMappingURL=main.0f790739.js.map